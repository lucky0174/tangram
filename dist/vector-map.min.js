!function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{var t;"undefined"!=typeof window?t=window:"undefined"!=typeof global?t=global:"undefined"!=typeof self&&(t=self),t.Tangram=e()}}(function(){var define,module,exports;return function e(t,n,r){function i(a,s){if(!n[a]){if(!t[a]){var l="function"==typeof require&&require;if(!s&&l)return l(a,!0);if(o)return o(a,!0);throw new Error("Cannot find module '"+a+"'")}var u=n[a]={exports:{}};t[a][0].call(u.exports,function(e){var n=t[a][1][e];return i(n?n:e)},u,u.exports,e,t,n,r)}return n[a].exports}for(var o="function"==typeof require&&require,a=0;a<r.length;a++)i(r[a]);return i}({1:[function(){},{}],2:[function(e,t,n){!function(){"use strict";var e={};"undefined"==typeof n?"function"==typeof define&&"object"==typeof define.amd&&define.amd?(e.exports={},define(function(){return e.exports})):e.exports=window:e.exports=n,function(e){if(!t)var t=1e-6;if(!n)var n="undefined"!=typeof Float32Array?Float32Array:Array;var r={};r.setMatrixArrayType=function(e){n=e},"undefined"!=typeof e&&(e.glMatrix=r);var i={};i.create=function(){var e=new n(2);return e[0]=0,e[1]=0,e},i.clone=function(e){var t=new n(2);return t[0]=e[0],t[1]=e[1],t},i.fromValues=function(e,t){var r=new n(2);return r[0]=e,r[1]=t,r},i.copy=function(e,t){return e[0]=t[0],e[1]=t[1],e},i.set=function(e,t,n){return e[0]=t,e[1]=n,e},i.add=function(e,t,n){return e[0]=t[0]+n[0],e[1]=t[1]+n[1],e},i.subtract=function(e,t,n){return e[0]=t[0]-n[0],e[1]=t[1]-n[1],e},i.sub=i.subtract,i.multiply=function(e,t,n){return e[0]=t[0]*n[0],e[1]=t[1]*n[1],e},i.mul=i.multiply,i.divide=function(e,t,n){return e[0]=t[0]/n[0],e[1]=t[1]/n[1],e},i.div=i.divide,i.min=function(e,t,n){return e[0]=Math.min(t[0],n[0]),e[1]=Math.min(t[1],n[1]),e},i.max=function(e,t,n){return e[0]=Math.max(t[0],n[0]),e[1]=Math.max(t[1],n[1]),e},i.scale=function(e,t,n){return e[0]=t[0]*n,e[1]=t[1]*n,e},i.distance=function(e,t){var n=t[0]-e[0],r=t[1]-e[1];return Math.sqrt(n*n+r*r)},i.dist=i.distance,i.squaredDistance=function(e,t){var n=t[0]-e[0],r=t[1]-e[1];return n*n+r*r},i.sqrDist=i.squaredDistance,i.length=function(e){var t=e[0],n=e[1];return Math.sqrt(t*t+n*n)},i.len=i.length,i.squaredLength=function(e){var t=e[0],n=e[1];return t*t+n*n},i.sqrLen=i.squaredLength,i.negate=function(e,t){return e[0]=-t[0],e[1]=-t[1],e},i.normalize=function(e,t){var n=t[0],r=t[1],i=n*n+r*r;return i>0&&(i=1/Math.sqrt(i),e[0]=t[0]*i,e[1]=t[1]*i),e},i.dot=function(e,t){return e[0]*t[0]+e[1]*t[1]},i.cross=function(e,t,n){var r=t[0]*n[1]-t[1]*n[0];return e[0]=e[1]=0,e[2]=r,e},i.lerp=function(e,t,n,r){var i=t[0],o=t[1];return e[0]=i+r*(n[0]-i),e[1]=o+r*(n[1]-o),e},i.transformMat2=function(e,t,n){var r=t[0],i=t[1];return e[0]=n[0]*r+n[2]*i,e[1]=n[1]*r+n[3]*i,e},i.transformMat2d=function(e,t,n){var r=t[0],i=t[1];return e[0]=n[0]*r+n[2]*i+n[4],e[1]=n[1]*r+n[3]*i+n[5],e},i.transformMat3=function(e,t,n){var r=t[0],i=t[1];return e[0]=n[0]*r+n[3]*i+n[6],e[1]=n[1]*r+n[4]*i+n[7],e},i.transformMat4=function(e,t,n){var r=t[0],i=t[1];return e[0]=n[0]*r+n[4]*i+n[12],e[1]=n[1]*r+n[5]*i+n[13],e},i.forEach=function(){var e=i.create();return function(t,n,r,i,o,a){var s,l;for(n||(n=2),r||(r=0),l=i?Math.min(i*n+r,t.length):t.length,s=r;l>s;s+=n)e[0]=t[s],e[1]=t[s+1],o(e,e,a),t[s]=e[0],t[s+1]=e[1];return t}}(),i.str=function(e){return"vec2("+e[0]+", "+e[1]+")"},"undefined"!=typeof e&&(e.vec2=i);var o={};o.create=function(){var e=new n(3);return e[0]=0,e[1]=0,e[2]=0,e},o.clone=function(e){var t=new n(3);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t},o.fromValues=function(e,t,r){var i=new n(3);return i[0]=e,i[1]=t,i[2]=r,i},o.copy=function(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e},o.set=function(e,t,n,r){return e[0]=t,e[1]=n,e[2]=r,e},o.add=function(e,t,n){return e[0]=t[0]+n[0],e[1]=t[1]+n[1],e[2]=t[2]+n[2],e},o.subtract=function(e,t,n){return e[0]=t[0]-n[0],e[1]=t[1]-n[1],e[2]=t[2]-n[2],e},o.sub=o.subtract,o.multiply=function(e,t,n){return e[0]=t[0]*n[0],e[1]=t[1]*n[1],e[2]=t[2]*n[2],e},o.mul=o.multiply,o.divide=function(e,t,n){return e[0]=t[0]/n[0],e[1]=t[1]/n[1],e[2]=t[2]/n[2],e},o.div=o.divide,o.min=function(e,t,n){return e[0]=Math.min(t[0],n[0]),e[1]=Math.min(t[1],n[1]),e[2]=Math.min(t[2],n[2]),e},o.max=function(e,t,n){return e[0]=Math.max(t[0],n[0]),e[1]=Math.max(t[1],n[1]),e[2]=Math.max(t[2],n[2]),e},o.scale=function(e,t,n){return e[0]=t[0]*n,e[1]=t[1]*n,e[2]=t[2]*n,e},o.distance=function(e,t){var n=t[0]-e[0],r=t[1]-e[1],i=t[2]-e[2];return Math.sqrt(n*n+r*r+i*i)},o.dist=o.distance,o.squaredDistance=function(e,t){var n=t[0]-e[0],r=t[1]-e[1],i=t[2]-e[2];return n*n+r*r+i*i},o.sqrDist=o.squaredDistance,o.length=function(e){var t=e[0],n=e[1],r=e[2];return Math.sqrt(t*t+n*n+r*r)},o.len=o.length,o.squaredLength=function(e){var t=e[0],n=e[1],r=e[2];return t*t+n*n+r*r},o.sqrLen=o.squaredLength,o.negate=function(e,t){return e[0]=-t[0],e[1]=-t[1],e[2]=-t[2],e},o.normalize=function(e,t){var n=t[0],r=t[1],i=t[2],o=n*n+r*r+i*i;return o>0&&(o=1/Math.sqrt(o),e[0]=t[0]*o,e[1]=t[1]*o,e[2]=t[2]*o),e},o.dot=function(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]},o.cross=function(e,t,n){var r=t[0],i=t[1],o=t[2],a=n[0],s=n[1],l=n[2];return e[0]=i*l-o*s,e[1]=o*a-r*l,e[2]=r*s-i*a,e},o.lerp=function(e,t,n,r){var i=t[0],o=t[1],a=t[2];return e[0]=i+r*(n[0]-i),e[1]=o+r*(n[1]-o),e[2]=a+r*(n[2]-a),e},o.transformMat4=function(e,t,n){var r=t[0],i=t[1],o=t[2];return e[0]=n[0]*r+n[4]*i+n[8]*o+n[12],e[1]=n[1]*r+n[5]*i+n[9]*o+n[13],e[2]=n[2]*r+n[6]*i+n[10]*o+n[14],e},o.transformQuat=function(e,t,n){var r=t[0],i=t[1],o=t[2],a=n[0],s=n[1],l=n[2],u=n[3],c=u*r+s*o-l*i,p=u*i+l*r-a*o,f=u*o+a*i-s*r,d=-a*r-s*i-l*o;return e[0]=c*u+d*-a+p*-l-f*-s,e[1]=p*u+d*-s+f*-a-c*-l,e[2]=f*u+d*-l+c*-s-p*-a,e},o.forEach=function(){var e=o.create();return function(t,n,r,i,o,a){var s,l;for(n||(n=3),r||(r=0),l=i?Math.min(i*n+r,t.length):t.length,s=r;l>s;s+=n)e[0]=t[s],e[1]=t[s+1],e[2]=t[s+2],o(e,e,a),t[s]=e[0],t[s+1]=e[1],t[s+2]=e[2];return t}}(),o.str=function(e){return"vec3("+e[0]+", "+e[1]+", "+e[2]+")"},"undefined"!=typeof e&&(e.vec3=o);var a={};a.create=function(){var e=new n(4);return e[0]=0,e[1]=0,e[2]=0,e[3]=0,e},a.clone=function(e){var t=new n(4);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t},a.fromValues=function(e,t,r,i){var o=new n(4);return o[0]=e,o[1]=t,o[2]=r,o[3]=i,o},a.copy=function(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e},a.set=function(e,t,n,r,i){return e[0]=t,e[1]=n,e[2]=r,e[3]=i,e},a.add=function(e,t,n){return e[0]=t[0]+n[0],e[1]=t[1]+n[1],e[2]=t[2]+n[2],e[3]=t[3]+n[3],e},a.subtract=function(e,t,n){return e[0]=t[0]-n[0],e[1]=t[1]-n[1],e[2]=t[2]-n[2],e[3]=t[3]-n[3],e},a.sub=a.subtract,a.multiply=function(e,t,n){return e[0]=t[0]*n[0],e[1]=t[1]*n[1],e[2]=t[2]*n[2],e[3]=t[3]*n[3],e},a.mul=a.multiply,a.divide=function(e,t,n){return e[0]=t[0]/n[0],e[1]=t[1]/n[1],e[2]=t[2]/n[2],e[3]=t[3]/n[3],e},a.div=a.divide,a.min=function(e,t,n){return e[0]=Math.min(t[0],n[0]),e[1]=Math.min(t[1],n[1]),e[2]=Math.min(t[2],n[2]),e[3]=Math.min(t[3],n[3]),e},a.max=function(e,t,n){return e[0]=Math.max(t[0],n[0]),e[1]=Math.max(t[1],n[1]),e[2]=Math.max(t[2],n[2]),e[3]=Math.max(t[3],n[3]),e},a.scale=function(e,t,n){return e[0]=t[0]*n,e[1]=t[1]*n,e[2]=t[2]*n,e[3]=t[3]*n,e},a.distance=function(e,t){var n=t[0]-e[0],r=t[1]-e[1],i=t[2]-e[2],o=t[3]-e[3];return Math.sqrt(n*n+r*r+i*i+o*o)},a.dist=a.distance,a.squaredDistance=function(e,t){var n=t[0]-e[0],r=t[1]-e[1],i=t[2]-e[2],o=t[3]-e[3];return n*n+r*r+i*i+o*o},a.sqrDist=a.squaredDistance,a.length=function(e){var t=e[0],n=e[1],r=e[2],i=e[3];return Math.sqrt(t*t+n*n+r*r+i*i)},a.len=a.length,a.squaredLength=function(e){var t=e[0],n=e[1],r=e[2],i=e[3];return t*t+n*n+r*r+i*i},a.sqrLen=a.squaredLength,a.negate=function(e,t){return e[0]=-t[0],e[1]=-t[1],e[2]=-t[2],e[3]=-t[3],e},a.normalize=function(e,t){var n=t[0],r=t[1],i=t[2],o=t[3],a=n*n+r*r+i*i+o*o;return a>0&&(a=1/Math.sqrt(a),e[0]=t[0]*a,e[1]=t[1]*a,e[2]=t[2]*a,e[3]=t[3]*a),e},a.dot=function(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]+e[3]*t[3]},a.lerp=function(e,t,n,r){var i=t[0],o=t[1],a=t[2],s=t[3];return e[0]=i+r*(n[0]-i),e[1]=o+r*(n[1]-o),e[2]=a+r*(n[2]-a),e[3]=s+r*(n[3]-s),e},a.transformMat4=function(e,t,n){var r=t[0],i=t[1],o=t[2],a=t[3];return e[0]=n[0]*r+n[4]*i+n[8]*o+n[12]*a,e[1]=n[1]*r+n[5]*i+n[9]*o+n[13]*a,e[2]=n[2]*r+n[6]*i+n[10]*o+n[14]*a,e[3]=n[3]*r+n[7]*i+n[11]*o+n[15]*a,e},a.transformQuat=function(e,t,n){var r=t[0],i=t[1],o=t[2],a=n[0],s=n[1],l=n[2],u=n[3],c=u*r+s*o-l*i,p=u*i+l*r-a*o,f=u*o+a*i-s*r,d=-a*r-s*i-l*o;return e[0]=c*u+d*-a+p*-l-f*-s,e[1]=p*u+d*-s+f*-a-c*-l,e[2]=f*u+d*-l+c*-s-p*-a,e},a.forEach=function(){var e=a.create();return function(t,n,r,i,o,a){var s,l;for(n||(n=4),r||(r=0),l=i?Math.min(i*n+r,t.length):t.length,s=r;l>s;s+=n)e[0]=t[s],e[1]=t[s+1],e[2]=t[s+2],e[3]=t[s+3],o(e,e,a),t[s]=e[0],t[s+1]=e[1],t[s+2]=e[2],t[s+3]=e[3];return t}}(),a.str=function(e){return"vec4("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+")"},"undefined"!=typeof e&&(e.vec4=a);{var s={};new Float32Array([1,0,0,1])}s.create=function(){var e=new n(4);return e[0]=1,e[1]=0,e[2]=0,e[3]=1,e},s.clone=function(e){var t=new n(4);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t},s.copy=function(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e},s.identity=function(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=1,e},s.transpose=function(e,t){if(e===t){var n=t[1];e[1]=t[2],e[2]=n}else e[0]=t[0],e[1]=t[2],e[2]=t[1],e[3]=t[3];return e},s.invert=function(e,t){var n=t[0],r=t[1],i=t[2],o=t[3],a=n*o-i*r;return a?(a=1/a,e[0]=o*a,e[1]=-r*a,e[2]=-i*a,e[3]=n*a,e):null},s.adjoint=function(e,t){var n=t[0];return e[0]=t[3],e[1]=-t[1],e[2]=-t[2],e[3]=n,e},s.determinant=function(e){return e[0]*e[3]-e[2]*e[1]},s.multiply=function(e,t,n){var r=t[0],i=t[1],o=t[2],a=t[3],s=n[0],l=n[1],u=n[2],c=n[3];return e[0]=r*s+i*u,e[1]=r*l+i*c,e[2]=o*s+a*u,e[3]=o*l+a*c,e},s.mul=s.multiply,s.rotate=function(e,t,n){var r=t[0],i=t[1],o=t[2],a=t[3],s=Math.sin(n),l=Math.cos(n);return e[0]=r*l+i*s,e[1]=r*-s+i*l,e[2]=o*l+a*s,e[3]=o*-s+a*l,e},s.scale=function(e,t,n){var r=t[0],i=t[1],o=t[2],a=t[3],s=n[0],l=n[1];return e[0]=r*s,e[1]=i*l,e[2]=o*s,e[3]=a*l,e},s.str=function(e){return"mat2("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+")"},"undefined"!=typeof e&&(e.mat2=s);{var l={};new Float32Array([1,0,0,1,0,0])}l.create=function(){var e=new n(6);return e[0]=1,e[1]=0,e[2]=0,e[3]=1,e[4]=0,e[5]=0,e},l.clone=function(e){var t=new n(6);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t},l.copy=function(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e},l.identity=function(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=1,e[4]=0,e[5]=0,e},l.invert=function(e,t){var n=t[0],r=t[1],i=t[2],o=t[3],a=t[4],s=t[5],l=n*o-r*i;return l?(l=1/l,e[0]=o*l,e[1]=-r*l,e[2]=-i*l,e[3]=n*l,e[4]=(i*s-o*a)*l,e[5]=(r*a-n*s)*l,e):null},l.determinant=function(e){return e[0]*e[3]-e[1]*e[2]},l.multiply=function(e,t,n){var r=t[0],i=t[1],o=t[2],a=t[3],s=t[4],l=t[5],u=n[0],c=n[1],p=n[2],f=n[3],d=n[4],h=n[5];return e[0]=r*u+i*p,e[1]=r*c+i*f,e[2]=o*u+a*p,e[3]=o*c+a*f,e[4]=u*s+p*l+d,e[5]=c*s+f*l+h,e},l.mul=l.multiply,l.rotate=function(e,t,n){var r=t[0],i=t[1],o=t[2],a=t[3],s=t[4],l=t[5],u=Math.sin(n),c=Math.cos(n);return e[0]=r*c+i*u,e[1]=-r*u+i*c,e[2]=o*c+a*u,e[3]=-o*u+c*a,e[4]=c*s+u*l,e[5]=c*l-u*s,e},l.scale=function(e,t,n){var r=n[0],i=n[1];return e[0]=t[0]*r,e[1]=t[1]*i,e[2]=t[2]*r,e[3]=t[3]*i,e[4]=t[4]*r,e[5]=t[5]*i,e},l.translate=function(e,t,n){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4]+n[0],e[5]=t[5]+n[1],e},l.str=function(e){return"mat2d("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+", "+e[4]+", "+e[5]+")"},"undefined"!=typeof e&&(e.mat2d=l);{var u={};new Float32Array([1,0,0,0,1,0,0,0,1])}u.create=function(){var e=new n(9);return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=1,e[5]=0,e[6]=0,e[7]=0,e[8]=1,e},u.clone=function(e){var t=new n(9);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t},u.copy=function(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e},u.identity=function(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=1,e[5]=0,e[6]=0,e[7]=0,e[8]=1,e},u.transpose=function(e,t){if(e===t){var n=t[1],r=t[2],i=t[5];e[1]=t[3],e[2]=t[6],e[3]=n,e[5]=t[7],e[6]=r,e[7]=i}else e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8];return e},u.invert=function(e,t){var n=t[0],r=t[1],i=t[2],o=t[3],a=t[4],s=t[5],l=t[6],u=t[7],c=t[8],p=c*a-s*u,f=-c*o+s*l,d=u*o-a*l,h=n*p+r*f+i*d;return h?(h=1/h,e[0]=p*h,e[1]=(-c*r+i*u)*h,e[2]=(s*r-i*a)*h,e[3]=f*h,e[4]=(c*n-i*l)*h,e[5]=(-s*n+i*o)*h,e[6]=d*h,e[7]=(-u*n+r*l)*h,e[8]=(a*n-r*o)*h,e):null},u.adjoint=function(e,t){var n=t[0],r=t[1],i=t[2],o=t[3],a=t[4],s=t[5],l=t[6],u=t[7],c=t[8];return e[0]=a*c-s*u,e[1]=i*u-r*c,e[2]=r*s-i*a,e[3]=s*l-o*c,e[4]=n*c-i*l,e[5]=i*o-n*s,e[6]=o*u-a*l,e[7]=r*l-n*u,e[8]=n*a-r*o,e},u.determinant=function(e){var t=e[0],n=e[1],r=e[2],i=e[3],o=e[4],a=e[5],s=e[6],l=e[7],u=e[8];return t*(u*o-a*l)+n*(-u*i+a*s)+r*(l*i-o*s)},u.multiply=function(e,t,n){var r=t[0],i=t[1],o=t[2],a=t[3],s=t[4],l=t[5],u=t[6],c=t[7],p=t[8],f=n[0],d=n[1],h=n[2],m=n[3],g=n[4],y=n[5],v=n[6],_=n[7],x=n[8];return e[0]=f*r+d*a+h*u,e[1]=f*i+d*s+h*c,e[2]=f*o+d*l+h*p,e[3]=m*r+g*a+y*u,e[4]=m*i+g*s+y*c,e[5]=m*o+g*l+y*p,e[6]=v*r+_*a+x*u,e[7]=v*i+_*s+x*c,e[8]=v*o+_*l+x*p,e},u.mul=u.multiply,u.translate=function(e,t,n){var r=t[0],i=t[1],o=t[2],a=t[3],s=t[4],l=t[5],u=t[6],c=t[7],p=t[8],f=n[0],d=n[1];return e[0]=r,e[1]=i,e[2]=o,e[3]=a,e[4]=s,e[5]=l,e[6]=f*r+d*a+u,e[7]=f*i+d*s+c,e[8]=f*o+d*l+p,e},u.rotate=function(e,t,n){var r=t[0],i=t[1],o=t[2],a=t[3],s=t[4],l=t[5],u=t[6],c=t[7],p=t[8],f=Math.sin(n),d=Math.cos(n);return e[0]=d*r+f*a,e[1]=d*i+f*s,e[2]=d*o+f*l,e[3]=d*a-f*r,e[4]=d*s-f*i,e[5]=d*l-f*o,e[6]=u,e[7]=c,e[8]=p,e},u.scale=function(e,t,n){var r=n[0],i=n[2];return e[0]=r*t[0],e[1]=r*t[1],e[2]=r*t[2],e[3]=i*t[3],e[4]=i*t[4],e[5]=i*t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e},u.fromMat2d=function(e,t){return e[0]=t[0],e[1]=t[1],e[2]=0,e[3]=t[2],e[4]=t[3],e[5]=0,e[6]=t[4],e[7]=t[5],e[8]=1,e},u.fromQuat=function(e,t){var n=t[0],r=t[1],i=t[2],o=t[3],a=n+n,s=r+r,l=i+i,u=n*a,c=n*s,p=n*l,f=r*s,d=r*l,h=i*l,m=o*a,g=o*s,y=o*l;return e[0]=1-(f+h),e[1]=c+y,e[2]=p-g,e[3]=c-y,e[4]=1-(u+h),e[5]=d+m,e[6]=p+g,e[7]=d-m,e[8]=1-(u+f),e},u.str=function(e){return"mat3("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+", "+e[4]+", "+e[5]+", "+e[6]+", "+e[7]+", "+e[8]+")"},"undefined"!=typeof e&&(e.mat3=u);{var c={};new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1])}c.create=function(){var e=new n(16);return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e},c.clone=function(e){var t=new n(16);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t},c.copy=function(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e},c.identity=function(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e},c.transpose=function(e,t){if(e===t){var n=t[1],r=t[2],i=t[3],o=t[6],a=t[7],s=t[11];e[1]=t[4],e[2]=t[8],e[3]=t[12],e[4]=n,e[6]=t[9],e[7]=t[13],e[8]=r,e[9]=o,e[11]=t[14],e[12]=i,e[13]=a,e[14]=s}else e[0]=t[0],e[1]=t[4],e[2]=t[8],e[3]=t[12],e[4]=t[1],e[5]=t[5],e[6]=t[9],e[7]=t[13],e[8]=t[2],e[9]=t[6],e[10]=t[10],e[11]=t[14],e[12]=t[3],e[13]=t[7],e[14]=t[11],e[15]=t[15];return e},c.invert=function(e,t){var n=t[0],r=t[1],i=t[2],o=t[3],a=t[4],s=t[5],l=t[6],u=t[7],c=t[8],p=t[9],f=t[10],d=t[11],h=t[12],m=t[13],g=t[14],y=t[15],v=n*s-r*a,_=n*l-i*a,x=n*u-o*a,b=r*l-i*s,w=r*u-o*s,S=i*u-o*l,E=c*m-p*h,L=c*g-f*h,z=c*y-d*h,A=p*g-f*m,k=p*y-d*m,I=f*y-d*g,T=v*I-_*k+x*A+b*z-w*L+S*E;return T?(T=1/T,e[0]=(s*I-l*k+u*A)*T,e[1]=(i*k-r*I-o*A)*T,e[2]=(m*S-g*w+y*b)*T,e[3]=(f*w-p*S-d*b)*T,e[4]=(l*z-a*I-u*L)*T,e[5]=(n*I-i*z+o*L)*T,e[6]=(g*x-h*S-y*_)*T,e[7]=(c*S-f*x+d*_)*T,e[8]=(a*k-s*z+u*E)*T,e[9]=(r*z-n*k-o*E)*T,e[10]=(h*w-m*x+y*v)*T,e[11]=(p*x-c*w-d*v)*T,e[12]=(s*L-a*A-l*E)*T,e[13]=(n*A-r*L+i*E)*T,e[14]=(m*_-h*b-g*v)*T,e[15]=(c*b-p*_+f*v)*T,e):null},c.adjoint=function(e,t){var n=t[0],r=t[1],i=t[2],o=t[3],a=t[4],s=t[5],l=t[6],u=t[7],c=t[8],p=t[9],f=t[10],d=t[11],h=t[12],m=t[13],g=t[14],y=t[15];return e[0]=s*(f*y-d*g)-p*(l*y-u*g)+m*(l*d-u*f),e[1]=-(r*(f*y-d*g)-p*(i*y-o*g)+m*(i*d-o*f)),e[2]=r*(l*y-u*g)-s*(i*y-o*g)+m*(i*u-o*l),e[3]=-(r*(l*d-u*f)-s*(i*d-o*f)+p*(i*u-o*l)),e[4]=-(a*(f*y-d*g)-c*(l*y-u*g)+h*(l*d-u*f)),e[5]=n*(f*y-d*g)-c*(i*y-o*g)+h*(i*d-o*f),e[6]=-(n*(l*y-u*g)-a*(i*y-o*g)+h*(i*u-o*l)),e[7]=n*(l*d-u*f)-a*(i*d-o*f)+c*(i*u-o*l),e[8]=a*(p*y-d*m)-c*(s*y-u*m)+h*(s*d-u*p),e[9]=-(n*(p*y-d*m)-c*(r*y-o*m)+h*(r*d-o*p)),e[10]=n*(s*y-u*m)-a*(r*y-o*m)+h*(r*u-o*s),e[11]=-(n*(s*d-u*p)-a*(r*d-o*p)+c*(r*u-o*s)),e[12]=-(a*(p*g-f*m)-c*(s*g-l*m)+h*(s*f-l*p)),e[13]=n*(p*g-f*m)-c*(r*g-i*m)+h*(r*f-i*p),e[14]=-(n*(s*g-l*m)-a*(r*g-i*m)+h*(r*l-i*s)),e[15]=n*(s*f-l*p)-a*(r*f-i*p)+c*(r*l-i*s),e},c.determinant=function(e){var t=e[0],n=e[1],r=e[2],i=e[3],o=e[4],a=e[5],s=e[6],l=e[7],u=e[8],c=e[9],p=e[10],f=e[11],d=e[12],h=e[13],m=e[14],g=e[15],y=t*a-n*o,v=t*s-r*o,_=t*l-i*o,x=n*s-r*a,b=n*l-i*a,w=r*l-i*s,S=u*h-c*d,E=u*m-p*d,L=u*g-f*d,z=c*m-p*h,A=c*g-f*h,k=p*g-f*m;return y*k-v*A+_*z+x*L-b*E+w*S},c.multiply=function(e,t,n){var r=t[0],i=t[1],o=t[2],a=t[3],s=t[4],l=t[5],u=t[6],c=t[7],p=t[8],f=t[9],d=t[10],h=t[11],m=t[12],g=t[13],y=t[14],v=t[15],_=n[0],x=n[1],b=n[2],w=n[3];return e[0]=_*r+x*s+b*p+w*m,e[1]=_*i+x*l+b*f+w*g,e[2]=_*o+x*u+b*d+w*y,e[3]=_*a+x*c+b*h+w*v,_=n[4],x=n[5],b=n[6],w=n[7],e[4]=_*r+x*s+b*p+w*m,e[5]=_*i+x*l+b*f+w*g,e[6]=_*o+x*u+b*d+w*y,e[7]=_*a+x*c+b*h+w*v,_=n[8],x=n[9],b=n[10],w=n[11],e[8]=_*r+x*s+b*p+w*m,e[9]=_*i+x*l+b*f+w*g,e[10]=_*o+x*u+b*d+w*y,e[11]=_*a+x*c+b*h+w*v,_=n[12],x=n[13],b=n[14],w=n[15],e[12]=_*r+x*s+b*p+w*m,e[13]=_*i+x*l+b*f+w*g,e[14]=_*o+x*u+b*d+w*y,e[15]=_*a+x*c+b*h+w*v,e},c.mul=c.multiply,c.translate=function(e,t,n){var r,i,o,a,s,l,u,c,p,f,d,h,m=n[0],g=n[1],y=n[2];return t===e?(e[12]=t[0]*m+t[4]*g+t[8]*y+t[12],e[13]=t[1]*m+t[5]*g+t[9]*y+t[13],e[14]=t[2]*m+t[6]*g+t[10]*y+t[14],e[15]=t[3]*m+t[7]*g+t[11]*y+t[15]):(r=t[0],i=t[1],o=t[2],a=t[3],s=t[4],l=t[5],u=t[6],c=t[7],p=t[8],f=t[9],d=t[10],h=t[11],e[0]=r,e[1]=i,e[2]=o,e[3]=a,e[4]=s,e[5]=l,e[6]=u,e[7]=c,e[8]=p,e[9]=f,e[10]=d,e[11]=h,e[12]=r*m+s*g+p*y+t[12],e[13]=i*m+l*g+f*y+t[13],e[14]=o*m+u*g+d*y+t[14],e[15]=a*m+c*g+h*y+t[15]),e},c.scale=function(e,t,n){var r=n[0],i=n[1],o=n[2];return e[0]=t[0]*r,e[1]=t[1]*r,e[2]=t[2]*r,e[3]=t[3]*r,e[4]=t[4]*i,e[5]=t[5]*i,e[6]=t[6]*i,e[7]=t[7]*i,e[8]=t[8]*o,e[9]=t[9]*o,e[10]=t[10]*o,e[11]=t[11]*o,e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e},c.rotate=function(e,n,r,i){var o,a,s,l,u,c,p,f,d,h,m,g,y,v,_,x,b,w,S,E,L,z,A,k,I=i[0],T=i[1],P=i[2],C=Math.sqrt(I*I+T*T+P*P);return Math.abs(C)<t?null:(C=1/C,I*=C,T*=C,P*=C,o=Math.sin(r),a=Math.cos(r),s=1-a,l=n[0],u=n[1],c=n[2],p=n[3],f=n[4],d=n[5],h=n[6],m=n[7],g=n[8],y=n[9],v=n[10],_=n[11],x=I*I*s+a,b=T*I*s+P*o,w=P*I*s-T*o,S=I*T*s-P*o,E=T*T*s+a,L=P*T*s+I*o,z=I*P*s+T*o,A=T*P*s-I*o,k=P*P*s+a,e[0]=l*x+f*b+g*w,e[1]=u*x+d*b+y*w,e[2]=c*x+h*b+v*w,e[3]=p*x+m*b+_*w,e[4]=l*S+f*E+g*L,e[5]=u*S+d*E+y*L,e[6]=c*S+h*E+v*L,e[7]=p*S+m*E+_*L,e[8]=l*z+f*A+g*k,e[9]=u*z+d*A+y*k,e[10]=c*z+h*A+v*k,e[11]=p*z+m*A+_*k,n!==e&&(e[12]=n[12],e[13]=n[13],e[14]=n[14],e[15]=n[15]),e)},c.rotateX=function(e,t,n){var r=Math.sin(n),i=Math.cos(n),o=t[4],a=t[5],s=t[6],l=t[7],u=t[8],c=t[9],p=t[10],f=t[11];return t!==e&&(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[4]=o*i+u*r,e[5]=a*i+c*r,e[6]=s*i+p*r,e[7]=l*i+f*r,e[8]=u*i-o*r,e[9]=c*i-a*r,e[10]=p*i-s*r,e[11]=f*i-l*r,e},c.rotateY=function(e,t,n){var r=Math.sin(n),i=Math.cos(n),o=t[0],a=t[1],s=t[2],l=t[3],u=t[8],c=t[9],p=t[10],f=t[11];return t!==e&&(e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[0]=o*i-u*r,e[1]=a*i-c*r,e[2]=s*i-p*r,e[3]=l*i-f*r,e[8]=o*r+u*i,e[9]=a*r+c*i,e[10]=s*r+p*i,e[11]=l*r+f*i,e},c.rotateZ=function(e,t,n){var r=Math.sin(n),i=Math.cos(n),o=t[0],a=t[1],s=t[2],l=t[3],u=t[4],c=t[5],p=t[6],f=t[7];return t!==e&&(e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[0]=o*i+u*r,e[1]=a*i+c*r,e[2]=s*i+p*r,e[3]=l*i+f*r,e[4]=u*i-o*r,e[5]=c*i-a*r,e[6]=p*i-s*r,e[7]=f*i-l*r,e},c.fromRotationTranslation=function(e,t,n){var r=t[0],i=t[1],o=t[2],a=t[3],s=r+r,l=i+i,u=o+o,c=r*s,p=r*l,f=r*u,d=i*l,h=i*u,m=o*u,g=a*s,y=a*l,v=a*u;return e[0]=1-(d+m),e[1]=p+v,e[2]=f-y,e[3]=0,e[4]=p-v,e[5]=1-(c+m),e[6]=h+g,e[7]=0,e[8]=f+y,e[9]=h-g,e[10]=1-(c+d),e[11]=0,e[12]=n[0],e[13]=n[1],e[14]=n[2],e[15]=1,e},c.fromQuat=function(e,t){var n=t[0],r=t[1],i=t[2],o=t[3],a=n+n,s=r+r,l=i+i,u=n*a,c=n*s,p=n*l,f=r*s,d=r*l,h=i*l,m=o*a,g=o*s,y=o*l;return e[0]=1-(f+h),e[1]=c+y,e[2]=p-g,e[3]=0,e[4]=c-y,e[5]=1-(u+h),e[6]=d+m,e[7]=0,e[8]=p+g,e[9]=d-m,e[10]=1-(u+f),e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e},c.frustum=function(e,t,n,r,i,o,a){var s=1/(n-t),l=1/(i-r),u=1/(o-a);return e[0]=2*o*s,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=2*o*l,e[6]=0,e[7]=0,e[8]=(n+t)*s,e[9]=(i+r)*l,e[10]=(a+o)*u,e[11]=-1,e[12]=0,e[13]=0,e[14]=a*o*2*u,e[15]=0,e},c.perspective=function(e,t,n,r,i){var o=1/Math.tan(t/2),a=1/(r-i);return e[0]=o/n,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=o,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=(i+r)*a,e[11]=-1,e[12]=0,e[13]=0,e[14]=2*i*r*a,e[15]=0,e},c.ortho=function(e,t,n,r,i,o,a){var s=1/(t-n),l=1/(r-i),u=1/(o-a);return e[0]=-2*s,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=-2*l,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=2*u,e[11]=0,e[12]=(t+n)*s,e[13]=(i+r)*l,e[14]=(a+o)*u,e[15]=1,e},c.lookAt=function(e,n,r,i){var o,a,s,l,u,p,f,d,h,m,g=n[0],y=n[1],v=n[2],_=i[0],x=i[1],b=i[2],w=r[0],S=r[1],E=r[2];return Math.abs(g-w)<t&&Math.abs(y-S)<t&&Math.abs(v-E)<t?c.identity(e):(f=g-w,d=y-S,h=v-E,m=1/Math.sqrt(f*f+d*d+h*h),f*=m,d*=m,h*=m,o=x*h-b*d,a=b*f-_*h,s=_*d-x*f,m=Math.sqrt(o*o+a*a+s*s),m?(m=1/m,o*=m,a*=m,s*=m):(o=0,a=0,s=0),l=d*s-h*a,u=h*o-f*s,p=f*a-d*o,m=Math.sqrt(l*l+u*u+p*p),m?(m=1/m,l*=m,u*=m,p*=m):(l=0,u=0,p=0),e[0]=o,e[1]=l,e[2]=f,e[3]=0,e[4]=a,e[5]=u,e[6]=d,e[7]=0,e[8]=s,e[9]=p,e[10]=h,e[11]=0,e[12]=-(o*g+a*y+s*v),e[13]=-(l*g+u*y+p*v),e[14]=-(f*g+d*y+h*v),e[15]=1,e)},c.str=function(e){return"mat4("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+", "+e[4]+", "+e[5]+", "+e[6]+", "+e[7]+", "+e[8]+", "+e[9]+", "+e[10]+", "+e[11]+", "+e[12]+", "+e[13]+", "+e[14]+", "+e[15]+")"},"undefined"!=typeof e&&(e.mat4=c);{var p={};new Float32Array([0,0,0,1])}p.create=function(){var e=new n(4);return e[0]=0,e[1]=0,e[2]=0,e[3]=1,e},p.clone=a.clone,p.fromValues=a.fromValues,p.copy=a.copy,p.set=a.set,p.identity=function(e){return e[0]=0,e[1]=0,e[2]=0,e[3]=1,e},p.setAxisAngle=function(e,t,n){n=.5*n;var r=Math.sin(n);return e[0]=r*t[0],e[1]=r*t[1],e[2]=r*t[2],e[3]=Math.cos(n),e},p.add=a.add,p.multiply=function(e,t,n){var r=t[0],i=t[1],o=t[2],a=t[3],s=n[0],l=n[1],u=n[2],c=n[3];return e[0]=r*c+a*s+i*u-o*l,e[1]=i*c+a*l+o*s-r*u,e[2]=o*c+a*u+r*l-i*s,e[3]=a*c-r*s-i*l-o*u,e},p.mul=p.multiply,p.scale=a.scale,p.rotateX=function(e,t,n){n*=.5;var r=t[0],i=t[1],o=t[2],a=t[3],s=Math.sin(n),l=Math.cos(n);return e[0]=r*l+a*s,e[1]=i*l+o*s,e[2]=o*l-i*s,e[3]=a*l-r*s,e},p.rotateY=function(e,t,n){n*=.5;var r=t[0],i=t[1],o=t[2],a=t[3],s=Math.sin(n),l=Math.cos(n);return e[0]=r*l-o*s,e[1]=i*l+a*s,e[2]=o*l+r*s,e[3]=a*l-i*s,e},p.rotateZ=function(e,t,n){n*=.5;var r=t[0],i=t[1],o=t[2],a=t[3],s=Math.sin(n),l=Math.cos(n);return e[0]=r*l+i*s,e[1]=i*l-r*s,e[2]=o*l+a*s,e[3]=a*l-o*s,e},p.calculateW=function(e,t){var n=t[0],r=t[1],i=t[2];return e[0]=n,e[1]=r,e[2]=i,e[3]=-Math.sqrt(Math.abs(1-n*n-r*r-i*i)),e},p.dot=a.dot,p.lerp=a.lerp,p.slerp=function(e,t,n,r){var i,o,a,s,l=t[0],u=t[1],c=t[2],p=t[3],f=n[0],d=n[1],h=n[2],m=n[3],g=l*f+u*d+c*h+p*m;return Math.abs(g)>=1?(e!==t&&(e[0]=l,e[1]=u,e[2]=c,e[3]=p),e):(i=Math.acos(g),o=Math.sqrt(1-g*g),Math.abs(o)<.001?(e[0]=.5*l+.5*f,e[1]=.5*u+.5*d,e[2]=.5*c+.5*h,e[3]=.5*p+.5*m,e):(a=Math.sin((1-r)*i)/o,s=Math.sin(r*i)/o,e[0]=l*a+f*s,e[1]=u*a+d*s,e[2]=c*a+h*s,e[3]=p*a+m*s,e))},p.invert=function(e,t){var n=t[0],r=t[1],i=t[2],o=t[3],a=n*n+r*r+i*i+o*o,s=a?1/a:0;return e[0]=-n*s,e[1]=-r*s,e[2]=-i*s,e[3]=o*s,e},p.conjugate=function(e,t){return e[0]=-t[0],e[1]=-t[1],e[2]=-t[2],e[3]=t[3],e},p.length=a.length,p.len=p.length,p.squaredLength=a.squaredLength,p.sqrLen=p.squaredLength,p.normalize=a.normalize,p.fromMat3=function(){var e=[1,2,0];return function(t,n){var r,i=n[0]+n[4]+n[8];if(i>0)r=Math.sqrt(i+1),t[3]=.5*r,r=.5/r,t[0]=(n[7]-n[5])*r,t[1]=(n[2]-n[6])*r,t[2]=(n[3]-n[1])*r;else{var o=0;n[4]>n[0]&&(o=1),n[8]>n[3*o+o]&&(o=2);var a=e[o],s=e[a];r=Math.sqrt(n[3*o+o]-n[3*a+a]-n[3*s+s]+1),t[o]=.5*r,r=.5/r,t[3]=(n[3*s+a]-n[3*a+s])*r,t[a]=(n[3*a+o]+n[3*o+a])*r,t[s]=(n[3*s+o]+n[3*o+s])*r}return t}}(),p.str=function(e){return"quat("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+")"},"undefined"!=typeof e&&(e.quat=p)}(e.exports)}()},{}],3:[function(e,t){"use strict";var n=e("./lib/js-yaml.js");t.exports=n},{"./lib/js-yaml.js":4}],4:[function(e,t){"use strict";function n(e){return function(){throw new Error("Function "+e+" is deprecated and cannot be used.")}}var r=e("./js-yaml/loader"),i=e("./js-yaml/dumper");t.exports.Type=e("./js-yaml/type"),t.exports.Schema=e("./js-yaml/schema"),t.exports.FAILSAFE_SCHEMA=e("./js-yaml/schema/failsafe"),t.exports.JSON_SCHEMA=e("./js-yaml/schema/json"),t.exports.CORE_SCHEMA=e("./js-yaml/schema/core"),t.exports.DEFAULT_SAFE_SCHEMA=e("./js-yaml/schema/default_safe"),t.exports.DEFAULT_FULL_SCHEMA=e("./js-yaml/schema/default_full"),t.exports.load=r.load,t.exports.loadAll=r.loadAll,t.exports.safeLoad=r.safeLoad,t.exports.safeLoadAll=r.safeLoadAll,t.exports.dump=i.dump,t.exports.safeDump=i.safeDump,t.exports.YAMLException=e("./js-yaml/exception"),t.exports.MINIMAL_SCHEMA=e("./js-yaml/schema/failsafe"),t.exports.SAFE_SCHEMA=e("./js-yaml/schema/default_safe"),t.exports.DEFAULT_SCHEMA=e("./js-yaml/schema/default_full"),t.exports.scan=n("scan"),t.exports.parse=n("parse"),t.exports.compose=n("compose"),t.exports.addConstructor=n("addConstructor")},{"./js-yaml/dumper":6,"./js-yaml/exception":7,"./js-yaml/loader":8,"./js-yaml/schema":10,"./js-yaml/schema/core":11,"./js-yaml/schema/default_full":12,"./js-yaml/schema/default_safe":13,"./js-yaml/schema/failsafe":14,"./js-yaml/schema/json":15,"./js-yaml/type":16}],5:[function(e,t){"use strict";function n(e){return void 0===e||null===e}function r(e){return"object"==typeof e&&null!==e}function i(e){return Array.isArray(e)?e:n(e)?[]:[e]}function o(e,t){var n,r,i,o;if(t)for(o=Object.keys(t),n=0,r=o.length;r>n;n+=1)i=o[n],e[i]=t[i];return e}function a(e,t){var n,r="";for(n=0;t>n;n+=1)r+=e;return r}function s(e){return 0===e&&Number.NEGATIVE_INFINITY===1/e}t.exports.isNothing=n,t.exports.isObject=r,t.exports.toArray=i,t.exports.repeat=a,t.exports.isNegativeZero=s,t.exports.extend=o},{}],6:[function(e,t){"use strict";function n(e,t){var n,r,i,o,a,s,l;if(null===t)return{};for(n={},r=Object.keys(t),i=0,o=r.length;o>i;i+=1)a=r[i],s=String(t[a]),"!!"===a.slice(0,2)&&(a="tag:yaml.org,2002:"+a.slice(2)),l=e.compiledTypeMap[a],l&&b.call(l.styleAliases,s)&&(s=l.styleAliases[s]),n[a]=s;return n}function r(e){var t,n,r;if(t=e.toString(16).toUpperCase(),255>=e)n="x",r=2;else if(65535>=e)n="u",r=4;else{if(!(4294967295>=e))throw new y("code point within a string may not be greater than 0xFFFFFFFF");n="U",r=8}return"\\"+n+g.repeat("0",r-t.length)+t}function i(e){this.schema=e.schema||v,this.indent=Math.max(1,e.indent||2),this.skipInvalid=e.skipInvalid||!1,this.flowLevel=g.isNothing(e.flowLevel)?-1:e.flowLevel,this.styleMap=n(this.schema,e.styles||null),this.implicitTypes=this.schema.compiledImplicit,this.explicitTypes=this.schema.compiledExplicit,this.tag=null,this.result=""}function o(e,t){return"\n"+g.repeat(" ",e.indent*t)}function a(e,t){var n,r,i;for(n=0,r=e.implicitTypes.length;r>n;n+=1)if(i=e.implicitTypes[n],i.resolve(t))return!0;return!1}function s(e,t){var n,i,o,s,l,u;for(e.dump="",n=!1,i=0,u=t.charCodeAt(0)||0,-1!==W.indexOf(t)?n=!0:0===t.length?n=!0:L===u||L===t.charCodeAt(t.length-1)?n=!0:(j===u||R===u)&&(n=!0),o=0,s=t.length;s>o;o+=1)l=t.charCodeAt(o),n||(w===l||S===l||E===l||M===l||V===l||G===l||U===l||B===l||k===l||T===l||C===l||z===l||q===l||F===l||P===l||A===l||I===l||N===l||O===l||D===l)&&(n=!0),(H[l]||!(l>=32&&126>=l||133===l||l>=160&&55295>=l||l>=57344&&65533>=l||l>=65536&&1114111>=l))&&(e.dump+=t.slice(i,o),e.dump+=H[l]||r(l),i=o+1,n=!0);o>i&&(e.dump+=t.slice(i,o)),!n&&a(e,e.dump)&&(n=!0),n&&(e.dump='"'+e.dump+'"')}function l(e,t,n){var r,i,o="",a=e.tag;for(r=0,i=n.length;i>r;r+=1)d(e,t,n[r],!1,!1)&&(0!==r&&(o+=", "),o+=e.dump);e.tag=a,e.dump="["+o+"]"}function u(e,t,n,r){var i,a,s="",l=e.tag;for(i=0,a=n.length;a>i;i+=1)d(e,t+1,n[i],!0,!0)&&(r&&0===i||(s+=o(e,t)),s+="- "+e.dump);e.tag=l,e.dump=s||"[]"}function c(e,t,n){var r,i,o,a,s,l="",u=e.tag,c=Object.keys(n);for(r=0,i=c.length;i>r;r+=1)s="",0!==r&&(s+=", "),o=c[r],a=n[o],d(e,t,o,!1,!1)&&(e.dump.length>1024&&(s+="? "),s+=e.dump+": ",d(e,t,a,!1,!1)&&(s+=e.dump,l+=s));e.tag=u,e.dump="{"+l+"}"}function p(e,t,n,r){var i,a,s,l,u,c,p="",f=e.tag,h=Object.keys(n);for(i=0,a=h.length;a>i;i+=1)c="",r&&0===i||(c+=o(e,t)),s=h[i],l=n[s],d(e,t+1,s,!0,!0)&&(u=null!==e.tag&&"?"!==e.tag||e.dump&&e.dump.length>1024,u&&(c+=e.dump&&S===e.dump.charCodeAt(0)?"?":"? "),c+=e.dump,u&&(c+=o(e,t)),d(e,t+1,l,!0,u)&&(c+=e.dump&&S===e.dump.charCodeAt(0)?":":": ",c+=e.dump,p+=c));e.tag=f,e.dump=p||"{}"}function f(e,t,n){var r,i,o,a,s,l;for(i=n?e.explicitTypes:e.implicitTypes,o=0,a=i.length;a>o;o+=1)if(s=i[o],(s.instanceOf||s.predicate)&&(!s.instanceOf||"object"==typeof t&&t instanceof s.instanceOf)&&(!s.predicate||s.predicate(t))){if(e.tag=n?s.tag:"?",s.represent){if(l=e.styleMap[s.tag]||s.defaultStyle,"[object Function]"===x.call(s.represent))r=s.represent(t,l);else{if(!b.call(s.represent,l))throw new y("!<"+s.tag+'> tag resolver accepts not "'+l+'" style');r=s.represent[l](t,l)}e.dump=r}return!0}return!1}function d(e,t,n,r,i){e.tag=null,e.dump=n,f(e,n,!1)||f(e,n,!0);var o=x.call(e.dump);if(r&&(r=0>e.flowLevel||e.flowLevel>t),(null!==e.tag&&"?"!==e.tag||2!==e.indent&&t>0)&&(i=!1),"[object Object]"===o)r&&0!==Object.keys(e.dump).length?p(e,t,e.dump,i):c(e,t,e.dump);else if("[object Array]"===o)r&&0!==e.dump.length?u(e,t,e.dump,i):l(e,t,e.dump);else{if("[object String]"!==o){if(e.skipInvalid)return!1;throw new y("unacceptabe kind of an object to dump "+o)}"?"!==e.tag&&s(e,e.dump)}return null!==e.tag&&"?"!==e.tag&&(e.dump="!<"+e.tag+"> "+e.dump),!0}function h(e,t){t=t||{};var n=new i(t);return d(n,0,e,!0,!0)?n.dump+"\n":""}function m(e,t){return h(e,g.extend({schema:_},t))}var g=e("./common"),y=e("./exception"),v=e("./schema/default_full"),_=e("./schema/default_safe"),x=Object.prototype.toString,b=Object.prototype.hasOwnProperty,w=9,S=10,E=13,L=32,z=33,A=34,k=35,I=37,T=38,P=39,C=42,M=44,j=45,O=58,F=62,R=63,N=64,V=91,G=93,D=96,U=123,q=124,B=125,H={};H[0]="\\0",H[7]="\\a",H[8]="\\b",H[9]="\\t",H[10]="\\n",H[11]="\\v",H[12]="\\f",H[13]="\\r",H[27]="\\e",H[34]='\\"',H[92]="\\\\",H[133]="\\N",H[160]="\\_",H[8232]="\\L",H[8233]="\\P";var W=["y","Y","yes","Yes","YES","on","On","ON","n","N","no","No","NO","off","Off","OFF"];t.exports.dump=h,t.exports.safeDump=m},{"./common":5,"./exception":7,"./schema/default_full":12,"./schema/default_safe":13}],7:[function(e,t){"use strict";function n(e,t){this.name="YAMLException",this.reason=e,this.mark=t,this.message=this.toString(!1)}n.prototype.toString=function(e){var t;return t="JS-YAML: "+(this.reason||"(unknown reason)"),!e&&this.mark&&(t+=" "+this.mark.toString()),t},t.exports=n},{}],8:[function(e,t){"use strict";function n(e){return 10===e||13===e}function r(e){return 9===e||32===e}function i(e){return 9===e||32===e||10===e||13===e}function o(e){return 44===e||91===e||93===e||123===e||125===e}function a(e){var t;return e>=48&&57>=e?e-48:(t=32|e,t>=97&&102>=t?t-97+10:-1)}function s(e){return 120===e?2:117===e?4:85===e?8:0
}function l(e){return e>=48&&57>=e?e-48:-1}function u(e){return 48===e?"\x00":97===e?"":98===e?"\b":116===e?"	":9===e?"	":110===e?"\n":118===e?"":102===e?"\f":114===e?"\r":101===e?"":32===e?" ":34===e?'"':47===e?"/":92===e?"\\":78===e?"":95===e?" ":76===e?"\u2028":80===e?"\u2029":""}function c(e,t){this.input=e,this.filename=t.filename||null,this.schema=t.schema||U,this.onWarning=t.onWarning||null,this.legacy=t.legacy||!1,this.implicitTypes=this.schema.compiledImplicit,this.typeMap=this.schema.compiledTypeMap,this.length=e.length,this.position=0,this.line=0,this.lineStart=0,this.lineIndent=0,this.documents=[]}function p(e,t){return new V(t,new G(e.filename,e.input,e.position,e.line,e.position-e.lineStart))}function f(e,t){throw p(e,t)}function d(e,t){var n=p(e,t);if(!e.onWarning)throw n;e.onWarning.call(null,n)}function h(e,t,n,r){var i,o,a,s;if(n>t){if(s=e.input.slice(t,n),r)for(i=0,o=s.length;o>i;i+=1)a=s.charCodeAt(i),9===a||a>=32&&1114111>=a||f(e,"expected valid JSON character");e.result+=s}}function m(e,t,n){var r,i,o,a;for(N.isObject(n)||f(e,"cannot merge mappings; the provided source object is unacceptable"),r=Object.keys(n),o=0,a=r.length;a>o;o+=1)i=r[o],q.call(t,i)||(t[i]=n[i])}function g(e,t,n,r,i){var o,a;if(r=String(r),null===t&&(t={}),"tag:yaml.org,2002:merge"===n)if(Array.isArray(i))for(o=0,a=i.length;a>o;o+=1)m(e,t,i[o]);else m(e,t,i);else t[r]=i;return t}function y(e){var t;t=e.input.charCodeAt(e.position),10===t?e.position++:13===t?(e.position++,10===e.input.charCodeAt(e.position)&&e.position++):f(e,"a line break is expected"),e.line+=1,e.lineStart=e.position}function v(e,t,i){for(var o=0,a=e.input.charCodeAt(e.position);0!==a;){for(;r(a);)a=e.input.charCodeAt(++e.position);if(t&&35===a)do a=e.input.charCodeAt(++e.position);while(10!==a&&13!==a&&0!==a);if(!n(a))break;for(y(e),a=e.input.charCodeAt(e.position),o++,e.lineIndent=0;32===a;)e.lineIndent++,a=e.input.charCodeAt(++e.position);e.lineIndent<i&&d(e,"deficient indentation")}return o}function _(e){var t,n=e.position;return t=e.input.charCodeAt(n),45!==t&&46!==t||e.input.charCodeAt(n+1)!==t||e.input.charCodeAt(n+2)!==t||(n+=3,t=e.input.charCodeAt(n),0!==t&&!i(t))?!1:!0}function x(e,t){1===t?e.result+=" ":t>1&&(e.result+=N.repeat("\n",t-1))}function b(e,t,a){var s,l,u,c,p,f,d,m,g,y=e.kind,b=e.result;if(g=e.input.charCodeAt(e.position),i(g)||o(g)||35===g||38===g||42===g||33===g||124===g||62===g||39===g||34===g||37===g||64===g||96===g)return!1;if((63===g||45===g)&&(l=e.input.charCodeAt(e.position+1),i(l)||a&&o(l)))return!1;for(e.kind="scalar",e.result="",u=c=e.position,p=!1;0!==g;){if(58===g){if(l=e.input.charCodeAt(e.position+1),i(l)||a&&o(l))break}else if(35===g){if(s=e.input.charCodeAt(e.position-1),i(s))break}else{if(e.position===e.lineStart&&_(e)||a&&o(g))break;if(n(g)){if(f=e.line,d=e.lineStart,m=e.lineIndent,v(e,!1,-1),e.lineIndent>=t){p=!0,g=e.input.charCodeAt(e.position);continue}e.position=c,e.line=f,e.lineStart=d,e.lineIndent=m;break}}p&&(h(e,u,c,!1),x(e,e.line-f),u=c=e.position,p=!1),r(g)||(c=e.position+1),g=e.input.charCodeAt(++e.position)}return h(e,u,c,!1),e.result?!0:(e.kind=y,e.result=b,!1)}function w(e,t){var r,i,o;if(r=e.input.charCodeAt(e.position),39!==r)return!1;for(e.kind="scalar",e.result="",e.position++,i=o=e.position;0!==(r=e.input.charCodeAt(e.position));)if(39===r){if(h(e,i,e.position,!0),r=e.input.charCodeAt(++e.position),39!==r)return!0;i=o=e.position,e.position++}else n(r)?(h(e,i,o,!0),x(e,v(e,!1,t)),i=o=e.position):e.position===e.lineStart&&_(e)?f(e,"unexpected end of the document within a single quoted scalar"):(e.position++,o=e.position);f(e,"unexpected end of the stream within a single quoted scalar")}function S(e,t){var r,i,o,l,u,c;if(c=e.input.charCodeAt(e.position),34!==c)return!1;for(e.kind="scalar",e.result="",e.position++,r=i=e.position;0!==(c=e.input.charCodeAt(e.position));){if(34===c)return h(e,r,e.position,!0),e.position++,!0;if(92===c){if(h(e,r,e.position,!0),c=e.input.charCodeAt(++e.position),n(c))v(e,!1,t);else if(256>c&&nt[c])e.result+=rt[c],e.position++;else if((u=s(c))>0){for(o=u,l=0;o>0;o--)c=e.input.charCodeAt(++e.position),(u=a(c))>=0?l=(l<<4)+u:f(e,"expected hexadecimal character");e.result+=String.fromCharCode(l),e.position++}else f(e,"unknown escape sequence");r=i=e.position}else n(c)?(h(e,r,i,!0),x(e,v(e,!1,t)),r=i=e.position):e.position===e.lineStart&&_(e)?f(e,"unexpected end of the document within a double quoted scalar"):(e.position++,i=e.position)}f(e,"unexpected end of the stream within a double quoted scalar")}function E(e,t){var n,r,o,a,s,l,u,c,p,d,h,m=!0,y=e.tag;if(h=e.input.charCodeAt(e.position),91===h)a=93,u=!1,r=[];else{if(123!==h)return!1;a=125,u=!0,r={}}for(null!==e.anchor&&(e.anchorMap[e.anchor]=r),h=e.input.charCodeAt(++e.position);0!==h;){if(v(e,!0,t),h=e.input.charCodeAt(e.position),h===a)return e.position++,e.tag=y,e.kind=u?"mapping":"sequence",e.result=r,!0;m||f(e,"missed comma between flow collection entries"),p=c=d=null,s=l=!1,63===h&&(o=e.input.charCodeAt(e.position+1),i(o)&&(s=l=!0,e.position++,v(e,!0,t))),n=e.line,P(e,t,B,!1,!0),p=e.tag,c=e.result,v(e,!0,t),h=e.input.charCodeAt(e.position),!l&&e.line!==n||58!==h||(s=!0,h=e.input.charCodeAt(++e.position),v(e,!0,t),P(e,t,B,!1,!0),d=e.result),u?g(e,r,p,c,d):r.push(s?g(e,null,p,c,d):c),v(e,!0,t),h=e.input.charCodeAt(e.position),44===h?(m=!0,h=e.input.charCodeAt(++e.position)):m=!1}f(e,"unexpected end of the stream within a flow collection")}function L(e,t){var i,o,a,s,u=Y,c=!1,p=t,d=0,m=!1;if(s=e.input.charCodeAt(e.position),124===s)o=!1;else{if(62!==s)return!1;o=!0}for(e.kind="scalar",e.result="";0!==s;)if(s=e.input.charCodeAt(++e.position),43===s||45===s)Y===u?u=43===s?K:X:f(e,"repeat of a chomping mode identifier");else{if(!((a=l(s))>=0))break;0===a?f(e,"bad explicit indentation width of a block scalar; it cannot be less than one"):c?f(e,"repeat of an indentation width identifier"):(p=t+a-1,c=!0)}if(r(s)){do s=e.input.charCodeAt(++e.position);while(r(s));if(35===s)do s=e.input.charCodeAt(++e.position);while(!n(s)&&0!==s)}for(;0!==s;){for(y(e),e.lineIndent=0,s=e.input.charCodeAt(e.position);(!c||e.lineIndent<p)&&32===s;)e.lineIndent++,s=e.input.charCodeAt(++e.position);if(!c&&e.lineIndent>p&&(p=e.lineIndent),n(s))d++;else{if(e.lineIndent<p){u===K?e.result+=N.repeat("\n",d):u===Y&&c&&(e.result+="\n");break}o?r(s)?(m=!0,e.result+=N.repeat("\n",d+1)):m?(m=!1,e.result+=N.repeat("\n",d+1)):0===d?c&&(e.result+=" "):e.result+=N.repeat("\n",d):e.result+=c?N.repeat("\n",d+1):N.repeat("\n",d),c=!0,d=0,i=e.position;do s=e.input.charCodeAt(++e.position);while(!n(s)&&0!==s);h(e,i,e.position,!1),s=e.input.charCodeAt(e.position)}}return!0}function z(e,t){var n,r,o,a=e.tag,s=[],l=!1;for(null!==e.anchor&&(e.anchorMap[e.anchor]=s),o=e.input.charCodeAt(e.position);0!==o&&45===o&&(r=e.input.charCodeAt(e.position+1),i(r));)if(l=!0,e.position++,v(e,!0,-1)&&e.lineIndent<=t)s.push(null),o=e.input.charCodeAt(e.position);else if(n=e.line,P(e,t,W,!1,!0),s.push(e.result),v(e,!0,-1),o=e.input.charCodeAt(e.position),(e.line===n||e.lineIndent>t)&&0!==o)f(e,"bad indentation of a sequence entry");else if(e.lineIndent<t)break;return l?(e.tag=a,e.kind="sequence",e.result=s,!0):!1}function A(e,t,n){var o,a,s,l,u=e.tag,c={},p=null,d=null,h=null,m=!1,y=!1;for(null!==e.anchor&&(e.anchorMap[e.anchor]=c),l=e.input.charCodeAt(e.position);0!==l;){if(o=e.input.charCodeAt(e.position+1),s=e.line,63!==l&&58!==l||!i(o)){if(!P(e,n,H,!1,!0))break;if(e.line===s){for(l=e.input.charCodeAt(e.position);r(l);)l=e.input.charCodeAt(++e.position);if(58===l)l=e.input.charCodeAt(++e.position),i(l)||f(e,"a whitespace character is expected after the key-value separator within a block mapping"),m&&(g(e,c,p,d,null),p=d=h=null),y=!0,m=!1,a=!1,p=e.tag,d=e.result;else{if(!y)return e.tag=u,!0;f(e,"can not read an implicit mapping pair; a colon is missed")}}else{if(!y)return e.tag=u,!0;f(e,"can not read a block mapping entry; a multiline key may not be an implicit key")}}else 63===l?(m&&(g(e,c,p,d,null),p=d=h=null),y=!0,m=!0,a=!0):m?(m=!1,a=!0):f(e,"incomplete explicit mapping pair; a key node is missed"),e.position+=1,l=o;if((e.line===s||e.lineIndent>t)&&(P(e,t,Z,!0,a)&&(m?d=e.result:h=e.result),m||(g(e,c,p,d,h),p=d=h=null),v(e,!0,-1),l=e.input.charCodeAt(e.position)),e.lineIndent>t&&0!==l)f(e,"bad indentation of a mapping entry");else if(e.lineIndent<t)break}return m&&g(e,c,p,d,null),y&&(e.tag=u,e.kind="mapping",e.result=c),y}function k(e){var t,n,r,o,a=!1,s=!1;if(o=e.input.charCodeAt(e.position),33!==o)return!1;if(null!==e.tag&&f(e,"duplication of a tag property"),o=e.input.charCodeAt(++e.position),60===o?(a=!0,o=e.input.charCodeAt(++e.position)):33===o?(s=!0,n="!!",o=e.input.charCodeAt(++e.position)):n="!",t=e.position,a){do o=e.input.charCodeAt(++e.position);while(0!==o&&62!==o);e.position<e.length?(r=e.input.slice(t,e.position),o=e.input.charCodeAt(++e.position)):f(e,"unexpected end of the stream within a verbatim tag")}else{for(;0!==o&&!i(o);)33===o&&(s?f(e,"tag suffix cannot contain exclamation marks"):(n=e.input.slice(t-1,e.position+1),et.test(n)||f(e,"named tag handle cannot contain such characters"),s=!0,t=e.position+1)),o=e.input.charCodeAt(++e.position);r=e.input.slice(t,e.position),Q.test(r)&&f(e,"tag suffix cannot contain flow indicator characters")}return r&&!tt.test(r)&&f(e,"tag name cannot contain such characters: "+r),a?e.tag=r:q.call(e.tagMap,n)?e.tag=e.tagMap[n]+r:"!"===n?e.tag="!"+r:"!!"===n?e.tag="tag:yaml.org,2002:"+r:f(e,'undeclared tag handle "'+n+'"'),!0}function I(e){var t,n;if(n=e.input.charCodeAt(e.position),38!==n)return!1;for(null!==e.anchor&&f(e,"duplication of an anchor property"),n=e.input.charCodeAt(++e.position),t=e.position;0!==n&&!i(n)&&!o(n);)n=e.input.charCodeAt(++e.position);return e.position===t&&f(e,"name of an anchor node must contain at least one character"),e.anchor=e.input.slice(t,e.position),!0}function T(e){{var t,n,r;e.length,e.input}if(r=e.input.charCodeAt(e.position),42!==r)return!1;for(r=e.input.charCodeAt(++e.position),t=e.position;0!==r&&!i(r)&&!o(r);)r=e.input.charCodeAt(++e.position);return e.position===t&&f(e,"name of an alias node must contain at least one character"),n=e.input.slice(t,e.position),e.anchorMap.hasOwnProperty(n)||f(e,'unidentified alias "'+n+'"'),e.result=e.anchorMap[n],v(e,!0,-1),!0}function P(e,t,n,r,i){var o,a,s,l,u,c,p,h,m=!1,g=!0,y=!1;if(e.tag=null,e.anchor=null,e.kind=null,e.result=null,o=a=s=Z===n||W===n,r&&v(e,!0,-1))if(m=!0,e.lineIndent===t)g=!1;else{if(!(e.lineIndent>t))return!1;g=!0}if(g)for(;k(e)||I(e);)if(v(e,!0,-1))if(m=!0,e.lineIndent>t)g=!0,s=o;else{if(e.lineIndent!==t)return!0;g=!1,s=o}else s=!1;if(s&&(s=m||i),(g||Z===n)&&(p=B===n||H===n?t:t+1,h=e.position-e.lineStart,g?s&&(z(e,h)||A(e,h,p))||E(e,p)?y=!0:(a&&L(e,p)||w(e,p)||S(e,p)?y=!0:T(e)?(y=!0,(null!==e.tag||null!==e.anchor)&&f(e,"alias node should not have any properties")):b(e,p,B===n)&&(y=!0,null===e.tag&&(e.tag="?")),null!==e.anchor&&(e.anchorMap[e.anchor]=e.result)):y=s&&z(e,h)),null!==e.tag&&"!"!==e.tag)if("?"===e.tag){for(l=0,u=e.implicitTypes.length;u>l;l+=1)if(c=e.implicitTypes[l],c.resolve(e.result)){e.result=c.construct(e.result),e.tag=c.tag;break}}else q.call(e.typeMap,e.tag)?(c=e.typeMap[e.tag],null!==e.result&&c.kind!==e.kind&&f(e,"unacceptable node kind for !<"+e.tag+'> tag; it should be "'+c.kind+'", not "'+e.kind+'"'),c.resolve(e.result)?e.result=c.construct(e.result):f(e,"cannot resolve a node with !<"+e.tag+"> explicit tag")):d(e,"unknown tag !<"+e.tag+">");return null!==e.tag||null!==e.anchor||y}function C(e){var t,o,a,s,l=e.position,u=!1;for(e.version=null,e.checkLineBreaks=e.legacy,e.tagMap={},e.anchorMap={};0!==(s=e.input.charCodeAt(e.position))&&(v(e,!0,-1),s=e.input.charCodeAt(e.position),!(e.lineIndent>0||37!==s));){for(u=!0,s=e.input.charCodeAt(++e.position),t=e.position;0!==s&&!i(s);)s=e.input.charCodeAt(++e.position);for(o=e.input.slice(t,e.position),a=[],o.length<1&&f(e,"directive name must not be less than one character in length");0!==s;){for(;r(s);)s=e.input.charCodeAt(++e.position);if(35===s){do s=e.input.charCodeAt(++e.position);while(0!==s&&!n(s));break}if(n(s))break;for(t=e.position;0!==s&&!i(s);)s=e.input.charCodeAt(++e.position);a.push(e.input.slice(t,e.position))}0!==s&&y(e),q.call(ot,o)?ot[o](e,o,a):d(e,'unknown document directive "'+o+'"')}return v(e,!0,-1),0===e.lineIndent&&45===e.input.charCodeAt(e.position)&&45===e.input.charCodeAt(e.position+1)&&45===e.input.charCodeAt(e.position+2)?(e.position+=3,v(e,!0,-1)):u&&f(e,"directives end mark is expected"),P(e,e.lineIndent-1,Z,!1,!0),v(e,!0,-1),e.checkLineBreaks&&$.test(e.input.slice(l,e.position))&&d(e,"non-ASCII line breaks are interpreted as content"),e.documents.push(e.result),e.position===e.lineStart&&_(e)?void(46===e.input.charCodeAt(e.position)&&(e.position+=3,v(e,!0,-1))):void(e.position<e.length-1&&f(e,"end of the stream or a document separator is expected"))}function M(e,t){e=String(e),t=t||{},0!==e.length&&10!==e.charCodeAt(e.length-1)&&13!==e.charCodeAt(e.length-1)&&(e+="\n");var n=new c(e,t);for(J.test(n.input)&&f(n,"the stream contains non-printable characters"),n.input+="\x00";32===n.input.charCodeAt(n.position);)n.lineIndent+=1;for(;n.position<n.length-1;)C(n);return n.documents}function j(e,t,n){var r,i,o=M(e,n);for(r=0,i=o.length;i>r;r+=1)t(o[r])}function O(e,t){var n=M(e,t);if(0===n.length)return void 0;if(1===n.length)return n[0];throw new V("expected a single document in the stream, but found more")}function F(e,t,n){j(e,t,N.extend({schema:D},n))}function R(e,t){return O(e,N.extend({schema:D},t))}for(var N=e("./common"),V=e("./exception"),G=e("./mark"),D=e("./schema/default_safe"),U=e("./schema/default_full"),q=Object.prototype.hasOwnProperty,B=1,H=2,W=3,Z=4,Y=1,X=2,K=3,J=/[\x00-\x08\x0B\x0C\x0E-\x1F\x7F-\x84\x86-\x9F\uD800-\uDFFF\uFFFE\uFFFF]/,$=/[\x85\u2028\u2029]/,Q=/[,\[\]\{\}]/,et=/^(?:!|!!|![a-z\-]+!)$/i,tt=/^(?:!|[^,\[\]\{\}])(?:%[0-9a-f]{2}|[0-9a-z\-#;\/\?:@&=\+\$,_\.!~\*'\(\)\[\]])*$/i,nt=new Array(256),rt=new Array(256),it=0;256>it;it++)nt[it]=u(it)?1:0,rt[it]=u(it);var ot={YAML:function(e,t,n){var r,i,o;null!==e.version&&f(e,"duplication of %YAML directive"),1!==n.length&&f(e,"YAML directive accepts exactly one argument"),r=/^([0-9]+)\.([0-9]+)$/.exec(n[0]),null===r&&f(e,"ill-formed argument of the YAML directive"),i=parseInt(r[1],10),o=parseInt(r[2],10),1!==i&&f(e,"unacceptable YAML version of the document"),e.version=n[0],e.checkLineBreaks=2>o,1!==o&&2!==o&&d(e,"unsupported YAML version of the document")},TAG:function(e,t,n){var r,i;2!==n.length&&f(e,"TAG directive accepts exactly two arguments"),r=n[0],i=n[1],et.test(r)||f(e,"ill-formed tag handle (first argument) of the TAG directive"),q.call(e.tagMap,r)&&f(e,'there is a previously declared suffix for "'+r+'" tag handle'),tt.test(i)||f(e,"ill-formed tag prefix (second argument) of the TAG directive"),e.tagMap[r]=i}};t.exports.loadAll=j,t.exports.load=O,t.exports.safeLoadAll=F,t.exports.safeLoad=R},{"./common":5,"./exception":7,"./mark":9,"./schema/default_full":12,"./schema/default_safe":13}],9:[function(e,t){"use strict";function n(e,t,n,r,i){this.name=e,this.buffer=t,this.position=n,this.line=r,this.column=i}var r=e("./common");n.prototype.getSnippet=function(e,t){var n,i,o,a,s;if(!this.buffer)return null;for(e=e||4,t=t||75,n="",i=this.position;i>0&&-1==="\x00\r\n\u2028\u2029".indexOf(this.buffer.charAt(i-1));)if(i-=1,this.position-i>t/2-1){n=" ... ",i+=5;break}for(o="",a=this.position;a<this.buffer.length&&-1==="\x00\r\n\u2028\u2029".indexOf(this.buffer.charAt(a));)if(a+=1,a-this.position>t/2-1){o=" ... ",a-=5;break}return s=this.buffer.slice(i,a),r.repeat(" ",e)+n+s+o+"\n"+r.repeat(" ",e+this.position-i+n.length)+"^"},n.prototype.toString=function(e){var t,n="";return this.name&&(n+='in "'+this.name+'" '),n+="at line "+(this.line+1)+", column "+(this.column+1),e||(t=this.getSnippet(),t&&(n+=":\n"+t)),n},t.exports=n},{"./common":5}],10:[function(e,t){"use strict";function n(e,t,r){var i=[];return e.include.forEach(function(e){r=n(e,t,r)}),e[t].forEach(function(e){r.forEach(function(t,n){t.tag===e.tag&&i.push(n)}),r.push(e)}),r.filter(function(e,t){return-1===i.indexOf(t)})}function r(){function e(e){r[e.tag]=e}var t,n,r={};for(t=0,n=arguments.length;n>t;t+=1)arguments[t].forEach(e);return r}function i(e){this.include=e.include||[],this.implicit=e.implicit||[],this.explicit=e.explicit||[],this.implicit.forEach(function(e){if(e.loadKind&&"scalar"!==e.loadKind)throw new a("There is a non-scalar type in the implicit list of a schema. Implicit resolving of such types is not supported.")}),this.compiledImplicit=n(this,"implicit",[]),this.compiledExplicit=n(this,"explicit",[]),this.compiledTypeMap=r(this.compiledImplicit,this.compiledExplicit)}var o=e("./common"),a=e("./exception"),s=e("./type");i.DEFAULT=null,i.create=function(){var e,t;switch(arguments.length){case 1:e=i.DEFAULT,t=arguments[0];break;case 2:e=arguments[0],t=arguments[1];break;default:throw new a("Wrong number of arguments for Schema.create function")}if(e=o.toArray(e),t=o.toArray(t),!e.every(function(e){return e instanceof i}))throw new a("Specified list of super schemas (or a single Schema object) contains a non-Schema object.");if(!t.every(function(e){return e instanceof s}))throw new a("Specified list of YAML types (or a single Type object) contains a non-Type object.");return new i({include:e,explicit:t})},t.exports=i},{"./common":5,"./exception":7,"./type":16}],11:[function(e,t){"use strict";var n=e("../schema");t.exports=new n({include:[e("./json")]})},{"../schema":10,"./json":15}],12:[function(e,t){"use strict";var n=e("../schema");t.exports=n.DEFAULT=new n({include:[e("./default_safe")],explicit:[e("../type/js/undefined"),e("../type/js/regexp"),e("../type/js/function")]})},{"../schema":10,"../type/js/function":21,"../type/js/regexp":22,"../type/js/undefined":23,"./default_safe":13}],13:[function(e,t){"use strict";var n=e("../schema");t.exports=new n({include:[e("./core")],implicit:[e("../type/timestamp"),e("../type/merge")],explicit:[e("../type/binary"),e("../type/omap"),e("../type/pairs"),e("../type/set")]})},{"../schema":10,"../type/binary":17,"../type/merge":25,"../type/omap":27,"../type/pairs":28,"../type/set":30,"../type/timestamp":32,"./core":11}],14:[function(e,t){"use strict";var n=e("../schema");t.exports=new n({explicit:[e("../type/str"),e("../type/seq"),e("../type/map")]})},{"../schema":10,"../type/map":24,"../type/seq":29,"../type/str":31}],15:[function(e,t){"use strict";var n=e("../schema");t.exports=new n({include:[e("./failsafe")],implicit:[e("../type/null"),e("../type/bool"),e("../type/int"),e("../type/float")]})},{"../schema":10,"../type/bool":18,"../type/float":19,"../type/int":20,"../type/null":26,"./failsafe":14}],16:[function(e,t){"use strict";function n(e){var t={};return null!==e&&Object.keys(e).forEach(function(n){e[n].forEach(function(e){t[String(e)]=n})}),t}function r(e,t){if(t=t||{},Object.keys(t).forEach(function(t){if(-1===o.indexOf(t))throw new i('Unknown option "'+t+'" is met in definition of "'+e+'" YAML type.')}),this.tag=e,this.kind=t.kind||null,this.resolve=t.resolve||function(){return!0},this.construct=t.construct||function(e){return e},this.instanceOf=t.instanceOf||null,this.predicate=t.predicate||null,this.represent=t.represent||null,this.defaultStyle=t.defaultStyle||null,this.styleAliases=n(t.styleAliases||null),-1===a.indexOf(this.kind))throw new i('Unknown kind "'+this.kind+'" is specified for "'+e+'" YAML type.')}var i=e("./exception"),o=["kind","resolve","construct","instanceOf","predicate","represent","defaultStyle","styleAliases"],a=["scalar","sequence","mapping"];t.exports=r},{"./exception":7}],17:[function(e,t){"use strict";function n(e){var t,n,r=0,i=e.length;for(n=0,r=0;i>r;r+=1)if(t=e.charCodeAt(r),10!==t&&13!==t){if(-1===u[127&t])return!1;n+=6,n>=8&&(n-=8)}return n?!1:!0}function r(e){var t,n,r,i,o=0,s=e.length,c=[];for(r=0,i=0,o=0;s>o;o+=1)n=e.charCodeAt(o),t=u[127&n],10!==n&&13!==n&&(i=i<<6|t,r+=6,r>=8&&(r-=8,l!==e.charAt(o)&&c.push(i>>r&255),i&=(1<<r)-1));return a?new a(c):c}function i(e){var t,n,r,i="";for(t=0,n=e.length-2;n>t;t+=3)i+=c[e[t+0]>>2],i+=c[((3&e[t+0])<<4)+(e[t+1]>>4)],i+=c[((15&e[t+1])<<2)+(e[t+2]>>6)],i+=c[63&e[t+2]];return r=e.length%3,0!==r&&(t=e.length-r,i+=c[e[t+0]>>2],2===r?(i+=c[((3&e[t+0])<<4)+(e[t+1]>>4)],i+=c[(15&e[t+1])<<2],i+=l):(i+=c[(3&e[t+0])<<4],i+=l+l)),i}function o(e){return a&&a.isBuffer(e)}var a=e("buffer").Buffer,s=e("../type"),l="=",u=[-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,62,-1,-1,-1,63,52,53,54,55,56,57,58,59,60,61,-1,-1,-1,0,-1,-1,-1,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,-1,-1,-1,-1,-1,-1,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,-1,-1,-1,-1,-1],c="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".split("");t.exports=new s("tag:yaml.org,2002:binary",{kind:"scalar",resolve:n,construct:r,predicate:o,represent:i})},{"../type":16,buffer:1}],18:[function(e,t){"use strict";function n(e){var t=e.length;return 4===t&&("true"===e||"True"===e||"TRUE"===e)||5===t&&("false"===e||"False"===e||"FALSE"===e)}function r(e){return"true"===e||"True"===e||"TRUE"===e}function i(e){return"[object Boolean]"===Object.prototype.toString.call(e)}var o=e("../type");t.exports=new o("tag:yaml.org,2002:bool",{kind:"scalar",resolve:n,construct:r,predicate:i,represent:{lowercase:function(e){return e?"true":"false"},uppercase:function(e){return e?"TRUE":"FALSE"},camelcase:function(e){return e?"True":"False"}},defaultStyle:"lowercase"})},{"../type":16}],19:[function(e,t){"use strict";function n(e){return l.test(e)?!0:!1}function r(e){var t,n,r,i;return t=e.replace(/_/g,"").toLowerCase(),n="-"===t[0]?-1:1,i=[],0<="+-".indexOf(t[0])&&(t=t.slice(1)),".inf"===t?1===n?Number.POSITIVE_INFINITY:Number.NEGATIVE_INFINITY:".nan"===t?0/0:0<=t.indexOf(":")?(t.split(":").forEach(function(e){i.unshift(parseFloat(e,10))}),t=0,r=1,i.forEach(function(e){t+=e*r,r*=60}),n*t):n*parseFloat(t,10)}function i(e,t){if(isNaN(e))switch(t){case"lowercase":return".nan";case"uppercase":return".NAN";case"camelcase":return".NaN"}else if(Number.POSITIVE_INFINITY===e)switch(t){case"lowercase":return".inf";case"uppercase":return".INF";case"camelcase":return".Inf"}else{if(Number.NEGATIVE_INFINITY!==e)return a.isNegativeZero(e)?"-0.0":e.toString(10);switch(t){case"lowercase":return"-.inf";case"uppercase":return"-.INF";case"camelcase":return"-.Inf"}}}function o(e){return"[object Number]"===Object.prototype.toString.call(e)&&(0!==e%1||a.isNegativeZero(e))}var a=e("../common"),s=e("../type"),l=new RegExp("^(?:[-+]?(?:[0-9][0-9_]*)\\.[0-9_]*(?:[eE][-+][0-9]+)?|\\.[0-9_]+(?:[eE][-+][0-9]+)?|[-+]?[0-9][0-9_]*(?::[0-5]?[0-9])+\\.[0-9_]*|[-+]?\\.(?:inf|Inf|INF)|\\.(?:nan|NaN|NAN))$");t.exports=new s("tag:yaml.org,2002:float",{kind:"scalar",resolve:n,construct:r,predicate:o,represent:i,defaultStyle:"lowercase"})},{"../common":5,"../type":16}],20:[function(e,t){"use strict";function n(e){return e>=48&&57>=e||e>=65&&70>=e||e>=97&&102>=e}function r(e){return e>=48&&55>=e}function i(e){return e>=48&&57>=e}function o(e){var t,o=e.length,a=0,s=!1;if(!o)return!1;if(t=e[a],("-"===t||"+"===t)&&(t=e[++a]),"0"===t){if(a+1===o)return!0;if(t=e[++a],"b"===t){for(a++;o>a;a++)if(t=e[a],"_"!==t){if("0"!==t&&"1"!==t)return!1;s=!0}return s}if("x"===t){for(a++;o>a;a++)if(t=e[a],"_"!==t){if(!n(e.charCodeAt(a)))return!1;s=!0}return s}for(;o>a;a++)if(t=e[a],"_"!==t){if(!r(e.charCodeAt(a)))return!1;s=!0}return s}for(;o>a;a++)if(t=e[a],"_"!==t){if(":"===t)break;if(!i(e.charCodeAt(a)))return!1;s=!0}return s?":"!==t?!0:/^(:[0-5]?[0-9])+$/.test(e.slice(a)):!1}function a(e){var t,n,r=e,i=1,o=[];return-1!==r.indexOf("_")&&(r=r.replace(/_/g,"")),t=r[0],("-"===t||"+"===t)&&("-"===t&&(i=-1),r=r.slice(1),t=r[0]),"0"===r?0:"0"===t?"b"===r[1]?i*parseInt(r.slice(2),2):"x"===r[1]?i*parseInt(r,16):i*parseInt(r,8):-1!==r.indexOf(":")?(r.split(":").forEach(function(e){o.unshift(parseInt(e,10))}),r=0,n=1,o.forEach(function(e){r+=e*n,n*=60}),i*r):i*parseInt(r,10)}function s(e){return"[object Number]"===Object.prototype.toString.call(e)&&0===e%1&&!l.isNegativeZero(e)}var l=e("../common"),u=e("../type");t.exports=new u("tag:yaml.org,2002:int",{kind:"scalar",resolve:o,construct:a,predicate:s,represent:{binary:function(e){return"0b"+e.toString(2)},octal:function(e){return"0"+e.toString(8)},decimal:function(e){return e.toString(10)},hexadecimal:function(e){return"0x"+e.toString(16).toUpperCase()}},defaultStyle:"decimal",styleAliases:{binary:[2,"bin"],octal:[8,"oct"],decimal:[10,"dec"],hexadecimal:[16,"hex"]}})},{"../common":5,"../type":16}],21:[function(e,t){"use strict";function n(e){try{var t="("+e+")",n=a.parse(t,{range:!0});return"Program"!==n.type||1!==n.body.length||"ExpressionStatement"!==n.body[0].type||"FunctionExpression"!==n.body[0].expression.type?!1:!0}catch(r){return!1}}function r(e){var t,n="("+e+")",r=a.parse(n,{range:!0}),i=[];if("Program"!==r.type||1!==r.body.length||"ExpressionStatement"!==r.body[0].type||"FunctionExpression"!==r.body[0].expression.type)throw new Error("Failed to resolve function");return r.body[0].expression.params.forEach(function(e){i.push(e.name)}),t=r.body[0].expression.body.range,new Function(i,n.slice(t[0]+1,t[1]-1))}function i(e){return e.toString()}function o(e){return"[object Function]"===Object.prototype.toString.call(e)}var a;try{a=e("esprima")}catch(s){"undefined"!=typeof window&&(a=window.esprima)}var l=e("../../type");t.exports=new l("tag:yaml.org,2002:js/function",{kind:"scalar",resolve:n,construct:r,predicate:o,represent:i})},{"../../type":16,esprima:33}],22:[function(e,t){"use strict";function n(e){var t=e,n=/\/([gim]*)$/.exec(e),r="";if("/"===t[0]){if(n&&(r=n[1]),r.length>3)return!1;if("/"!==t[t.length-r.length-1])return!1;t=t.slice(1,t.length-r.length-1)}try{{new RegExp(t,r)}return!0}catch(i){return!1}}function r(e){var t=e,n=/\/([gim]*)$/.exec(e),r="";return"/"===t[0]&&(n&&(r=n[1]),t=t.slice(1,t.length-r.length-1)),new RegExp(t,r)}function i(e){var t="/"+e.source+"/";return e.global&&(t+="g"),e.multiline&&(t+="m"),e.ignoreCase&&(t+="i"),t}function o(e){return"[object RegExp]"===Object.prototype.toString.call(e)}var a=e("../../type");t.exports=new a("tag:yaml.org,2002:js/regexp",{kind:"scalar",resolve:n,construct:r,predicate:o,represent:i})},{"../../type":16}],23:[function(e,t){"use strict";function n(){return!0}function r(){return void 0}function i(){return""}function o(e){return"undefined"==typeof e}var a=e("../../type");t.exports=new a("tag:yaml.org,2002:js/undefined",{kind:"scalar",resolve:n,construct:r,predicate:o,represent:i})},{"../../type":16}],24:[function(e,t){"use strict";var n=e("../type");t.exports=new n("tag:yaml.org,2002:map",{kind:"mapping"})},{"../type":16}],25:[function(e,t){"use strict";function n(e){return"<<"===e}var r=e("../type");t.exports=new r("tag:yaml.org,2002:merge",{kind:"scalar",resolve:n})},{"../type":16}],26:[function(e,t){"use strict";function n(e){var t=e.length;return 1===t&&"~"===e||4===t&&("null"===e||"Null"===e||"NULL"===e)}function r(){return null}function i(e){return null===e}var o=e("../type");t.exports=new o("tag:yaml.org,2002:null",{kind:"scalar",resolve:n,construct:r,predicate:i,represent:{canonical:function(){return"~"},lowercase:function(){return"null"},uppercase:function(){return"NULL"},camelcase:function(){return"Null"}},defaultStyle:"lowercase"})},{"../type":16}],27:[function(e,t){"use strict";function n(e){var t,n,r,a,s,l=[],u=e;for(t=0,n=u.length;n>t;t+=1){if(r=u[t],s=!1,"[object Object]"!==o.call(r))return!1;for(a in r)if(i.call(r,a)){if(s)return!1;s=!0}if(!s)return!1;if(-1!==l.indexOf(a))return!1;l.push(a)}return!0}var r=e("../type"),i=Object.prototype.hasOwnProperty,o=Object.prototype.toString;t.exports=new r("tag:yaml.org,2002:omap",{kind:"sequence",resolve:n})},{"../type":16}],28:[function(e,t){"use strict";function n(e){var t,n,r,i,a,s=e;for(a=new Array(s.length),t=0,n=s.length;n>t;t+=1){if(r=s[t],"[object Object]"!==o.call(r))return!1;if(i=Object.keys(r),1!==i.length)return!1;a[t]=[i[0],r[i[0]]]}return!0}function r(e){var t,n,r,i,o,a=e;for(o=new Array(a.length),t=0,n=a.length;n>t;t+=1)r=a[t],i=Object.keys(r),o[t]=[i[0],r[i[0]]];return o}var i=e("../type"),o=Object.prototype.toString;t.exports=new i("tag:yaml.org,2002:pairs",{kind:"sequence",resolve:n,construct:r})},{"../type":16}],29:[function(e,t){"use strict";var n=e("../type");t.exports=new n("tag:yaml.org,2002:seq",{kind:"sequence"})},{"../type":16}],30:[function(e,t){"use strict";function n(e){var t,n=e;for(t in n)if(i.call(n,t)&&null!==n[t])return!1;return!0}var r=e("../type"),i=Object.prototype.hasOwnProperty;t.exports=new r("tag:yaml.org,2002:set",{kind:"mapping",resolve:n})},{"../type":16}],31:[function(e,t){"use strict";var n=e("../type");t.exports=new n("tag:yaml.org,2002:str",{kind:"scalar"})},{"../type":16}],32:[function(e,t){"use strict";function n(e){var t;return t=a.exec(e),null===t?!1:!0}function r(e){var t,n,r,i,o,s,l,u,c,p,f=0,d=null;if(t=a.exec(e),null===t)throw new Error("Date resolve error");if(n=+t[1],r=+t[2]-1,i=+t[3],!t[4])return new Date(Date.UTC(n,r,i));if(o=+t[4],s=+t[5],l=+t[6],t[7]){for(f=t[7].slice(0,3);f.length<3;)f+="0";f=+f}return t[9]&&(u=+t[10],c=+(t[11]||0),d=6e4*(60*u+c),"-"===t[9]&&(d=-d)),p=new Date(Date.UTC(n,r,i,o,s,l,f)),d&&p.setTime(p.getTime()-d),p}function i(e){return e.toISOString()}var o=e("../type"),a=new RegExp("^([0-9][0-9][0-9][0-9])-([0-9][0-9]?)-([0-9][0-9]?)(?:(?:[Tt]|[ \\t]+)([0-9][0-9]?):([0-9][0-9]):([0-9][0-9])(?:\\.([0-9]*))?(?:[ \\t]*(Z|([-+])([0-9][0-9]?)(?::([0-9][0-9]))?))?)?$");t.exports=new o("tag:yaml.org,2002:timestamp",{kind:"scalar",resolve:n,construct:r,instanceOf:Date,represent:i})},{"../type":16}],33:[function(e,t,n){!function(e,t){"use strict";"function"==typeof define&&define.amd?define(["exports"],t):t("undefined"!=typeof n?n:e.esprima={})}(this,function(e){"use strict";function t(e,t){if(!e)throw new Error("ASSERT: "+t)}function n(e,t){return dn.slice(e,t)}function r(e){return"0123456789".indexOf(e)>=0}function i(e){return"0123456789abcdefABCDEF".indexOf(e)>=0}function o(e){return"01234567".indexOf(e)>=0}function a(e){return" "===e||"	"===e||""===e||"\f"===e||" "===e||e.charCodeAt(0)>=5760&&" ᠎             　﻿".indexOf(e)>=0}function s(e){return"\n"===e||"\r"===e||"\u2028"===e||"\u2029"===e}function l(e){return"$"===e||"_"===e||"\\"===e||e>="a"&&"z">=e||e>="A"&&"Z">=e||e.charCodeAt(0)>=128&&fn.NonAsciiIdentifierStart.test(e)}function u(e){return"$"===e||"_"===e||"\\"===e||e>="a"&&"z">=e||e>="A"&&"Z">=e||e>="0"&&"9">=e||e.charCodeAt(0)>=128&&fn.NonAsciiIdentifierPart.test(e)}function c(e){switch(e){case"class":case"enum":case"export":case"extends":case"import":case"super":return!0}return!1}function p(e){switch(e){case"implements":case"interface":case"package":case"private":case"protected":case"public":case"static":case"yield":case"let":return!0}return!1}function f(e){return"eval"===e||"arguments"===e}function d(e){var t=!1;switch(e.length){case 2:t="if"===e||"in"===e||"do"===e;break;case 3:t="var"===e||"for"===e||"new"===e||"try"===e;break;case 4:t="this"===e||"else"===e||"case"===e||"void"===e||"with"===e;break;case 5:t="while"===e||"break"===e||"catch"===e||"throw"===e;break;case 6:t="return"===e||"typeof"===e||"delete"===e||"switch"===e;break;case 7:t="default"===e||"finally"===e;break;case 8:t="function"===e||"continue"===e||"debugger"===e;break;case 10:t="instanceof"===e}if(t)return!0;switch(e){case"const":return!0;case"yield":case"let":return!0}return hn&&p(e)?!0:c(e)}function h(){var e,t,n;for(t=!1,n=!1;vn>mn;)if(e=dn[mn],n)e=dn[mn++],s(e)&&(n=!1,"\r"===e&&"\n"===dn[mn]&&++mn,++gn,yn=mn);else if(t)s(e)?("\r"===e&&"\n"===dn[mn+1]&&++mn,++gn,++mn,yn=mn,mn>=vn&&z({},pn.UnexpectedToken,"ILLEGAL")):(e=dn[mn++],mn>=vn&&z({},pn.UnexpectedToken,"ILLEGAL"),"*"===e&&(e=dn[mn],"/"===e&&(++mn,t=!1)));else if("/"===e)if(e=dn[mn+1],"/"===e)mn+=2,n=!0;else{if("*"!==e)break;mn+=2,t=!0,mn>=vn&&z({},pn.UnexpectedToken,"ILLEGAL")
}else if(a(e))++mn;else{if(!s(e))break;++mn,"\r"===e&&"\n"===dn[mn]&&++mn,++gn,yn=mn}}function m(e){var t,n,r,o=0;for(n="u"===e?4:2,t=0;n>t;++t){if(!(vn>mn&&i(dn[mn])))return"";r=dn[mn++],o=16*o+"0123456789abcdef".indexOf(r.toLowerCase())}return String.fromCharCode(o)}function g(){var e,t,n,r;if(e=dn[mn],l(e)){if(t=mn,"\\"===e){if(++mn,"u"!==dn[mn])return;if(++mn,r=mn,e=m("u")){if("\\"===e||!l(e))return;n=e}else mn=r,n="u"}else n=dn[mn++];for(;vn>mn&&(e=dn[mn],u(e));)if("\\"===e){if(++mn,"u"!==dn[mn])return;if(++mn,r=mn,e=m("u")){if("\\"===e||!u(e))return;n+=e}else mn=r,n+="u"}else n+=dn[mn++];return 1===n.length?{type:sn.Identifier,value:n,lineNumber:gn,lineStart:yn,range:[t,mn]}:d(n)?{type:sn.Keyword,value:n,lineNumber:gn,lineStart:yn,range:[t,mn]}:"null"===n?{type:sn.NullLiteral,value:n,lineNumber:gn,lineStart:yn,range:[t,mn]}:"true"===n||"false"===n?{type:sn.BooleanLiteral,value:n,lineNumber:gn,lineStart:yn,range:[t,mn]}:{type:sn.Identifier,value:n,lineNumber:gn,lineStart:yn,range:[t,mn]}}}function y(){var e,t,n,i=mn,o=dn[mn];return";"===o||"{"===o||"}"===o?(++mn,{type:sn.Punctuator,value:o,lineNumber:gn,lineStart:yn,range:[i,mn]}):","===o||"("===o||")"===o?(++mn,{type:sn.Punctuator,value:o,lineNumber:gn,lineStart:yn,range:[i,mn]}):(e=dn[mn+1],"."!==o||r(e)?(t=dn[mn+2],n=dn[mn+3],">"===o&&">"===e&&">"===t&&"="===n?(mn+=4,{type:sn.Punctuator,value:">>>=",lineNumber:gn,lineStart:yn,range:[i,mn]}):"="===o&&"="===e&&"="===t?(mn+=3,{type:sn.Punctuator,value:"===",lineNumber:gn,lineStart:yn,range:[i,mn]}):"!"===o&&"="===e&&"="===t?(mn+=3,{type:sn.Punctuator,value:"!==",lineNumber:gn,lineStart:yn,range:[i,mn]}):">"===o&&">"===e&&">"===t?(mn+=3,{type:sn.Punctuator,value:">>>",lineNumber:gn,lineStart:yn,range:[i,mn]}):"<"===o&&"<"===e&&"="===t?(mn+=3,{type:sn.Punctuator,value:"<<=",lineNumber:gn,lineStart:yn,range:[i,mn]}):">"===o&&">"===e&&"="===t?(mn+=3,{type:sn.Punctuator,value:">>=",lineNumber:gn,lineStart:yn,range:[i,mn]}):"="===e&&"<>=!+-*%&|^/".indexOf(o)>=0?(mn+=2,{type:sn.Punctuator,value:o+e,lineNumber:gn,lineStart:yn,range:[i,mn]}):o===e&&"+-<>&|".indexOf(o)>=0&&"+-<>&|".indexOf(e)>=0?(mn+=2,{type:sn.Punctuator,value:o+e,lineNumber:gn,lineStart:yn,range:[i,mn]}):"[]<>+-*%&|^!~?:=/".indexOf(o)>=0?{type:sn.Punctuator,value:dn[mn++],lineNumber:gn,lineStart:yn,range:[i,mn]}:void 0):{type:sn.Punctuator,value:dn[mn++],lineNumber:gn,lineStart:yn,range:[i,mn]})}function v(){var e,n,a;if(a=dn[mn],t(r(a)||"."===a,"Numeric literal must start with a decimal digit or a decimal point"),n=mn,e="","."!==a){if(e=dn[mn++],a=dn[mn],"0"===e){if("x"===a||"X"===a){for(e+=dn[mn++];vn>mn&&(a=dn[mn],i(a));)e+=dn[mn++];return e.length<=2&&z({},pn.UnexpectedToken,"ILLEGAL"),vn>mn&&(a=dn[mn],l(a)&&z({},pn.UnexpectedToken,"ILLEGAL")),{type:sn.NumericLiteral,value:parseInt(e,16),lineNumber:gn,lineStart:yn,range:[n,mn]}}if(o(a)){for(e+=dn[mn++];vn>mn&&(a=dn[mn],o(a));)e+=dn[mn++];return vn>mn&&(a=dn[mn],(l(a)||r(a))&&z({},pn.UnexpectedToken,"ILLEGAL")),{type:sn.NumericLiteral,value:parseInt(e,8),octal:!0,lineNumber:gn,lineStart:yn,range:[n,mn]}}r(a)&&z({},pn.UnexpectedToken,"ILLEGAL")}for(;vn>mn&&(a=dn[mn],r(a));)e+=dn[mn++]}if("."===a)for(e+=dn[mn++];vn>mn&&(a=dn[mn],r(a));)e+=dn[mn++];if("e"===a||"E"===a)if(e+=dn[mn++],a=dn[mn],("+"===a||"-"===a)&&(e+=dn[mn++]),a=dn[mn],r(a))for(e+=dn[mn++];vn>mn&&(a=dn[mn],r(a));)e+=dn[mn++];else a="character "+a,mn>=vn&&(a="<end>"),z({},pn.UnexpectedToken,"ILLEGAL");return vn>mn&&(a=dn[mn],l(a)&&z({},pn.UnexpectedToken,"ILLEGAL")),{type:sn.NumericLiteral,value:parseFloat(e),lineNumber:gn,lineStart:yn,range:[n,mn]}}function _(){var e,n,r,i,a,l,u="",c=!1;for(e=dn[mn],t("'"===e||'"'===e,"String literal must starts with a quote"),n=mn,++mn;vn>mn;){if(r=dn[mn++],r===e){e="";break}if("\\"===r)if(r=dn[mn++],s(r))++gn,"\r"===r&&"\n"===dn[mn]&&++mn;else switch(r){case"n":u+="\n";break;case"r":u+="\r";break;case"t":u+="	";break;case"u":case"x":l=mn,a=m(r),a?u+=a:(mn=l,u+=r);break;case"b":u+="\b";break;case"f":u+="\f";break;case"v":u+="";break;default:o(r)?(i="01234567".indexOf(r),0!==i&&(c=!0),vn>mn&&o(dn[mn])&&(c=!0,i=8*i+"01234567".indexOf(dn[mn++]),"0123".indexOf(r)>=0&&vn>mn&&o(dn[mn])&&(i=8*i+"01234567".indexOf(dn[mn++]))),u+=String.fromCharCode(i)):u+=r}else{if(s(r))break;u+=r}}return""!==e&&z({},pn.UnexpectedToken,"ILLEGAL"),{type:sn.StringLiteral,value:u,octal:c,lineNumber:gn,lineStart:yn,range:[n,mn]}}function x(){var e,n,r,i,o,a,l,c=!1,p=!1;for(_n=null,h(),r=mn,n=dn[mn],t("/"===n,"Regular expression literal must start with a slash"),e=dn[mn++];vn>mn;)if(n=dn[mn++],e+=n,"\\"===n)n=dn[mn++],s(n)&&z({},pn.UnterminatedRegExp),e+=n;else if(c)"]"===n&&(c=!1);else{if("/"===n){p=!0;break}"["===n?c=!0:s(n)&&z({},pn.UnterminatedRegExp)}for(p||z({},pn.UnterminatedRegExp),i=e.substr(1,e.length-2),o="";vn>mn&&(n=dn[mn],u(n));)if(++mn,"\\"===n&&vn>mn)if(n=dn[mn],"u"===n)if(++mn,l=mn,n=m("u"))for(o+=n,e+="\\u";mn>l;++l)e+=dn[l];else mn=l,o+="u",e+="\\u";else e+="\\";else o+=n,e+=n;try{a=new RegExp(i,o)}catch(f){z({},pn.InvalidRegExp)}return{literal:e,value:a,range:[r,mn]}}function b(e){return e.type===sn.Identifier||e.type===sn.Keyword||e.type===sn.BooleanLiteral||e.type===sn.NullLiteral}function w(){var e,t;return h(),mn>=vn?{type:sn.EOF,lineNumber:gn,lineStart:yn,range:[mn,mn]}:(t=y(),"undefined"!=typeof t?t:(e=dn[mn],"'"===e||'"'===e?_():"."===e||r(e)?v():(t=g(),"undefined"!=typeof t?t:void z({},pn.UnexpectedToken,"ILLEGAL"))))}function S(){var e;return _n?(mn=_n.range[1],gn=_n.lineNumber,yn=_n.lineStart,e=_n,_n=null,e):(_n=null,w())}function E(){var e,t,n;return null!==_n?_n:(e=mn,t=gn,n=yn,_n=w(),mn=e,gn=t,yn=n,_n)}function L(){var e,t,n,r;return e=mn,t=gn,n=yn,h(),r=gn!==t,mn=e,gn=t,yn=n,r}function z(e,t){var n,r=Array.prototype.slice.call(arguments,2),i=t.replace(/%(\d)/g,function(e,t){return r[t]||""});throw"number"==typeof e.lineNumber?(n=new Error("Line "+e.lineNumber+": "+i),n.index=e.range[0],n.lineNumber=e.lineNumber,n.column=e.range[0]-yn+1):(n=new Error("Line "+gn+": "+i),n.index=mn,n.lineNumber=gn,n.column=mn-yn+1),n}function A(){try{z.apply(null,arguments)}catch(e){if(!bn.errors)throw e;bn.errors.push(e)}}function k(e){if(e.type===sn.EOF&&z(e,pn.UnexpectedEOS),e.type===sn.NumericLiteral&&z(e,pn.UnexpectedNumber),e.type===sn.StringLiteral&&z(e,pn.UnexpectedString),e.type===sn.Identifier&&z(e,pn.UnexpectedIdentifier),e.type===sn.Keyword){if(c(e.value))z(e,pn.UnexpectedReserved);else if(hn&&p(e.value))return void A(e,pn.StrictReservedWord);z(e,pn.UnexpectedToken,e.value)}z(e,pn.UnexpectedToken,e.value)}function I(e){var t=S();(t.type!==sn.Punctuator||t.value!==e)&&k(t)}function T(e){var t=S();(t.type!==sn.Keyword||t.value!==e)&&k(t)}function P(e){var t=E();return t.type===sn.Punctuator&&t.value===e}function C(e){var t=E();return t.type===sn.Keyword&&t.value===e}function M(){var e=E(),t=e.value;return e.type!==sn.Punctuator?!1:"="===t||"*="===t||"/="===t||"%="===t||"+="===t||"-="===t||"<<="===t||">>="===t||">>>="===t||"&="===t||"^="===t||"|="===t}function j(){var e,t;if(";"===dn[mn])return void S();if(t=gn,h(),gn===t){if(P(";"))return void S();e=E(),e.type===sn.EOF||P("}")||k(e)}}function O(e){return e.type===un.Identifier||e.type===un.MemberExpression}function F(){var e=[];for(I("[");!P("]");)P(",")?(S(),e.push(null)):(e.push(ut()),P("]")||I(","));return I("]"),{type:un.ArrayExpression,elements:e}}function R(e,t){var n,r;return n=hn,r=Ft(),t&&hn&&f(e[0].name)&&A(t,pn.StrictParamName),hn=n,{type:un.FunctionExpression,id:null,params:e,defaults:[],body:r,rest:null,generator:!1,expression:!1}}function N(){var e=S();return e.type===sn.StringLiteral||e.type===sn.NumericLiteral?(hn&&e.octal&&A(e,pn.StrictOctalLiteral),Yt(e)):{type:un.Identifier,name:e.value}}function V(){var e,t,n,r;return e=E(),e.type===sn.Identifier?(n=N(),"get"!==e.value||P(":")?"set"!==e.value||P(":")?(I(":"),{type:un.Property,key:n,value:ut(),kind:"init"}):(t=N(),I("("),e=E(),e.type!==sn.Identifier?(I(")"),A(e,pn.UnexpectedToken,e.value),{type:un.Property,key:t,value:R([]),kind:"set"}):(r=[dt()],I(")"),{type:un.Property,key:t,value:R(r,e),kind:"set"})):(t=N(),I("("),I(")"),{type:un.Property,key:t,value:R([]),kind:"get"})):e.type!==sn.EOF&&e.type!==sn.Punctuator?(t=N(),I(":"),{type:un.Property,key:t,value:ut(),kind:"init"}):void k(e)}function G(){var e,t,n,r=[],i={},o=String;for(I("{");!P("}");)e=V(),t=e.key.type===un.Identifier?e.key.name:o(e.key.value),n="init"===e.kind?cn.Data:"get"===e.kind?cn.Get:cn.Set,Object.prototype.hasOwnProperty.call(i,t)?(i[t]===cn.Data?hn&&n===cn.Data?A({},pn.StrictDuplicateProperty):n!==cn.Data&&A({},pn.AccessorDataProperty):n===cn.Data?A({},pn.AccessorDataProperty):i[t]&n&&A({},pn.AccessorGetSet),i[t]|=n):i[t]=n,r.push(e),P("}")||I(",");return I("}"),{type:un.ObjectExpression,properties:r}}function D(){var e;return I("("),e=ct(),I(")"),e}function U(){var e=E(),t=e.type;if(t===sn.Identifier)return{type:un.Identifier,name:S().value};if(t===sn.StringLiteral||t===sn.NumericLiteral)return hn&&e.octal&&A(e,pn.StrictOctalLiteral),Yt(S());if(t===sn.Keyword){if(C("this"))return S(),{type:un.ThisExpression};if(C("function"))return Nt()}return t===sn.BooleanLiteral?(S(),e.value="true"===e.value,Yt(e)):t===sn.NullLiteral?(S(),e.value=null,Yt(e)):P("[")?F():P("{")?G():P("(")?D():P("/")||P("/=")?Yt(x()):k(S())}function q(){var e=[];if(I("("),!P(")"))for(;vn>mn&&(e.push(ut()),!P(")"));)I(",");return I(")"),e}function B(){var e=S();return b(e)||k(e),{type:un.Identifier,name:e.value}}function H(){return I("."),B()}function W(){var e;return I("["),e=ct(),I("]"),e}function Z(){var e;return T("new"),e={type:un.NewExpression,callee:X(),arguments:[]},P("(")&&(e.arguments=q()),e}function Y(){var e;for(e=C("new")?Z():U();P(".")||P("[")||P("(");)e=P("(")?{type:un.CallExpression,callee:e,arguments:q()}:P("[")?{type:un.MemberExpression,computed:!0,object:e,property:W()}:{type:un.MemberExpression,computed:!1,object:e,property:H()};return e}function X(){var e;for(e=C("new")?Z():U();P(".")||P("[");)e=P("[")?{type:un.MemberExpression,computed:!0,object:e,property:W()}:{type:un.MemberExpression,computed:!1,object:e,property:H()};return e}function K(){var e,t=Y();return e=E(),e.type!==sn.Punctuator?t:(!P("++")&&!P("--")||L()||(hn&&t.type===un.Identifier&&f(t.name)&&A({},pn.StrictLHSPostfix),O(t)||A({},pn.InvalidLHSInAssignment),t={type:un.UpdateExpression,operator:S().value,argument:t,prefix:!1}),t)}function J(){var e,t;return e=E(),e.type!==sn.Punctuator&&e.type!==sn.Keyword?K():P("++")||P("--")?(e=S(),t=J(),hn&&t.type===un.Identifier&&f(t.name)&&A({},pn.StrictLHSPrefix),O(t)||A({},pn.InvalidLHSInAssignment),t={type:un.UpdateExpression,operator:e.value,argument:t,prefix:!0}):P("+")||P("-")||P("~")||P("!")?t={type:un.UnaryExpression,operator:S().value,argument:J(),prefix:!0}:C("delete")||C("void")||C("typeof")?(t={type:un.UnaryExpression,operator:S().value,argument:J(),prefix:!0},hn&&"delete"===t.operator&&t.argument.type===un.Identifier&&A({},pn.StrictDelete),t):K()}function $(){for(var e=J();P("*")||P("/")||P("%");)e={type:un.BinaryExpression,operator:S().value,left:e,right:J()};return e}function Q(){for(var e=$();P("+")||P("-");)e={type:un.BinaryExpression,operator:S().value,left:e,right:$()};return e}function et(){for(var e=Q();P("<<")||P(">>")||P(">>>");)e={type:un.BinaryExpression,operator:S().value,left:e,right:Q()};return e}function tt(){var e,t;for(t=xn.allowIn,xn.allowIn=!0,e=et();P("<")||P(">")||P("<=")||P(">=")||t&&C("in")||C("instanceof");)e={type:un.BinaryExpression,operator:S().value,left:e,right:et()};return xn.allowIn=t,e}function nt(){for(var e=tt();P("==")||P("!=")||P("===")||P("!==");)e={type:un.BinaryExpression,operator:S().value,left:e,right:tt()};return e}function rt(){for(var e=nt();P("&");)S(),e={type:un.BinaryExpression,operator:"&",left:e,right:nt()};return e}function it(){for(var e=rt();P("^");)S(),e={type:un.BinaryExpression,operator:"^",left:e,right:rt()};return e}function ot(){for(var e=it();P("|");)S(),e={type:un.BinaryExpression,operator:"|",left:e,right:it()};return e}function at(){for(var e=ot();P("&&");)S(),e={type:un.LogicalExpression,operator:"&&",left:e,right:ot()};return e}function st(){for(var e=at();P("||");)S(),e={type:un.LogicalExpression,operator:"||",left:e,right:at()};return e}function lt(){var e,t,n;return e=st(),P("?")&&(S(),t=xn.allowIn,xn.allowIn=!0,n=ut(),xn.allowIn=t,I(":"),e={type:un.ConditionalExpression,test:e,consequent:n,alternate:ut()}),e}function ut(){var e,t;return e=E(),t=lt(),M()&&(O(t)||A({},pn.InvalidLHSInAssignment),hn&&t.type===un.Identifier&&f(t.name)&&A(e,pn.StrictLHSAssignment),t={type:un.AssignmentExpression,operator:S().value,left:t,right:ut()}),t}function ct(){var e=ut();if(P(","))for(e={type:un.SequenceExpression,expressions:[e]};vn>mn&&P(",");)S(),e.expressions.push(ut());return e}function pt(){for(var e,t=[];vn>mn&&!P("}")&&(e=Vt(),"undefined"!=typeof e);)t.push(e);return t}function ft(){var e;return I("{"),e=pt(),I("}"),{type:un.BlockStatement,body:e}}function dt(){var e=S();return e.type!==sn.Identifier&&k(e),{type:un.Identifier,name:e.value}}function ht(e){var t=dt(),n=null;return hn&&f(t.name)&&A({},pn.StrictVarName),"const"===e?(I("="),n=ut()):P("=")&&(S(),n=ut()),{type:un.VariableDeclarator,id:t,init:n}}function mt(e){var t=[];do{if(t.push(ht(e)),!P(","))break;S()}while(vn>mn);return t}function gt(){var e;return T("var"),e=mt(),j(),{type:un.VariableDeclaration,declarations:e,kind:"var"}}function yt(e){var t;return T(e),t=mt(e),j(),{type:un.VariableDeclaration,declarations:t,kind:e}}function vt(){return I(";"),{type:un.EmptyStatement}}function _t(){var e=ct();return j(),{type:un.ExpressionStatement,expression:e}}function xt(){var e,t,n;return T("if"),I("("),e=ct(),I(")"),t=Ot(),C("else")?(S(),n=Ot()):n=null,{type:un.IfStatement,test:e,consequent:t,alternate:n}}function bt(){var e,t,n;return T("do"),n=xn.inIteration,xn.inIteration=!0,e=Ot(),xn.inIteration=n,T("while"),I("("),t=ct(),I(")"),P(";")&&S(),{type:un.DoWhileStatement,body:e,test:t}}function wt(){var e,t,n;return T("while"),I("("),e=ct(),I(")"),n=xn.inIteration,xn.inIteration=!0,t=Ot(),xn.inIteration=n,{type:un.WhileStatement,test:e,body:t}}function St(){var e=S();return{type:un.VariableDeclaration,declarations:mt(),kind:e.value}}function Et(){var e,t,n,r,i,o,a;return e=t=n=null,T("for"),I("("),P(";")?S():(C("var")||C("let")?(xn.allowIn=!1,e=St(),xn.allowIn=!0,1===e.declarations.length&&C("in")&&(S(),r=e,i=ct(),e=null)):(xn.allowIn=!1,e=ct(),xn.allowIn=!0,C("in")&&(O(e)||A({},pn.InvalidLHSInForIn),S(),r=e,i=ct(),e=null)),"undefined"==typeof r&&I(";")),"undefined"==typeof r&&(P(";")||(t=ct()),I(";"),P(")")||(n=ct())),I(")"),a=xn.inIteration,xn.inIteration=!0,o=Ot(),xn.inIteration=a,"undefined"==typeof r?{type:un.ForStatement,init:e,test:t,update:n,body:o}:{type:un.ForInStatement,left:r,right:i,body:o,each:!1}}function Lt(){var e,t=null;return T("continue"),";"===dn[mn]?(S(),xn.inIteration||z({},pn.IllegalContinue),{type:un.ContinueStatement,label:null}):L()?(xn.inIteration||z({},pn.IllegalContinue),{type:un.ContinueStatement,label:null}):(e=E(),e.type===sn.Identifier&&(t=dt(),Object.prototype.hasOwnProperty.call(xn.labelSet,t.name)||z({},pn.UnknownLabel,t.name)),j(),null!==t||xn.inIteration||z({},pn.IllegalContinue),{type:un.ContinueStatement,label:t})}function zt(){var e,t=null;return T("break"),";"===dn[mn]?(S(),xn.inIteration||xn.inSwitch||z({},pn.IllegalBreak),{type:un.BreakStatement,label:null}):L()?(xn.inIteration||xn.inSwitch||z({},pn.IllegalBreak),{type:un.BreakStatement,label:null}):(e=E(),e.type===sn.Identifier&&(t=dt(),Object.prototype.hasOwnProperty.call(xn.labelSet,t.name)||z({},pn.UnknownLabel,t.name)),j(),null!==t||xn.inIteration||xn.inSwitch||z({},pn.IllegalBreak),{type:un.BreakStatement,label:t})}function At(){var e,t=null;return T("return"),xn.inFunctionBody||A({},pn.IllegalReturn)," "===dn[mn]&&l(dn[mn+1])?(t=ct(),j(),{type:un.ReturnStatement,argument:t}):L()?{type:un.ReturnStatement,argument:null}:(P(";")||(e=E(),P("}")||e.type===sn.EOF||(t=ct())),j(),{type:un.ReturnStatement,argument:t})}function kt(){var e,t;return hn&&A({},pn.StrictModeWith),T("with"),I("("),e=ct(),I(")"),t=Ot(),{type:un.WithStatement,object:e,body:t}}function It(){var e,t,n=[];for(C("default")?(S(),e=null):(T("case"),e=ct()),I(":");vn>mn&&!(P("}")||C("default")||C("case"))&&(t=Ot(),"undefined"!=typeof t);)n.push(t);return{type:un.SwitchCase,test:e,consequent:n}}function Tt(){var e,t,n,r,i;if(T("switch"),I("("),e=ct(),I(")"),I("{"),t=[],P("}"))return S(),{type:un.SwitchStatement,discriminant:e,cases:t};for(r=xn.inSwitch,xn.inSwitch=!0,i=!1;vn>mn&&!P("}");)n=It(),null===n.test&&(i&&z({},pn.MultipleDefaultsInSwitch),i=!0),t.push(n);return xn.inSwitch=r,I("}"),{type:un.SwitchStatement,discriminant:e,cases:t}}function Pt(){var e;return T("throw"),L()&&z({},pn.NewlineAfterThrow),e=ct(),j(),{type:un.ThrowStatement,argument:e}}function Ct(){var e;return T("catch"),I("("),P(")")&&k(E()),e=dt(),hn&&f(e.name)&&A({},pn.StrictCatchVariable),I(")"),{type:un.CatchClause,param:e,body:ft()}}function Mt(){var e,t=[],n=null;return T("try"),e=ft(),C("catch")&&t.push(Ct()),C("finally")&&(S(),n=ft()),0!==t.length||n||z({},pn.NoCatchOrFinally),{type:un.TryStatement,block:e,guardedHandlers:[],handlers:t,finalizer:n}}function jt(){return T("debugger"),j(),{type:un.DebuggerStatement}}function Ot(){var e,t,n=E();if(n.type===sn.EOF&&k(n),n.type===sn.Punctuator)switch(n.value){case";":return vt();case"{":return ft();case"(":return _t()}if(n.type===sn.Keyword)switch(n.value){case"break":return zt();case"continue":return Lt();case"debugger":return jt();case"do":return bt();case"for":return Et();case"function":return Rt();case"if":return xt();case"return":return At();case"switch":return Tt();case"throw":return Pt();case"try":return Mt();case"var":return gt();case"while":return wt();case"with":return kt()}return e=ct(),e.type===un.Identifier&&P(":")?(S(),Object.prototype.hasOwnProperty.call(xn.labelSet,e.name)&&z({},pn.Redeclaration,"Label",e.name),xn.labelSet[e.name]=!0,t=Ot(),delete xn.labelSet[e.name],{type:un.LabeledStatement,label:e,body:t}):(j(),{type:un.ExpressionStatement,expression:e})}function Ft(){var e,t,r,i,o,a,s,l,u=[];for(I("{");vn>mn&&(t=E(),t.type===sn.StringLiteral)&&(e=Vt(),u.push(e),e.expression.type===un.Literal);)r=n(t.range[0]+1,t.range[1]-1),"use strict"===r?(hn=!0,i&&A(i,pn.StrictOctalLiteral)):!i&&t.octal&&(i=t);for(o=xn.labelSet,a=xn.inIteration,s=xn.inSwitch,l=xn.inFunctionBody,xn.labelSet={},xn.inIteration=!1,xn.inSwitch=!1,xn.inFunctionBody=!0;vn>mn&&!P("}")&&(e=Vt(),"undefined"!=typeof e);)u.push(e);return I("}"),xn.labelSet=o,xn.inIteration=a,xn.inSwitch=s,xn.inFunctionBody=l,{type:un.BlockStatement,body:u}}function Rt(){var e,t,n,r,i,o,a,s,l,u=[];if(T("function"),r=E(),e=dt(),hn?f(r.value)&&A(r,pn.StrictFunctionName):f(r.value)?(o=r,a=pn.StrictFunctionName):p(r.value)&&(o=r,a=pn.StrictReservedWord),I("("),!P(")"))for(l={};vn>mn&&(r=E(),t=dt(),hn?(f(r.value)&&(i=r,a=pn.StrictParamName),Object.prototype.hasOwnProperty.call(l,r.value)&&(i=r,a=pn.StrictParamDupe)):o||(f(r.value)?(o=r,a=pn.StrictParamName):p(r.value)?(o=r,a=pn.StrictReservedWord):Object.prototype.hasOwnProperty.call(l,r.value)&&(o=r,a=pn.StrictParamDupe)),u.push(t),l[t.name]=!0,!P(")"));)I(",");return I(")"),s=hn,n=Ft(),hn&&o&&z(o,a),hn&&i&&A(i,a),hn=s,{type:un.FunctionDeclaration,id:e,params:u,defaults:[],body:n,rest:null,generator:!1,expression:!1}}function Nt(){var e,t,n,r,i,o,a,s,l=null,u=[];if(T("function"),P("(")||(e=E(),l=dt(),hn?f(e.value)&&A(e,pn.StrictFunctionName):f(e.value)?(n=e,r=pn.StrictFunctionName):p(e.value)&&(n=e,r=pn.StrictReservedWord)),I("("),!P(")"))for(s={};vn>mn&&(e=E(),i=dt(),hn?(f(e.value)&&(t=e,r=pn.StrictParamName),Object.prototype.hasOwnProperty.call(s,e.value)&&(t=e,r=pn.StrictParamDupe)):n||(f(e.value)?(n=e,r=pn.StrictParamName):p(e.value)?(n=e,r=pn.StrictReservedWord):Object.prototype.hasOwnProperty.call(s,e.value)&&(n=e,r=pn.StrictParamDupe)),u.push(i),s[i.name]=!0,!P(")"));)I(",");return I(")"),a=hn,o=Ft(),hn&&n&&z(n,r),hn&&t&&A(t,r),hn=a,{type:un.FunctionExpression,id:l,params:u,defaults:[],body:o,rest:null,generator:!1,expression:!1}}function Vt(){var e=E();if(e.type===sn.Keyword)switch(e.value){case"const":case"let":return yt(e.value);case"function":return Rt();default:return Ot()}return e.type!==sn.EOF?Ot():void 0}function Gt(){for(var e,t,r,i,o=[];vn>mn&&(t=E(),t.type===sn.StringLiteral)&&(e=Vt(),o.push(e),e.expression.type===un.Literal);)r=n(t.range[0]+1,t.range[1]-1),"use strict"===r?(hn=!0,i&&A(i,pn.StrictOctalLiteral)):!i&&t.octal&&(i=t);for(;vn>mn&&(e=Vt(),"undefined"!=typeof e);)o.push(e);return o}function Dt(){var e;return hn=!1,e={type:un.Program,body:Gt()}}function Ut(e,n,r,i,o){t("number"==typeof r,"Comment must have valid position"),bn.comments.length>0&&bn.comments[bn.comments.length-1].range[1]>r||bn.comments.push({type:e,value:n,range:[r,i],loc:o})}function qt(){var e,t,n,r,i,o;for(e="",i=!1,o=!1;vn>mn;)if(t=dn[mn],o)t=dn[mn++],s(t)?(n.end={line:gn,column:mn-yn-1},o=!1,Ut("Line",e,r,mn-1,n),"\r"===t&&"\n"===dn[mn]&&++mn,++gn,yn=mn,e=""):mn>=vn?(o=!1,e+=t,n.end={line:gn,column:vn-yn},Ut("Line",e,r,vn,n)):e+=t;else if(i)s(t)?("\r"===t&&"\n"===dn[mn+1]?(++mn,e+="\r\n"):e+=t,++gn,++mn,yn=mn,mn>=vn&&z({},pn.UnexpectedToken,"ILLEGAL")):(t=dn[mn++],mn>=vn&&z({},pn.UnexpectedToken,"ILLEGAL"),e+=t,"*"===t&&(t=dn[mn],"/"===t&&(e=e.substr(0,e.length-1),i=!1,++mn,n.end={line:gn,column:mn-yn},Ut("Block",e,r,mn,n),e="")));else if("/"===t)if(t=dn[mn+1],"/"===t)n={start:{line:gn,column:mn-yn}},r=mn,mn+=2,o=!0,mn>=vn&&(n.end={line:gn,column:mn-yn},o=!1,Ut("Line",e,r,mn,n));else{if("*"!==t)break;r=mn,mn+=2,i=!0,n={start:{line:gn,column:mn-yn-2}},mn>=vn&&z({},pn.UnexpectedToken,"ILLEGAL")}else if(a(t))++mn;else{if(!s(t))break;++mn,"\r"===t&&"\n"===dn[mn]&&++mn,++gn,yn=mn}}function Bt(){var e,t,n,r=[];for(e=0;e<bn.comments.length;++e)t=bn.comments[e],n={type:t.type,value:t.value},bn.range&&(n.range=t.range),bn.loc&&(n.loc=t.loc),r.push(n);bn.comments=r}function Ht(){var e,t,r,i,o;return h(),e=mn,t={start:{line:gn,column:mn-yn}},r=bn.advance(),t.end={line:gn,column:mn-yn},r.type!==sn.EOF&&(i=[r.range[0],r.range[1]],o=n(r.range[0],r.range[1]),bn.tokens.push({type:ln[r.type],value:o,range:i,loc:t})),r}function Wt(){var e,t,n,r;return h(),e=mn,t={start:{line:gn,column:mn-yn}},n=bn.scanRegExp(),t.end={line:gn,column:mn-yn},bn.tokens.length>0&&(r=bn.tokens[bn.tokens.length-1],r.range[0]===e&&"Punctuator"===r.type&&("/"===r.value||"/="===r.value)&&bn.tokens.pop()),bn.tokens.push({type:"RegularExpression",value:n.literal,range:[e,mn],loc:t}),n}function Zt(){var e,t,n,r=[];for(e=0;e<bn.tokens.length;++e)t=bn.tokens[e],n={type:t.type,value:t.value},bn.range&&(n.range=t.range),bn.loc&&(n.loc=t.loc),r.push(n);bn.tokens=r}function Yt(e){return{type:un.Literal,value:e.value}}function Xt(e){return{type:un.Literal,value:e.value,raw:n(e.range[0],e.range[1])}}function Kt(){var e={};return e.range=[mn,mn],e.loc={start:{line:gn,column:mn-yn},end:{line:gn,column:mn-yn}},e.end=function(){this.range[1]=mn,this.loc.end.line=gn,this.loc.end.column=mn-yn},e.applyGroup=function(e){bn.range&&(e.groupRange=[this.range[0],this.range[1]]),bn.loc&&(e.groupLoc={start:{line:this.loc.start.line,column:this.loc.start.column},end:{line:this.loc.end.line,column:this.loc.end.column}})},e.apply=function(e){bn.range&&(e.range=[this.range[0],this.range[1]]),bn.loc&&(e.loc={start:{line:this.loc.start.line,column:this.loc.start.column},end:{line:this.loc.end.line,column:this.loc.end.column}})},e}function Jt(){var e,t;return h(),e=Kt(),I("("),t=ct(),I(")"),e.end(),e.applyGroup(t),t}function $t(){var e,t;for(h(),e=Kt(),t=C("new")?Z():U();P(".")||P("[");)P("[")?(t={type:un.MemberExpression,computed:!0,object:t,property:W()},e.end(),e.apply(t)):(t={type:un.MemberExpression,computed:!1,object:t,property:H()},e.end(),e.apply(t));return t}function Qt(){var e,t;for(h(),e=Kt(),t=C("new")?Z():U();P(".")||P("[")||P("(");)P("(")?(t={type:un.CallExpression,callee:t,arguments:q()},e.end(),e.apply(t)):P("[")?(t={type:un.MemberExpression,computed:!0,object:t,property:W()},e.end(),e.apply(t)):(t={type:un.MemberExpression,computed:!1,object:t,property:H()},e.end(),e.apply(t));return t}function en(e){var t,n,r;t="[object Array]"===Object.prototype.toString.apply(e)?[]:{};for(n in e)e.hasOwnProperty(n)&&"groupRange"!==n&&"groupLoc"!==n&&(r=e[n],t[n]=null===r||"object"!=typeof r||r instanceof RegExp?r:en(r));return t}function tn(e,t){return function(n){function r(e){return e.type===un.LogicalExpression||e.type===un.BinaryExpression}function i(n){var o,a;r(n.left)&&i(n.left),r(n.right)&&i(n.right),e&&(n.left.groupRange||n.right.groupRange?(o=n.left.groupRange?n.left.groupRange[0]:n.left.range[0],a=n.right.groupRange?n.right.groupRange[1]:n.right.range[1],n.range=[o,a]):"undefined"==typeof n.range&&(o=n.left.range[0],a=n.right.range[1],n.range=[o,a])),t&&(n.left.groupLoc||n.right.groupLoc?(o=n.left.groupLoc?n.left.groupLoc.start:n.left.loc.start,a=n.right.groupLoc?n.right.groupLoc.end:n.right.loc.end,n.loc={start:o,end:a}):"undefined"==typeof n.loc&&(n.loc={start:n.left.loc.start,end:n.right.loc.end}))}return function(){var o,a;return h(),o=Kt(),a=n.apply(null,arguments),o.end(),e&&"undefined"==typeof a.range&&o.apply(a),t&&"undefined"==typeof a.loc&&o.apply(a),r(a)&&i(a),a}}}function nn(){var e;bn.comments&&(bn.skipComment=h,h=qt),bn.raw&&(bn.createLiteral=Yt,Yt=Xt),(bn.range||bn.loc)&&(bn.parseGroupExpression=D,bn.parseLeftHandSideExpression=X,bn.parseLeftHandSideExpressionAllowCall=Y,D=Jt,X=$t,Y=Qt,e=tn(bn.range,bn.loc),bn.parseAdditiveExpression=Q,bn.parseAssignmentExpression=ut,bn.parseBitwiseANDExpression=rt,bn.parseBitwiseORExpression=ot,bn.parseBitwiseXORExpression=it,bn.parseBlock=ft,bn.parseFunctionSourceElements=Ft,bn.parseCatchClause=Ct,bn.parseComputedMember=W,bn.parseConditionalExpression=lt,bn.parseConstLetDeclaration=yt,bn.parseEqualityExpression=nt,bn.parseExpression=ct,bn.parseForVariableDeclaration=St,bn.parseFunctionDeclaration=Rt,bn.parseFunctionExpression=Nt,bn.parseLogicalANDExpression=at,bn.parseLogicalORExpression=st,bn.parseMultiplicativeExpression=$,bn.parseNewExpression=Z,bn.parseNonComputedProperty=B,bn.parseObjectProperty=V,bn.parseObjectPropertyKey=N,bn.parsePostfixExpression=K,bn.parsePrimaryExpression=U,bn.parseProgram=Dt,bn.parsePropertyFunction=R,bn.parseRelationalExpression=tt,bn.parseStatement=Ot,bn.parseShiftExpression=et,bn.parseSwitchCase=It,bn.parseUnaryExpression=J,bn.parseVariableDeclaration=ht,bn.parseVariableIdentifier=dt,Q=e(bn.parseAdditiveExpression),ut=e(bn.parseAssignmentExpression),rt=e(bn.parseBitwiseANDExpression),ot=e(bn.parseBitwiseORExpression),it=e(bn.parseBitwiseXORExpression),ft=e(bn.parseBlock),Ft=e(bn.parseFunctionSourceElements),Ct=e(bn.parseCatchClause),W=e(bn.parseComputedMember),lt=e(bn.parseConditionalExpression),yt=e(bn.parseConstLetDeclaration),nt=e(bn.parseEqualityExpression),ct=e(bn.parseExpression),St=e(bn.parseForVariableDeclaration),Rt=e(bn.parseFunctionDeclaration),Nt=e(bn.parseFunctionExpression),X=e(X),at=e(bn.parseLogicalANDExpression),st=e(bn.parseLogicalORExpression),$=e(bn.parseMultiplicativeExpression),Z=e(bn.parseNewExpression),B=e(bn.parseNonComputedProperty),V=e(bn.parseObjectProperty),N=e(bn.parseObjectPropertyKey),K=e(bn.parsePostfixExpression),U=e(bn.parsePrimaryExpression),Dt=e(bn.parseProgram),R=e(bn.parsePropertyFunction),tt=e(bn.parseRelationalExpression),Ot=e(bn.parseStatement),et=e(bn.parseShiftExpression),It=e(bn.parseSwitchCase),J=e(bn.parseUnaryExpression),ht=e(bn.parseVariableDeclaration),dt=e(bn.parseVariableIdentifier)),"undefined"!=typeof bn.tokens&&(bn.advance=w,bn.scanRegExp=x,w=Ht,x=Wt)}function rn(){"function"==typeof bn.skipComment&&(h=bn.skipComment),bn.raw&&(Yt=bn.createLiteral),(bn.range||bn.loc)&&(Q=bn.parseAdditiveExpression,ut=bn.parseAssignmentExpression,rt=bn.parseBitwiseANDExpression,ot=bn.parseBitwiseORExpression,it=bn.parseBitwiseXORExpression,ft=bn.parseBlock,Ft=bn.parseFunctionSourceElements,Ct=bn.parseCatchClause,W=bn.parseComputedMember,lt=bn.parseConditionalExpression,yt=bn.parseConstLetDeclaration,nt=bn.parseEqualityExpression,ct=bn.parseExpression,St=bn.parseForVariableDeclaration,Rt=bn.parseFunctionDeclaration,Nt=bn.parseFunctionExpression,D=bn.parseGroupExpression,X=bn.parseLeftHandSideExpression,Y=bn.parseLeftHandSideExpressionAllowCall,at=bn.parseLogicalANDExpression,st=bn.parseLogicalORExpression,$=bn.parseMultiplicativeExpression,Z=bn.parseNewExpression,B=bn.parseNonComputedProperty,V=bn.parseObjectProperty,N=bn.parseObjectPropertyKey,U=bn.parsePrimaryExpression,K=bn.parsePostfixExpression,Dt=bn.parseProgram,R=bn.parsePropertyFunction,tt=bn.parseRelationalExpression,Ot=bn.parseStatement,et=bn.parseShiftExpression,It=bn.parseSwitchCase,J=bn.parseUnaryExpression,ht=bn.parseVariableDeclaration,dt=bn.parseVariableIdentifier),"function"==typeof bn.scanRegExp&&(w=bn.advance,x=bn.scanRegExp)}function on(e){var t,n=e.length,r=[];for(t=0;n>t;++t)r[t]=e.charAt(t);return r}function an(e,t){var n,r;r=String,"string"==typeof e||e instanceof String||(e=r(e)),dn=e,mn=0,gn=dn.length>0?1:0,yn=0,vn=dn.length,_n=null,xn={allowIn:!0,labelSet:{},inFunctionBody:!1,inIteration:!1,inSwitch:!1},bn={},"undefined"!=typeof t&&(bn.range="boolean"==typeof t.range&&t.range,bn.loc="boolean"==typeof t.loc&&t.loc,bn.raw="boolean"==typeof t.raw&&t.raw,"boolean"==typeof t.tokens&&t.tokens&&(bn.tokens=[]),"boolean"==typeof t.comment&&t.comment&&(bn.comments=[]),"boolean"==typeof t.tolerant&&t.tolerant&&(bn.errors=[])),vn>0&&"undefined"==typeof dn[0]&&(e instanceof String&&(dn=e.valueOf()),"undefined"==typeof dn[0]&&(dn=on(e))),nn();try{n=Dt(),"undefined"!=typeof bn.comments&&(Bt(),n.comments=bn.comments),"undefined"!=typeof bn.tokens&&(Zt(),n.tokens=bn.tokens),"undefined"!=typeof bn.errors&&(n.errors=bn.errors),(bn.range||bn.loc)&&(n.body=en(n.body))}catch(i){throw i}finally{rn(),bn={}}return n}var sn,ln,un,cn,pn,fn,dn,hn,mn,gn,yn,vn,_n,xn,bn;sn={BooleanLiteral:1,EOF:2,Identifier:3,Keyword:4,NullLiteral:5,NumericLiteral:6,Punctuator:7,StringLiteral:8},ln={},ln[sn.BooleanLiteral]="Boolean",ln[sn.EOF]="<end>",ln[sn.Identifier]="Identifier",ln[sn.Keyword]="Keyword",ln[sn.NullLiteral]="Null",ln[sn.NumericLiteral]="Numeric",ln[sn.Punctuator]="Punctuator",ln[sn.StringLiteral]="String",un={AssignmentExpression:"AssignmentExpression",ArrayExpression:"ArrayExpression",BlockStatement:"BlockStatement",BinaryExpression:"BinaryExpression",BreakStatement:"BreakStatement",CallExpression:"CallExpression",CatchClause:"CatchClause",ConditionalExpression:"ConditionalExpression",ContinueStatement:"ContinueStatement",DoWhileStatement:"DoWhileStatement",DebuggerStatement:"DebuggerStatement",EmptyStatement:"EmptyStatement",ExpressionStatement:"ExpressionStatement",ForStatement:"ForStatement",ForInStatement:"ForInStatement",FunctionDeclaration:"FunctionDeclaration",FunctionExpression:"FunctionExpression",Identifier:"Identifier",IfStatement:"IfStatement",Literal:"Literal",LabeledStatement:"LabeledStatement",LogicalExpression:"LogicalExpression",MemberExpression:"MemberExpression",NewExpression:"NewExpression",ObjectExpression:"ObjectExpression",Program:"Program",Property:"Property",ReturnStatement:"ReturnStatement",SequenceExpression:"SequenceExpression",SwitchStatement:"SwitchStatement",SwitchCase:"SwitchCase",ThisExpression:"ThisExpression",ThrowStatement:"ThrowStatement",TryStatement:"TryStatement",UnaryExpression:"UnaryExpression",UpdateExpression:"UpdateExpression",VariableDeclaration:"VariableDeclaration",VariableDeclarator:"VariableDeclarator",WhileStatement:"WhileStatement",WithStatement:"WithStatement"},cn={Data:1,Get:2,Set:4},pn={UnexpectedToken:"Unexpected token %0",UnexpectedNumber:"Unexpected number",UnexpectedString:"Unexpected string",UnexpectedIdentifier:"Unexpected identifier",UnexpectedReserved:"Unexpected reserved word",UnexpectedEOS:"Unexpected end of input",NewlineAfterThrow:"Illegal newline after throw",InvalidRegExp:"Invalid regular expression",UnterminatedRegExp:"Invalid regular expression: missing /",InvalidLHSInAssignment:"Invalid left-hand side in assignment",InvalidLHSInForIn:"Invalid left-hand side in for-in",MultipleDefaultsInSwitch:"More than one default clause in switch statement",NoCatchOrFinally:"Missing catch or finally after try",UnknownLabel:"Undefined label '%0'",Redeclaration:"%0 '%1' has already been declared",IllegalContinue:"Illegal continue statement",IllegalBreak:"Illegal break statement",IllegalReturn:"Illegal return statement",StrictModeWith:"Strict mode code may not include a with statement",StrictCatchVariable:"Catch variable may not be eval or arguments in strict mode",StrictVarName:"Variable name may not be eval or arguments in strict mode",StrictParamName:"Parameter name eval or arguments is not allowed in strict mode",StrictParamDupe:"Strict mode function may not have duplicate parameter names",StrictFunctionName:"Function name may not be eval or arguments in strict mode",StrictOctalLiteral:"Octal literals are not allowed in strict mode.",StrictDelete:"Delete of an unqualified identifier in strict mode.",StrictDuplicateProperty:"Duplicate data property in object literal not allowed in strict mode",AccessorDataProperty:"Object literal may not have data and accessor property with the same name",AccessorGetSet:"Object literal may not have multiple get/set accessors with the same name",StrictLHSAssignment:"Assignment to eval or arguments is not allowed in strict mode",StrictLHSPostfix:"Postfix increment/decrement may not have eval or arguments operand in strict mode",StrictLHSPrefix:"Prefix increment/decrement may not have eval or arguments operand in strict mode",StrictReservedWord:"Use of future reserved word in strict mode"},fn={NonAsciiIdentifierStart:new RegExp("[ªµºÀ-ÖØ-öø-ˁˆ-ˑˠ-ˤˬˮͰ-ʹͶͷͺ-ͽΆΈ-ΊΌΎ-ΡΣ-ϵϷ-ҁҊ-ԧԱ-Ֆՙա-ևא-תװ-ײؠ-يٮٯٱ-ۓەۥۦۮۯۺ-ۼۿܐܒ-ܯݍ-ޥޱߊ-ߪߴߵߺࠀ-ࠕࠚࠤࠨࡀ-ࡘࢠࢢ-ࢬऄ-हऽॐक़-ॡॱ-ॷॹ-ॿঅ-ঌএঐও-নপ-রলশ-হঽৎড়ঢ়য়-ৡৰৱਅ-ਊਏਐਓ-ਨਪ-ਰਲਲ਼ਵਸ਼ਸਹਖ਼-ੜਫ਼ੲ-ੴઅ-ઍએ-ઑઓ-નપ-રલળવ-હઽૐૠૡଅ-ଌଏଐଓ-ନପ-ରଲଳଵ-ହଽଡ଼ଢ଼ୟ-ୡୱஃஅ-ஊஎ-ஐஒ-கஙசஜஞடணதந-பம-ஹௐఅ-ఌఎ-ఐఒ-నప-ళవ-హఽౘౙౠౡಅ-ಌಎ-ಐಒ-ನಪ-ಳವ-ಹಽೞೠೡೱೲഅ-ഌഎ-ഐഒ-ഺഽൎൠൡൺ-ൿඅ-ඖක-නඳ-රලව-ෆก-ะาำเ-ๆກຂຄງຈຊຍດ-ທນ-ຟມ-ຣລວສຫອ-ະາຳຽເ-ໄໆໜ-ໟༀཀ-ཇཉ-ཬྈ-ྌက-ဪဿၐ-ၕၚ-ၝၡၥၦၮ-ၰၵ-ႁႎႠ-ჅჇჍა-ჺჼ-ቈቊ-ቍቐ-ቖቘቚ-ቝበ-ኈኊ-ኍነ-ኰኲ-ኵኸ-ኾዀዂ-ዅወ-ዖዘ-ጐጒ-ጕጘ-ፚᎀ-ᎏᎠ-Ᏼᐁ-ᙬᙯ-ᙿᚁ-ᚚᚠ-ᛪᛮ-ᛰᜀ-ᜌᜎ-ᜑᜠ-ᜱᝀ-ᝑᝠ-ᝬᝮ-ᝰក-ឳៗៜᠠ-ᡷᢀ-ᢨᢪᢰ-ᣵᤀ-ᤜᥐ-ᥭᥰ-ᥴᦀ-ᦫᧁ-ᧇᨀ-ᨖᨠ-ᩔᪧᬅ-ᬳᭅ-ᭋᮃ-ᮠᮮᮯᮺ-ᯥᰀ-ᰣᱍ-ᱏᱚ-ᱽᳩ-ᳬᳮ-ᳱᳵᳶᴀ-ᶿḀ-ἕἘ-Ἕἠ-ὅὈ-Ὅὐ-ὗὙὛὝὟ-ώᾀ-ᾴᾶ-ᾼιῂ-ῄῆ-ῌῐ-ΐῖ-Ίῠ-Ῥῲ-ῴῶ-ῼⁱⁿₐ-ₜℂℇℊ-ℓℕℙ-ℝℤΩℨK-ℭℯ-ℹℼ-ℿⅅ-ⅉⅎⅠ-ↈⰀ-Ⱞⰰ-ⱞⱠ-ⳤⳫ-ⳮⳲⳳⴀ-ⴥⴧⴭⴰ-ⵧⵯⶀ-ⶖⶠ-ⶦⶨ-ⶮⶰ-ⶶⶸ-ⶾⷀ-ⷆⷈ-ⷎⷐ-ⷖⷘ-ⷞⸯ々-〇〡-〩〱-〵〸-〼ぁ-ゖゝ-ゟァ-ヺー-ヿㄅ-ㄭㄱ-ㆎㆠ-ㆺㇰ-ㇿ㐀-䶵一-鿌ꀀ-ꒌꓐ-ꓽꔀ-ꘌꘐ-ꘟꘪꘫꙀ-ꙮꙿ-ꚗꚠ-ꛯꜗ-ꜟꜢ-ꞈꞋ-ꞎꞐ-ꞓꞠ-Ɦꟸ-ꠁꠃ-ꠅꠇ-ꠊꠌ-ꠢꡀ-ꡳꢂ-ꢳꣲ-ꣷꣻꤊ-ꤥꤰ-ꥆꥠ-ꥼꦄ-ꦲꧏꨀ-ꨨꩀ-ꩂꩄ-ꩋꩠ-ꩶꩺꪀ-ꪯꪱꪵꪶꪹ-ꪽꫀꫂꫛ-ꫝꫠ-ꫪꫲ-ꫴꬁ-ꬆꬉ-ꬎꬑ-ꬖꬠ-ꬦꬨ-ꬮꯀ-ꯢ가-힣ힰ-ퟆퟋ-ퟻ豈-舘並-龎ﬀ-ﬆﬓ-ﬗיִײַ-ﬨשׁ-זּטּ-לּמּנּסּףּפּצּ-ﮱﯓ-ﴽﵐ-ﶏﶒ-ﷇﷰ-ﷻﹰ-ﹴﹶ-ﻼＡ-Ｚａ-ｚｦ-ﾾￂ-ￇￊ-ￏￒ-ￗￚ-ￜ]"),NonAsciiIdentifierPart:new RegExp("[ªµºÀ-ÖØ-öø-ˁˆ-ˑˠ-ˤˬˮ̀-ʹͶͷͺ-ͽΆΈ-ΊΌΎ-ΡΣ-ϵϷ-ҁ҃-҇Ҋ-ԧԱ-Ֆՙա-և֑-ׇֽֿׁׂׅׄא-תװ-ײؐ-ؚؠ-٩ٮ-ۓە-ۜ۟-۪ۨ-ۼۿܐ-݊ݍ-ޱ߀-ߵߺࠀ-࠭ࡀ-࡛ࢠࢢ-ࢬࣤ-ࣾऀ-ॣ०-९ॱ-ॷॹ-ॿঁ-ঃঅ-ঌএঐও-নপ-রলশ-হ়-ৄেৈো-ৎৗড়ঢ়য়-ৣ০-ৱਁ-ਃਅ-ਊਏਐਓ-ਨਪ-ਰਲਲ਼ਵਸ਼ਸਹ਼ਾ-ੂੇੈੋ-੍ੑਖ਼-ੜਫ਼੦-ੵઁ-ઃઅ-ઍએ-ઑઓ-નપ-રલળવ-હ઼-ૅે-ૉો-્ૐૠ-ૣ૦-૯ଁ-ଃଅ-ଌଏଐଓ-ନପ-ରଲଳଵ-ହ଼-ୄେୈୋ-୍ୖୗଡ଼ଢ଼ୟ-ୣ୦-୯ୱஂஃஅ-ஊஎ-ஐஒ-கஙசஜஞடணதந-பம-ஹா-ூெ-ைொ-்ௐௗ௦-௯ఁ-ఃఅ-ఌఎ-ఐఒ-నప-ళవ-హఽ-ౄె-ైొ-్ౕౖౘౙౠ-ౣ౦-౯ಂಃಅ-ಌಎ-ಐಒ-ನಪ-ಳವ-ಹ಼-ೄೆ-ೈೊ-್ೕೖೞೠ-ೣ೦-೯ೱೲംഃഅ-ഌഎ-ഐഒ-ഺഽ-ൄെ-ൈൊ-ൎൗൠ-ൣ൦-൯ൺ-ൿංඃඅ-ඖක-නඳ-රලව-ෆ්ා-ුූෘ-ෟෲෳก-ฺเ-๎๐-๙ກຂຄງຈຊຍດ-ທນ-ຟມ-ຣລວສຫອ-ູົ-ຽເ-ໄໆ່-ໍ໐-໙ໜ-ໟༀ༘༙༠-༩༹༵༷༾-ཇཉ-ཬཱ-྄྆-ྗྙ-ྼ࿆က-၉ၐ-ႝႠ-ჅჇჍა-ჺჼ-ቈቊ-ቍቐ-ቖቘቚ-ቝበ-ኈኊ-ኍነ-ኰኲ-ኵኸ-ኾዀዂ-ዅወ-ዖዘ-ጐጒ-ጕጘ-ፚ፝-፟ᎀ-ᎏᎠ-Ᏼᐁ-ᙬᙯ-ᙿᚁ-ᚚᚠ-ᛪᛮ-ᛰᜀ-ᜌᜎ-᜔ᜠ-᜴ᝀ-ᝓᝠ-ᝬᝮ-ᝰᝲᝳក-៓ៗៜ៝០-៩᠋-᠍᠐-᠙ᠠ-ᡷᢀ-ᢪᢰ-ᣵᤀ-ᤜᤠ-ᤫᤰ-᤻᥆-ᥭᥰ-ᥴᦀ-ᦫᦰ-ᧉ᧐-᧙ᨀ-ᨛᨠ-ᩞ᩠-᩿᩼-᪉᪐-᪙ᪧᬀ-ᭋ᭐-᭙᭫-᭳ᮀ-᯳ᰀ-᰷᱀-᱉ᱍ-ᱽ᳐-᳔᳒-ᳶᴀ-ᷦ᷼-ἕἘ-Ἕἠ-ὅὈ-Ὅὐ-ὗὙὛὝὟ-ώᾀ-ᾴᾶ-ᾼιῂ-ῄῆ-ῌῐ-ΐῖ-Ίῠ-Ῥῲ-ῴῶ-ῼ‌‍‿⁀⁔ⁱⁿₐ-ₜ⃐-⃥⃜⃡-⃰ℂℇℊ-ℓℕℙ-ℝℤΩℨK-ℭℯ-ℹℼ-ℿⅅ-ⅉⅎⅠ-ↈⰀ-Ⱞⰰ-ⱞⱠ-ⳤⳫ-ⳳⴀ-ⴥⴧⴭⴰ-ⵧⵯ⵿-ⶖⶠ-ⶦⶨ-ⶮⶰ-ⶶⶸ-ⶾⷀ-ⷆⷈ-ⷎⷐ-ⷖⷘ-ⷞⷠ-ⷿⸯ々-〇〡-〯〱-〵〸-〼ぁ-ゖ゙゚ゝ-ゟァ-ヺー-ヿㄅ-ㄭㄱ-ㆎㆠ-ㆺㇰ-ㇿ㐀-䶵一-鿌ꀀ-ꒌꓐ-ꓽꔀ-ꘌꘐ-ꘫꙀ-꙯ꙴ-꙽ꙿ-ꚗꚟ-꛱ꜗ-ꜟꜢ-ꞈꞋ-ꞎꞐ-ꞓꞠ-Ɦꟸ-ꠧꡀ-ꡳꢀ-꣄꣐-꣙꣠-ꣷꣻ꤀-꤭ꤰ-꥓ꥠ-ꥼꦀ-꧀ꧏ-꧙ꨀ-ꨶꩀ-ꩍ꩐-꩙ꩠ-ꩶꩺꩻꪀ-ꫂꫛ-ꫝꫠ-ꫯꫲ-꫶ꬁ-ꬆꬉ-ꬎꬑ-ꬖꬠ-ꬦꬨ-ꬮꯀ-ꯪ꯬꯭꯰-꯹가-힣ힰ-ퟆퟋ-ퟻ豈-舘並-龎ﬀ-ﬆﬓ-ﬗיִ-ﬨשׁ-זּטּ-לּמּנּסּףּפּצּ-ﮱﯓ-ﴽﵐ-ﶏﶒ-ﷇﷰ-ﷻ︀-️︠-︦︳︴﹍-﹏ﹰ-ﹴﹶ-ﻼ０-９Ａ-Ｚ＿ａ-ｚｦ-ﾾￂ-ￇￊ-ￏￒ-ￗￚ-ￜ]")},"undefined"==typeof"esprima"[0]&&(n=function(e,t){return dn.slice(e,t).join("")
}),e.version="1.0.4",e.parse=an,e.Syntax=function(){var e,t={};"function"==typeof Object.create&&(t=Object.create(null));for(e in un)un.hasOwnProperty(e)&&(t[e]=un[e]);return"function"==typeof Object.freeze&&Object.freeze(t),t}()})},{}],34:[function(e,t){function n(e,t,n,r){a.call(this,"CanvasRenderer",e,t,n,r),this.selection_info=document.createElement("div"),this.selection_info.setAttribute("class","label"),this.selection_info.style.display="none",this.cutout_context=document.createElement("canvas").getContext("2d")}var r=e("../point.js"),i=e("../geo.js"),o=e("../style.js"),a=e("../vector_renderer.js");a.CanvasRenderer=n,n.prototype=Object.create(a.prototype),n.addTile=function(){return{layers:!0}},n.prototype._tileWorkerCompleted=function(e){if(null==e.canvas?(e.canvas=document.createElement("canvas"),e.context=e.canvas.getContext("2d"),e.canvas.style.width=i.tile_size+"px",e.canvas.style.width=i.tile_size+"px",e.canvas.width=Math.round(i.tile_size*this.device_pixel_ratio),e.canvas.height=Math.round(i.tile_size*this.device_pixel_ratio),e.canvas.style.background=this.colorToString(this.styles.default)):e.context.clearRect(0,0,e.canvas.width,e.canvas.height),this.renderTile(e,e.context),null==e.canvas.parentNode){var t=document.querySelector("div[data-tile-key='"+e.key+"']");t.appendChild(e.canvas)}},n.prototype.scaleGeometryToPixels=function(e){var t=this;return i.transformGeometry(e,function(e){return r(e[0]*i.tile_size*t.device_pixel_ratio/a.tile_scale,e[1]*i.tile_size*t.device_pixel_ratio/a.tile_scale*-1)})},n.prototype.renderLine=function(e,t,n){var r=e,i=t.color,o=t.width,a=t.dash,s=n;s.beginPath(),s.strokeStyle=this.colorToString(i),s.lineCap="round",s.lineWidth=o,s.setLineDash&&s.setLineDash(a?a.map(function(e){return e*o}):[]);for(var l=0;l<r.length-1;l++){var u=[r[l].x,r[l].y,r[l+1].x,r[l+1].y];s.moveTo(u[0],u[1]),s.lineTo(u[2],u[3])}s.closePath(),s.stroke()},n.prototype.renderPolygon=function(e,t,n){var r=e,i=t.color,o=(t.width,t.outline&&t.outline.color),a=t.outline&&t.outline.width,s=t.outline&&t.outline.dash,l=n;l.beginPath(),l.fillStyle=this.colorToString(i),l.moveTo(r[0].x,r[0].y);for(var u=1;u<r.length;u++)l.lineTo(r[u].x,r[u].y);l.closePath(),l.fill(),o&&a&&(l.strokeStyle=this.colorToString(o),l.lineCap="round",l.lineWidth=a,l.setLineDash&&l.setLineDash(s?s.map(function(e){return e*a}):[]),l.stroke())},n.prototype.renderPoint=function(e,t,n){var r=t.color,i=t.size,o=t.outline&&t.outline.color,a=t.outline&&t.outline.width,s=t.outline&&t.outline.dash,l=n;l.fillStyle=this.colorToString(r),l.beginPath(),l.arc(e.x,e.y,i,0,2*Math.PI),l.closePath(),l.fill(),o&&a&&(l.strokeStyle=this.colorToString(o),l.lineWidth=a,l.setLineDash&&l.setLineDash(s?s.map(function(e){return e*a}):[]),l.stroke())},n.prototype.renderFeature=function(e,t,n){var r,i,o,a=e.geometry;if("LineString"==a.type)this.renderLine(a.pixels,t,n);else if("MultiLineString"==a.type)for(r=0;r<a.pixels.length;r++)this.renderLine(a.pixels[r],t,n);else if("Polygon"==a.type||"MultiPolygon"==a.type)for(o="Polygon"==a.type?[a.pixels]:a.pixels,r=0;r<o.length;r++)if(o[r].length>1){for((this.cutout_context.canvas.width!=n.canvas.width||this.cutout_context.canvas.height!=n.canvas.height)&&(this.cutout_context.canvas.width=n.canvas.width,this.cutout_context.canvas.height=n.canvas.height),this.cutout_context.clearRect(0,0,this.cutout_context.canvas.width,this.cutout_context.canvas.height),this.cutout_context.globalCompositeOperation="source-over",this.renderPolygon(o[r][0],t,this.cutout_context),this.cutout_context.globalCompositeOperation="destination-out",i=1;i<o[r].length;i++)this.renderPolygon(o[r][i],t,this.cutout_context);if(n.drawImage(this.cutout_context.canvas,0,0),t.outline&&t.outline.color)for(i=1;i<o[r].length;i++)this.renderLine(o[r][i],t.outline,n)}else this.renderPolygon(o[r][0],t,n);else if("Point"==a.type)this.renderPoint(a.pixels,t,n);else if("MultiPoint"==a.type)for(r=0;r<a.pixels.length;r++)this.renderPoint(a.pixels[r],t,n)},n.prototype.renderTile=function(e,t){var n,r=this;null==e.selection_canvas&&(e.selection_canvas=document.createElement("canvas"),e.selection_context=e.selection_canvas.getContext("2d"),e.selection_canvas.style.width=i.tile_size+"px",e.selection_canvas.style.width=i.tile_size+"px",e.selection_canvas.width=Math.round(i.tile_size*this.device_pixel_ratio),e.selection_canvas.height=Math.round(i.tile_size*this.device_pixel_ratio));var a,s={colors:{}},l=0;for(var u in r.layers){var c=r.layers[u];null!=this.styles[c.name]&&0!=this.styles[c.name].visible&&e.layers[c.name].features.forEach(function(r){r.geometry.pixels=this.scaleGeometryToPixels(r.geometry),n=o.parseStyleForFeature(r,this.styles[c.name],e),n.width&&(n.width/=i.units_per_pixel),n.size&&(n.size/=i.units_per_pixel),n.outline&&n.outline.width&&(n.outline.width/=i.units_per_pixel),this.renderFeature(r,n,t),1==c.selection&&null!=r.properties.name&&""!=r.properties.name?(a=this.generateColor(s.colors),a.properties=r.properties,l++,this.renderFeature(r,{color:a.color,width:n.width,size:n.size},e.selection_context)):this.renderFeature(r,{color:[0,0,0],width:n.width,size:n.size},e.selection_context)},this)}var p=this.selection_info;l>0?(this.tiles[e.key].selection=s,s.pixels=new Uint32Array(e.selection_context.getImageData(0,0,e.selection_canvas.width,e.selection_canvas.height).data.buffer),t.canvas.onmousemove=function(e){var n={x:e.offsetX,y:e.offsetY},o=n.y*r.device_pixel_ratio*i.tile_size*r.device_pixel_ratio+n.x*r.device_pixel_ratio,a=s.pixels[o],l=s.colors[a];null!=l?(t.canvas.style.cursor="crosshair",p.style.left=n.x+5+"px",p.style.top=n.y+5+"px",p.innerHTML='<span class="labelInner">'+l.properties.name+"</span>",p.style.display="block",t.canvas.parentNode.appendChild(p)):(t.canvas.style.cursor=null,p.style.display="none",p.parentNode==t.canvas.parentNode&&t.canvas.parentNode.removeChild(p))}):t.canvas.onmousemove=function(){t.canvas.style.cursor=null,p.style.display="none",p.parentNode==t.canvas.parentNode&&t.canvas.parentNode.removeChild(p)}},n.prototype.colorToString=function(e){return"rgb("+e.map(function(e){return~~(256*e)}).join(",")+")"},n.prototype.generateColor=function(e){var t,n,r,i,o,a,s;for(e=e||{};;)if(t=Math.random(),n=Math.random(),r=Math.random(),i=~~(256*t),o=~~(256*n),a=~~(256*r),s=i+(o<<8)+(a<<16)+(255<<24)>>>0,void 0===e[s]){e[s]={color:[t,n,r]};break}return e[s]},void 0!==t&&(t.exports=n)},{"../geo.js":35,"../point.js":44,"../style.js":45,"../vector_renderer.js":48}],35:[function(e,t){var n=e("./point.js"),r={};r.tile_size=256,r.half_circumference_meters=20037508.342789244,r.map_origin_meters=n(-r.half_circumference_meters,r.half_circumference_meters),r.min_zoom_meters_per_pixel=2*r.half_circumference_meters/r.tile_size,r.meters_per_pixel=[],r.max_zoom=20;for(var i=0;i<=r.max_zoom;i++)r.meters_per_pixel[i]=r.min_zoom_meters_per_pixel/Math.pow(2,i);r.units_per_meter=[],r.setTileScale=function(e){r.tile_scale=e,r.units_per_pixel=r.tile_scale/r.tile_size;for(var t=0;t<=r.max_zoom;t++)r.units_per_meter[t]=r.tile_scale/(r.tile_size*r.meters_per_pixel[t])},r.metersForTile=function(e){return n(e.x*r.tile_size*r.meters_per_pixel[e.z]+r.map_origin_meters.x,e.y*r.tile_size*r.meters_per_pixel[e.z]*-1+r.map_origin_meters.y)},r.metersToLatLng=function(e){var t=n.copy(e);return t.x/=r.half_circumference_meters,t.y/=r.half_circumference_meters,t.y=(2*Math.atan(Math.exp(t.y*Math.PI))-Math.PI/2)/Math.PI,t.x*=180,t.y*=180,t},r.latLngToMeters=function(e){var t=n.copy(e);return t.y=Math.log(Math.tan((t.y+90)*Math.PI/360))/(Math.PI/180),t.y=t.y*r.half_circumference_meters/180,t.x=t.x*r.half_circumference_meters/180,t},r.transformGeometry=function(e,t){return"Point"==e.type?t(e.coordinates):"LineString"==e.type||"MultiPoint"==e.type?e.coordinates.map(t):"Polygon"==e.type||"MultiLineString"==e.type?e.coordinates.map(function(e){return e.map(t)}):"MultiPolygon"==e.type?e.coordinates.map(function(e){return e.map(function(e){return e.map(t)})}):{}},r.boxIntersect=function(e,t){return!(t.sw.x>e.ne.x||t.ne.x<e.sw.x||t.sw.y>e.ne.y||t.ne.y<e.sw.y)},r.splitFeatureLines=function(e,t){var n,t=t||.001,r=t*t,i=e.geometry;if("MultiLineString"==i.type)n=i.coordinates;else{if("LineString"!=i.type)return e;n=[i.coordinates]}for(var o=[],a=0;a<n.length;a++){for(var s,l=n[a],u=[],c=null,p=0;p<l.length;p++){var f=l[p];if(s=!0,null!=c){var d=(f[0]-c[0])*(f[0]-c[0])+(f[1]-c[1])*(f[1]-c[1]);d>r&&(s=!1)}0==s&&(o.push(u),u=[]),u.push(f),c=f}o.push(u),u=[]}return 1==o.length?(i.type="LineString",i.coordinates=o[0]):(i.type="MultiLineString",i.coordinates=o),e},void 0!==t&&(t.exports=r)},{"./point.js":44}],36:[function(e,t){var n=e("../utils.js"),r={};r.getContext=function(e){var e=e,t=!1;if(null==e&&(e=document.createElement("canvas"),e.style.position="absolute",e.style.top=0,e.style.left=0,e.style.zIndex=-1,document.body.appendChild(e),t=!0),gl=e.getContext("experimental-webgl",{}),!gl)throw alert("Couldn't create WebGL context. Your browser probably doesn't support WebGL or it's turned off?"),"Couldn't create WebGL context";return r.resizeCanvas(gl,window.innerWidth,window.innerHeight),1==t&&window.addEventListener("resize",function(){r.resizeCanvas(gl,window.innerWidth,window.innerHeight)}),r.VertexArrayObject.init(gl),gl},r.resizeCanvas=function(e,t,n){var r=window.devicePixelRatio||1;e.canvas.style.width=t+"px",e.canvas.style.height=n+"px",e.canvas.width=Math.round(e.canvas.style.width*r),e.canvas.height=Math.round(e.canvas.style.width*r),e.viewport(0,0,e.canvas.width,e.canvas.height)},r.createProgramFromElements=function(e,t,n){var i=document.getElementById(t).textContent,o=document.getElementById(n).textContent,a=e.createProgram();return r.updateProgram(e,a,i,o)},r.createProgramFromURLs=function(e,t,n){var i=e.createProgram();return r.updateProgramFromURLs(e,i,t,n)},r.updateProgramFromURLs=function(e,t,i,o){var a,s,l=new XMLHttpRequest;return l.onload=function(){a=l.response},l.open("GET",n.urlForPath(i)+"?"+ +new Date,!1),l.send(),l.onload=function(){s=l.response},l.open("GET",n.urlForPath(o)+"?"+ +new Date,!1),l.send(),r.updateProgram(e,t,a,s)},r.updateProgram=function(e,t,n,i){try{var o=r.createShader(e,n,e.VERTEX_SHADER),a=r.createShader(e,"#ifdef GL_ES\nprecision highp float;\n#endif\n\n"+i,e.FRAGMENT_SHADER)}catch(s){return console.log(s),t}if(e.useProgram(null),null!=t)for(var l=e.getAttachedShaders(t),u=0;u<l.length;u++)e.detachShader(t,l[u]);else t=e.createProgram();if(null==o||null==a)return t;if(e.attachShader(t,o),e.attachShader(t,a),e.deleteShader(o),e.deleteShader(a),e.linkProgram(t),!e.getProgramParameter(t,e.LINK_STATUS)){var c="WebGL program error:\nVALIDATE_STATUS: "+e.getProgramParameter(t,e.VALIDATE_STATUS)+"\nERROR: "+e.getError()+"\n\n--- Vertex Shader ---\n"+n+"\n\n--- Fragment Shader ---\n"+i;throw console.log(c),c}return t},r.createShader=function(e,t,n){var r=e.createShader(n);if(e.shaderSource(r,t),e.compileShader(r),!e.getShaderParameter(r,e.COMPILE_STATUS)){var i="WebGL shader error:\n"+(n==e.VERTEX_SHADER?"VERTEX":"FRAGMENT")+" SHADER:\n"+e.getShaderInfoLog(r);throw i}return r},r.Program=function(e,t,n,r){r=r||{},this.gl=e,this.program=null,this.defines=r.defines||{},this.transforms=r.transforms,this.uniforms={},this.attribs={},this.vertex_shader_source=t,this.fragment_shader_source=n,this.compile()},r.Program.createProgramFromURLs=function(e,t,i,o){var a=Object.create(r.Program.prototype);return a.vertex_shader_url=t,a.fragment_shader_url=i,a.updateVertexShaderSource=function(){var e,t=new XMLHttpRequest;return t.onload=function(){e=t.response},t.open("GET",n.urlForPath(this.vertex_shader_url)+"?"+ +new Date,!1),t.send(),e},a.updateFragmentShaderSource=function(){var e,t=new XMLHttpRequest;return t.onload=function(){e=t.response},t.open("GET",n.urlForPath(this.fragment_shader_url)+"?"+ +new Date,!1),t.send(),e},r.Program.call(a,e,null,null,o),a},r.Program.defines={},r.Program.prototype.compile=function(){"function"==typeof this.updateVertexShaderSource&&(this.vertex_shader_source=this.updateVertexShaderSource()),"function"==typeof this.updateFragmentShaderSource&&(this.fragment_shader_source=this.updateFragmentShaderSource());var e={};for(var t in r.Program.defines)e[t]=r.Program.defines[t];for(var t in this.defines)e[t]=this.defines[t];var i="";for(var t in e)0!=e[t]&&(i+="boolean"==typeof e[t]&&1==e[t]?"#define "+t+"\n":"number"==typeof e[t]&&Math.floor(e[t])==e[t]?"#define "+t+" "+e[t].toFixed(1)+"\n":"#define "+t+" "+e[t]+"\n");this.processed_vertex_shader_source=i+this.vertex_shader_source,this.processed_fragment_shader_source=i+this.fragment_shader_source;var o;if(null!=this.transforms){var a,s=new XMLHttpRequest;s.onload=function(){a=s.response};for(var l in this.transforms){var u=this.transforms[l];if(null!=u){"string"==typeof u&&(u=[u]),o=new RegExp("#pragma\\s+tangram:\\s+"+l,"g");var c=this.processed_vertex_shader_source.match(o),p=this.processed_fragment_shader_source.match(o);if(null!=c||null!=p){var f="";for(var d in u)s.open("GET",n.urlForPath(u[d])+"?"+ +new Date,!1),s.send(),f+=a+"\n";null!=c&&(this.processed_vertex_shader_source=this.processed_vertex_shader_source.replace(o,f)),null!=p&&(this.processed_fragment_shader_source=this.processed_fragment_shader_source.replace(o,f))}}}}o=new RegExp("#pragma\\s+tangram:\\s+\\w+","g"),this.processed_vertex_shader_source=this.processed_vertex_shader_source.replace(o,""),this.processed_fragment_shader_source=this.processed_fragment_shader_source.replace(o,""),this.program=r.updateProgram(this.gl,this.program,this.processed_vertex_shader_source,this.processed_fragment_shader_source),this.gl.useProgram(this.program),this.refreshUniforms(),this.refreshAttributes()},r.Program.prototype.uniform=function(e,t){var n=this.uniforms[t]=this.uniforms[t]||{};n.name=t,n.location=n.location||this.gl.getUniformLocation(this.program,t),n.method="uniform"+e;var r=Array.prototype.slice.call(arguments,2);n.values=r,this.updateUniform(t)},r.Program.prototype.updateUniform=function(e){var t=this.uniforms[e];null!=t&&null!=t.location&&this.gl[t.method].apply(this.gl,[t.location].concat(t.values))},r.Program.prototype.refreshUniforms=function(){for(var e in this.uniforms)this.uniforms[e].location=this.gl.getUniformLocation(this.program,e),this.updateUniform(e)},r.Program.prototype.refreshAttributes=function(){this.attribs={}},r.Program.prototype.attribute=function(e){var t=this.attribs[e]=this.attribs[e]||{};return null!=t.location?t:(t.name=e,t.location=this.gl.getAttribLocation(this.program,e),t)};try{r.tesselator=function(){function e(e,t){t.push(null!=r.z?[e[0],e[1],r.z]:[e[0],e[1]])}function t(e){return e}function n(){}var r=new libtess.GluTesselator;return r.gluTessCallback(libtess.gluEnum.GLU_TESS_VERTEX_DATA,e),r.gluTessCallback(libtess.gluEnum.GLU_TESS_COMBINE,t),r.gluTessCallback(libtess.gluEnum.GLU_TESS_EDGE_FLAG,n),r.gluTessNormal(0,0,1),r}(),r.triangulatePolygon=function(e,t){var n=[];r.tesselator.z=t,r.tesselator.gluTessBeginPolygon(n);for(var i=0;i<e.length;i++){r.tesselator.gluTessBeginContour();for(var o=e[i],a=0;a<o.length;a++){var s=[o[a][0],o[a][1],0];r.tesselator.gluTessVertex(s,s)}r.tesselator.gluTessEndContour()}return r.tesselator.gluTessEndPolygon(),n}}catch(i){}r.addVertices=function(e,t,n){if(null==e)return n;t=t||[];for(var r=0,i=e.length;i>r;r++)n.push.apply(n,e[r]),n.push.apply(n,t);return n},r.addVerticesMultipleAttributes=function(e,t,n){var r=e.length,i=e[0].length;t=t||[];for(var o=0;i>o;o++){for(var a=0;r>a;a++)n.push.apply(n,e[a][o]);n.push.apply(n,t)}return n},r.VertexArrayObject={},r.VertexArrayObject.disabled=!1,r.VertexArrayObject.bound_vao=null,r.VertexArrayObject.init=function(e){null==r.VertexArrayObject.ext&&(1!=r.VertexArrayObject.disabled&&(r.VertexArrayObject.ext=e.getExtension("OES_vertex_array_object")),console.log(null!=r.VertexArrayObject.ext?"Vertex Array Object extension available":1!=r.VertexArrayObject.disabled?"Vertex Array Object extension NOT available":"Vertex Array Object extension force disabled"))},r.VertexArrayObject.create=function(e,t){var n={};n.setup=e,n.teardown=t;var i=r.VertexArrayObject.ext;return null!=i?(n._vao=i.createVertexArrayOES(),i.bindVertexArrayOES(n._vao),n.setup(),i.bindVertexArrayOES(null),"function"==typeof n.teardown&&n.teardown()):n.setup(),n},r.VertexArrayObject.bind=function(e){var t=r.VertexArrayObject.ext;null!=e?null!=t&&null!=e._vao?(t.bindVertexArrayOES(e._vao),r.VertexArrayObject.bound_vao=e):e.setup():(null!=t?t.bindVertexArrayOES(null):null!=r.VertexArrayObject.bound_vao&&"function"==typeof r.VertexArrayObject.bound_vao.teardown&&r.VertexArrayObject.bound_vao.teardown(),r.VertexArrayObject.bound_vao=null)},void 0!==t&&(t.exports=r)},{"../utils.js":46}],37:[function(e,t){var n=e("../vector.js"),r=e("../point.js"),i=e("./gl.js"),o={};o.debug=!1,o.buildPolygons=function(e,t,n,r){r=r||{};var o=[];null!=t&&o.push(t),r.normals&&o.push(0,0,1),r.vertex_constants&&o.push.apply(o,r.vertex_constants),0==o.length&&(o=null);for(var a=e.length,s=0;a>s;s++){var l=i.triangulatePolygon(e[s]);i.addVertices(l,o,n)}return n},o.buildExtrudedPolygons=function(e,t,r,a,s,l){l=l||{};var u=t+(a||0),c=t+r;o.buildPolygons(e,c,s,{normals:!0,vertex_constants:l.vertex_constants});var p=[null,null,null];l.vertex_constants&&p.push.apply(p,l.vertex_constants);for(var f=e.length,d=0;f>d;d++)for(var h=e[d],m=0;m<h.length;m++)for(var g=h[m],y=0;y<g.length-1;y++){var v=[];v.push([g[y+1][0],g[y+1][1],c],[g[y+1][0],g[y+1][1],u],[g[y][0],g[y][1],u],[g[y][0],g[y][1],u],[g[y][0],g[y][1],c],[g[y+1][0],g[y+1][1],c]);var _=n.cross([0,0,1],n.normalize([g[y+1][0]-g[y][0],g[y+1][1]-g[y][1],0]));p[0]=_[0],p[1]=_[1],p[2]=_[2],i.addVertices(v,p,s)}return s},o.buildPolylines=function(e,t,r,a,s){function l(e,t){var i=n.normalize([-1*(t[1]-e[1]),t[0]-e[0]]),o=[e[0]+i[0]*r/2,e[1]+i[1]*r/2],a=[e[0]-i[0]*r/2,e[1]-i[1]*r/2],s=[t[0]+i[0]*r/2,t[1]+i[1]*r/2],l=[t[0]-i[0]*r/2,t[1]-i[1]*r/2];y.push(l,s,a,a,s,o)}function u(i,a,l){var u=n.normalize([-1*(a[1]-i[1]),a[0]-i[0]]),c=[[i[0]+u[0]*r/2,i[1]+u[1]*r/2],[a[0]+u[0]*r/2,a[1]+u[1]*r/2]],p=[[i[0]-u[0]*r/2,i[1]-u[1]*r/2],[a[0]-u[0]*r/2,a[1]-u[1]*r/2]],f=n.normalize([-1*(l[1]-a[1]),l[0]-a[0]]),d=[[a[0]+f[0]*r/2,a[1]+f[1]*r/2],[l[0]+f[0]*r/2,l[1]+f[1]*r/2]],h=[[a[0]-f[0]*r/2,a[1]-f[1]*r/2],[l[0]-f[0]*r/2,l[1]-f[1]*r/2]],m=n.lineIntersection(c[0],c[1],d[0],d[1]),g=null;if(null!=m){var v=m,_=n.lengthSq([v[0]-a[0],v[1]-a[1]]),x=3;_>r*r*x*x&&(g="distance",v=n.normalize([v[0]-a[0],v[1]-a[1]]),v=[a[0]+v[0]*x,a[1]+v[1]*x]);var b=[a[0]-v[0]+a[0],a[1]-v[1]+a[1]];y.push(b,v,p[0],p[0],v,c[0],h[1],d[1],b,b,d[1],v)}else g="parallel",p[1]=h[0],c[1]=d[0],y.push(p[1],c[1],p[0],p[0],c[1],c[0],h[1],d[1],h[0],h[0],d[1],d[0]);if(o.debug&&s.vertex_lines&&s.vertex_lines.push(p[0][0],p[0][1],t+.001,0,0,1,0,1,0,p[1][0],p[1][1],t+.001,0,0,1,0,1,0,h[0][0],h[0][1],t+.001,0,0,1,0,1,0,h[1][0],h[1][1],t+.001,0,0,1,0,1,0,c[0][0],c[0][1],t+.001,0,0,1,0,1,0,c[1][0],c[1][1],t+.001,0,0,1,0,1,0,d[0][0],d[0][1],t+.001,0,0,1,0,1,0,d[1][0],d[1][1],t+.001,0,0,1,0,1,0,p[0][0],p[0][1],t+.001,0,0,1,0,1,0,c[0][0],c[0][1],t+.001,0,0,1,0,1,0,p[1][0],p[1][1],t+.001,0,0,1,0,1,0,c[1][0],c[1][1],t+.001,0,0,1,0,1,0,h[0][0],h[0][1],t+.001,0,0,1,0,1,0,d[0][0],d[0][1],t+.001,0,0,1,0,1,0,h[1][0],h[1][1],t+.001,0,0,1,0,1,0,d[1][0],d[1][1],t+.001,0,0,1,0,1,0),o.debug&&g&&s.vertex_lines){var w;"parallel"==g?w=[0,1,0]:"distance"==g&&(w=[1,0,0]),s.vertex_lines.push(i[0],i[1],t+.002,0,0,1,w[0],w[1],w[2],a[0],a[1],t+.002,0,0,1,w[0],w[1],w[2],a[0],a[1],t+.002,0,0,1,w[0],w[1],w[2],l[0],l[1],t+.002,0,0,1,w[0],w[1],w[2]);for(var S=e.length,E=0;S>E;E++)for(var L=e[E],z=0;z<L.length-1;z++){var i=L[z],l=L[z+1];s.vertex_lines.push(i[0],i[1],t+5e-4,0,0,1,0,0,1,l[0],l[1],t+5e-4,0,0,1,0,0,1)}}}s=s||{},s.closed_polygon=s.closed_polygon||!1,s.remove_tile_edges=s.remove_tile_edges||!1;var c=[t,0,0,1];if(s.vertex_constants&&c.push.apply(c,s.vertex_constants),o.debug&&s.vertex_lines)for(var p=e.length,f=0;p>f;f++)for(var d=e[f],h=0;h<d.length-1;h++){var m=d[h],g=d[h+1];s.vertex_lines.push(m[0],m[1],t+.001,0,0,1,1,0,0,g[0],g[1],t+.001,0,0,1,1,0,0)}for(var y=[],p=e.length,f=0;p>f;f++){var d=e[f];if(d.length>2){var v=[];if(d.length>3){var h,_,x=[];for(1==s.closed_polygon?(h=0,_=d.length-1):(h=1,_=d.length-2,x.push(d[0]));_>h;h++){var m=d[h],g=d[h+1];x.push([(m[0]+g[0])/2,(m[1]+g[1])/2])}var b;for(1==s.closed_polygon?b=x.length:(x.push(d[d.length-1]),b=x.length-1),h=0;b>h;h++)v.push([x[h],d[(h+1)%d.length],x[(h+1)%x.length]])}else v=[[d[0],d[1],d[2]]];for(var h=0;h<v.length;h++)if(s.remove_tile_edges){var w=o.isOnTileEdge(v[h][0],v[h][1]),S=o.isOnTileEdge(v[h][1],v[h][2]);w||S?w?S||l(v[h][1],v[h][2]):l(v[h][0],v[h][1]):u(v[h][0],v[h][1],v[h][2])}else u(v[h][0],v[h][1],v[h][2])}else 2==d.length&&l(d[0],d[1])}return i.addVertices(y,c,a),a},o.buildQuadsForPoints=function(e,t,n,r,o,a){var a=a||{},s=[];a.normals&&s.push(0,0,1),a.vertex_constants&&s.push.apply(s,a.vertex_constants),0==s.length&&(s=null);for(var l=e.length,u=0;l>u;u++){var c=e[u],p=[[c[0]-t/2,c[1]-n/2],[c[0]+t/2,c[1]-n/2],[c[0]+t/2,c[1]+n/2],[c[0]-t/2,c[1]-n/2],[c[0]+t/2,c[1]+n/2],[c[0]-t/2,c[1]+n/2]];if(null!=r&&(p[0][2]=r,p[1][2]=r,p[2][2]=r,p[3][2]=r,p[4][2]=r,p[5][2]=r),1==a.texcoords){var f=[[-1,-1],[1,-1],[1,1],[-1,-1],[1,1],[-1,1]];i.addVerticesMultipleAttributes([p,f],s,o)}else i.addVertices(p,s,o)}return o},o.buildLines=function(e,t,n,r,i,o,a,s){s=s||{};for(var l=r.color,u=(r.width,e.length),c=0;u>c;c++)for(var p=e[c],f=0;f<p.length-1;f++){var d=p[f],h=p[f+1];a.push(d[0],d[1],o,0,0,1,l[0],l[1],l[2],h[0],h[1],o,0,0,1,l[0],l[1],l[2])}return a},o.isOnTileEdge=function(e,t,n){n=n||{};var r=n.tolerance_function||o.valuesWithinTolerance,i=n.tolerance||1,a=o.tile_bounds[0],s=o.tile_bounds[1],l=null;return r(e[0],a.x,i)&&r(t[0],a.x,i)?l="left":r(e[0],s.x,i)&&r(t[0],s.x,i)?l="right":r(e[1],a.y,i)&&r(t[1],a.y,i)?l="top":r(e[1],s.y,i)&&r(t[1],s.y,i)&&(l="bottom"),l},o.setTileScale=function(e){o.tile_bounds=[r(0,0),r(e,-e)]},o.valuesWithinTolerance=function(e,t,n){return n=n||1,Math.abs(e-t)<n},o.buildZigzagLineTestPattern=function(){var e=r(0,0),t=r(4096,4096),n={id:123,geometry:{type:"LineString",coordinates:[[.75*e.x+.25*t.x,.75*e.y+.25*t.y],[.75*e.x+.25*t.x,.5*e.y+.5*t.y],[.25*e.x+.75*t.x,.75*e.y+.25*t.y],[.25*e.x+.75*t.x,.25*e.y+.75*t.y],[.4*e.x+.6*t.x,.5*e.y+.5*t.y],[.5*e.x+.5*t.x,.25*e.y+.75*t.y],[.75*e.x+.25*t.x,.25*e.y+.75*t.y],[.75*e.x+.25*t.x,.4*e.y+.6*t.y]]},properties:{kind:"debug"}};return n},void 0!==t&&(t.exports=o)},{"../point.js":44,"../vector.js":47,"./gl.js":36}],38:[function(e,t){function n(e,t,n,r,o){o=o||{},this.gl=e,this.gl_program=t,this.attribs=r,this.vertex_data=n,this.buffer=this.gl.createBuffer(),this.draw_mode=o.draw_mode||this.gl.TRIANGLES,this.data_usage=o.data_usage||this.gl.STATIC_DRAW,this.vertices_per_geometry=3,this.vertex_stride=0;for(var a=0;a<this.attribs.length;a++){var s=this.attribs[a];switch(s.location=this.gl_program.attribute(s.name).location,s.byte_size=s.size,s.type){case this.gl.FLOAT:case this.gl.INT:case this.gl.UNSIGNED_INT:s.byte_size*=4;break;case this.gl.SHORT:case this.gl.UNSIGNED_SHORT:s.byte_size*=2}s.offset=this.vertex_stride,this.vertex_stride+=s.byte_size}this.vertex_count=this.vertex_data.byteLength/this.vertex_stride,this.geometry_count=this.vertex_count/this.vertices_per_geometry,this.vao=i.VertexArrayObject.create(function(){this.gl.bindBuffer(this.gl.ARRAY_BUFFER,this.buffer),this.setup()}.bind(this)),this.gl.bufferData(this.gl.ARRAY_BUFFER,this.vertex_data,this.data_usage)}function r(e,t,r,i,o){o=o||{},o.draw_mode=this.gl.LINES,this.line_width=o.line_width||2,this.vertices_per_geometry=2,n.call(this,e,t,r,i,o)}var i=e("./gl.js");n.prototype.setup=function(){for(var e=0;e<this.attribs.length;e++){var t=this.attribs[e];this.gl.enableVertexAttribArray(t.location),this.gl.vertexAttribPointer(t.location,t.size,t.type,t.normalized,this.vertex_stride,t.offset)}},n.prototype.render=function(e){var e=e||{};e.set_program!==!1&&this.gl.useProgram(this.gl_program.program),i.VertexArrayObject.bind(this.vao),"function"==typeof this._render&&this._render(),this.gl.drawArrays(this.draw_mode,0,this.vertex_count),i.VertexArrayObject.bind(null)},n.prototype.destroy=function(){console.log("GLGeometry.destroy: delete buffer of size "+this.vertex_data.byteLength),this.gl.deleteBuffer(this.buffer),delete this.vertex_data},r.prototype=Object.create(n.prototype),r.prototype._render=function(){this.gl.lineWidth(this.line_width)},void 0!==t&&(t.exports={GLGeometry:n,GLLines:r})},{"./gl.js":36}],39:[function(e,t){var n=e("./gl.js"),r=e("./gl_builders.js"),i=e("./gl_geom.js").GLGeometry,o=e("./gl_shaders.js"),a={init:function(e){this.gl=e,this.gl_program=this.makeGLProgram()},defines:{},buildPolygons:function(){},buildLines:function(){},buildPoints:function(){}};a.makeGLProgram=function(){var e={};if(null!=this.defines)for(var t in this.defines)e[t]=this.defines[t];if(null!=this.shaders&&null!=this.shaders.defines)for(var t in this.shaders.defines)e[t]=this.shaders.defines[t];var r=this.shaders&&this.shaders.transforms;return this.shaders&&this.shaders.vertex_url&&this.shaders.fragment_url?new n.Program.createProgramFromURLs(this.gl,this.shaders.vertex_url,this.shaders.fragment_url,{defines:e,transforms:r}):new n.Program(this.gl,o[this.vertex_shader_key],o[this.fragment_shader_key],{defines:e,transforms:r})},a.updateUniforms=function(){if(null!=this.uniforms)for(var e in this.uniforms)"number"==typeof this.uniforms[e]?this.gl_program.uniform("1f",e,this.uniforms[e]):"object"==typeof this.uniforms[e]&&this.uniforms[e].length>=2&&this.uniforms[e].length<=4&&this.gl_program.uniform(this.uniforms[e].length+"fv",e,this.uniforms[e])},a.update=function(){"function"==typeof this.animation&&this.animation(),this.updateUniforms()};var s={},l={};l.configureMode=function(e,t){s[e]=s[e]||Object.create(s[t.extends]||a);for(var n in t)s[e][n]=t[n];return s[e]},s.polygons=Object.create(a),s.polygons.vertex_shader_key="polygon_vertex",s.polygons.fragment_shader_key="polygon_fragment",s.polygons.uniforms={},s.polygons.makeGLGeometry=function(e){var t=new i(this.gl,this.gl_program,e,[{name:"a_position",size:3,type:gl.FLOAT,normalized:!1},{name:"a_normal",size:3,type:gl.FLOAT,normalized:!1},{name:"a_color",size:3,type:gl.FLOAT,normalized:!1},{name:"a_layer",size:1,type:gl.FLOAT,normalized:!1}]);return t.geometry_count=t.vertex_count/3,t},s.polygons.buildPolygons=function(e,t,n){var i=[t.color[0],t.color[1],t.color[2],t.layer_num];if(t.outline.color)var o=[t.outline.color[0],t.outline.color[1],t.outline.color[2],t.layer_num-.5];if(t.extrude&&t.height?r.buildExtrudedPolygons(e,t.z,t.height,t.min_height,n,{vertex_constants:i}):r.buildPolygons(e,t.z,n,{normals:!0,vertex_constants:i}),t.outline.color&&t.outline.width)for(var a=0;a<e.length;a++)r.buildPolylines(e[a],t.layer_num-.5,t.outline.width,n,{closed_polygon:!0,remove_tile_edges:!0,vertex_constants:o})},s.polygons.buildLines=function(e,t,n){var i=[t.color[0],t.color[1],t.color[2],t.layer_num];if(t.outline.color)var o=[t.outline.color[0],t.outline.color[1],t.outline.color[2],t.layer_num-.5];r.buildPolylines(e,t.z,t.width,n,{vertex_constants:i}),t.outline.color&&t.outline.width&&r.buildPolylines(e,t.z,t.width+2*t.outline.width,n,{vertex_constants:o})},s.polygons.buildPoints=function(e,t,n){var i=[t.color[0],t.color[1],t.color[2],t.layer_num];r.buildQuadsForPoints(e,2*t.size,2*t.size,t.z,n,{normals:!0,texcoords:!1,vertex_constants:i})},s.polygons_simple=Object.create(s.polygons),s.polygons_simple.vertex_shader_key="simple_polygon_vertex",s.polygons_simple.fragment_shader_key="simple_polygon_fragment",s.points=Object.create(a),s.points.vertex_shader_key="point_vertex",s.points.fragment_shader_key="point_fragment",s.points.defines={EFFECT_SCREEN_COLOR:!0},s.points.makeGLGeometry=function(e){return new i(renderer.gl,this.gl_program,e,[{name:"a_position",size:3,type:gl.FLOAT,normalized:!1},{name:"a_texcoord",size:2,type:gl.FLOAT,normalized:!1},{name:"a_color",size:3,type:gl.FLOAT,normalized:!1},{name:"a_layer",size:1,type:gl.FLOAT,normalized:!1}])},s.points.buildPoints=function(e,t,n){var i=[t.color[0],t.color[1],t.color[2],t.layer_num];r.buildQuadsForPoints(e,2*t.size,2*t.size,t.z,n,{normals:!1,texcoords:!0,vertex_constants:i})},void 0!==t&&(t.exports={ModeManager:l,Modes:s})},{"./gl.js":36,"./gl_builders.js":37,"./gl_geom.js":38,"./gl_shaders.js":41}],40:[function(e,t){function n(e,t,n,r){var r=r||{};a.call(this,"GLRenderer",e,t,n,r),l.setTileScale(a.tile_scale),s.Program.defines.TILE_SCALE=a.tile_scale,this.container=r.container,this.mode_manager=u}var r=e("../point.js"),i=e("../geo.js"),o=e("../style.js"),a=e("../vector_renderer.js"),s=e("./gl.js"),l=e("./gl_builders.js"),u=e("./gl_modes").ModeManager,c=e("gl-matrix").mat4,p=e("gl-matrix").vec3;a.GLRenderer=n,n.prototype=Object.create(a.prototype),n.debug=!1,n.prototype._init=function(){this.container=this.container||document.body,this.canvas=document.createElement("canvas"),this.canvas.style.position="absolute",this.canvas.style.top=0,this.canvas.style.left=0,this.canvas.style.zIndex=-1,this.container.appendChild(this.canvas),this.gl=s.getContext(this.canvas),this.initModes(),this.resizeMap(this.container.clientWidth,this.container.clientHeight),this.start_time=+new Date,this.last_render_count=null,this.initInputHandlers()},n.prototype.initModes=function(){for(var e in this.modes)this.modes[e].init(this.gl)},n.calculateZ=function(){var e=0;return e},n.addTile=function(e,t,r,i){var a,s,l,u,c={};e.debug.features=0;for(var p=0;p<t.length;p++)if(a=t[p],null!=r.layers[a.name]&&0!=r.layers[a.name].visible&&null!=e.layers[a.name])for(var f=e.layers[a.name].features.length,d=f-1;d>=0;d--)if(l=e.layers[a.name].features[d],s=o.parseStyleForFeature(l,r.layers[a.name],e),null!=s){s.layer_num=p,s.z=n.calculateZ(a,e)+s.z;var h=null,m=null,g=null;"Polygon"==l.geometry.type?g=[l.geometry.coordinates]:"MultiPolygon"==l.geometry.type?g=l.geometry.coordinates:"LineString"==l.geometry.type?m=[l.geometry.coordinates]:"MultiLineString"==l.geometry.type?m=l.geometry.coordinates:"Point"==l.geometry.type?h=[l.geometry.coordinates]:"MultiPoint"==l.geometry.type&&(h=l.geometry.coordinates),u=s.mode.name,null==c[u]&&(c[u]=[]),null!=g&&i[u].buildPolygons(g,s,c[u]),null!=m&&i[u].buildLines(m,s,c[u]),null!=h&&i[u].buildPoints(h,s,c[u]),e.debug.features++}e.vertex_data={};for(var y in c)e.vertex_data[y]=new Float32Array(c[y]);return{vertex_data:!0}},n.prototype._tileWorkerCompleted=function(e){var t=e.vertex_data;this.freeTileResources(e),e.gl_geometry={};for(var n in t)e.gl_geometry[n]=this.modes[n].makeGLGeometry(t[n]);e.debug.geometries=0,e.debug.buffer_size=0;for(var r in e.gl_geometry)e.debug.geometries+=e.gl_geometry[r].geometry_count,e.debug.buffer_size+=e.gl_geometry[r].vertex_data.byteLength;e.debug.geom_ratio=(e.debug.geometries/e.debug.features).toFixed(1),delete e.vertex_data},n.prototype.removeTile=function(e){1!=this.map_zooming&&(this.freeTileResources(this.tiles[e]),a.prototype.removeTile.apply(this,arguments))},n.prototype.freeTileResources=function(e){if(null!=e&&null!=e.gl_geometry){for(var t in e.gl_geometry)e.gl_geometry[t].destroy();e.gl_geometry=null}},n.prototype.preserve_tiles_within_zoom=2,n.prototype.setZoom=function(e){var t=e,n=e;null!=this.map_last_zoom&&(console.log("renderer.map_last_zoom: "+this.map_last_zoom),Math.abs(e-this.map_last_zoom)<=this.preserve_tiles_within_zoom&&(e>this.map_last_zoom?t=e-this.preserve_tiles_within_zoom:n=e+this.preserve_tiles_within_zoom)),a.prototype.setZoom.apply(this,arguments),this.removeTilesOutsideZoomRange(t,n)},n.prototype.removeTilesOutsideZoomRange=function(e,t){e=Math.min(e,this.tile_source.max_zoom||e),t=Math.min(t,this.tile_source.max_zoom||t),console.log("removeTilesOutsideZoomRange ["+e+", "+t+"])");var n=[];for(var r in this.tiles){var i=this.tiles[r];(i.coords.z<e||i.coords.z>t)&&n.push(r)}for(var o=0;o<n.length;o++){var a=n[o];console.log("removed "+a+" (outside range ["+e+", "+t+"])"),this.removeTile(a)}},n.prototype.resizeMap=function(e,t){a.prototype.resizeMap.apply(this,arguments),this.css_size={width:e,height:t},this.device_size={width:Math.round(this.css_size.width*this.device_pixel_ratio),height:Math.round(this.css_size.height*this.device_pixel_ratio)},this.canvas.style.width=this.css_size.width+"px",this.canvas.style.height=this.css_size.height+"px",this.canvas.width=this.device_size.width,this.canvas.height=this.device_size.height,this.gl.viewport(0,0,this.canvas.width,this.canvas.height)
},n.prototype._render=function(){var e=this.gl;this.input(),e.clearColor(0,0,0,1),e.clear(e.COLOR_BUFFER_BIT|e.DEPTH_BUFFER_BIT),e.enable(e.DEPTH_TEST),e.depthFunc(e.LESS),e.enable(e.CULL_FACE),e.cullFace(e.BACK);var t=i.latLngToMeters(r(this.center.lng,this.center.lat)),n=i.min_zoom_meters_per_pixel/Math.pow(2,this.zoom),o=r(this.css_size.width/2*n,this.css_size.height/2*n),s=c.create(),l=c.create(),u=c.create();c.scale(u,u,p.fromValues(1/o.x,1/o.y,1/o.y));var f=[];for(var d in this.tiles){var h=this.tiles[d];1==h.loaded&&1==h.visible&&f.push(h)}this.renderable_tiles_count=f.length;var m=0;for(var g in this.modes){var y=this.modes[g].gl_program,v=!0;for(var d in f){var h=f[d];1==h.loaded&&1==h.visible&&null!=h.gl_geometry[g]&&(1==v&&(v=!1,e.useProgram(y.program),this.modes[g].update(),y.uniform("2f","u_resolution",this.device_size.width,this.device_size.height),y.uniform("2f","u_aspect",this.device_size.width/this.device_size.height,1),y.uniform("1f","u_time",(+new Date-this.start_time)/1e3),y.uniform("1f","u_map_zoom",this.zoom),y.uniform("1f","u_num_layers",this.layers.length),y.uniform("1f","u_meters_per_pixel",n),y.uniform("Matrix4fv","u_meter_view",!1,u)),c.identity(s),c.translate(s,s,p.fromValues(h.min.x-t.x,h.min.y-t.y,0)),c.scale(s,s,p.fromValues((h.max.x-h.min.x)/a.tile_scale,-1*(h.max.y-h.min.y)/a.tile_scale,1)),y.uniform("Matrix4fv","u_tile_view",!1,s),c.identity(l),c.translate(l,l,p.fromValues(h.min.x,h.min.y,0)),c.scale(l,l,p.fromValues((h.max.x-h.min.x)/a.tile_scale,-1*(h.max.y-h.min.y)/a.tile_scale,1)),y.uniform("Matrix4fv","u_tile_world",!1,l),h.gl_geometry[g].render({set_program:!1}),m+=h.gl_geometry[g].geometry_count)}}return m!=this.last_render_count&&console.log("rendered "+m+" primitives"),this.last_render_count=m,!0},n.prototype.compileShaders=function(){for(var e in this.modes)this.modes[e].gl_program.compile()},n.prototype.getDebugSum=function(e,t){var n=0;for(var r in this.tiles)null==this.tiles[r].debug[e]||"function"==typeof t&&1!=t(this.tiles[r])||(n+=this.tiles[r].debug[e]);return n},n.prototype.getDebugAverage=function(e,t){return this.getDebugSum(e,t)/Object.keys(this.tiles).length},n.prototype.initInputHandlers=function(){var e=this;e.key=null,document.addEventListener("keydown",function(t){if(37==t.keyCode)e.key="left";else if(39==t.keyCode)e.key="right";else if(38==t.keyCode)e.key="up";else if(40==t.keyCode)e.key="down";else if(83==t.keyCode){console.log("reloading shaders");for(var n in this.modes)this.modes[n].gl_program.compile();e.dirty=!0}}),document.addEventListener("keyup",function(){e.key=null})},n.prototype.input=function(){},void 0!==t&&(t.exports=n)},{"../geo.js":35,"../point.js":44,"../style.js":45,"../vector_renderer.js":48,"./gl.js":36,"./gl_builders.js":37,"./gl_modes":39,"gl-matrix":2}],41:[function(e,t){var n={};n.point_fragment="\n#define GLSLIFY 1\n\nuniform vec2 u_resolution;\nvarying vec3 v_color;\nvarying vec2 v_texcoord;\nvoid main(void) {\n  vec3 color = v_color;\n  float len = length(v_texcoord);\n  if(len > 1.) {\n    discard;\n  }\n  color *= (1. - smoothstep(.25, 1., len)) + 0.5;\n  #pragma tangram: fragment\n  gl_FragColor = vec4(color, 1.);\n}\n",n.point_vertex="\n#define GLSLIFY 1\n\nuniform mat4 u_tile_view;\nuniform mat4 u_meter_view;\nuniform float u_num_layers;\nattribute vec3 a_position;\nattribute vec2 a_texcoord;\nattribute vec3 a_color;\nattribute float a_layer;\nvarying vec3 v_color;\nvarying vec2 v_texcoord;\nfloat a_x_calculateZ(float z, float layer, const float num_layers, const float z_layer_scale) {\n  float z_layer_range = (num_layers + 1.) * z_layer_scale;\n  float z_layer = (layer + 1.) * z_layer_scale;\n  z = z_layer + clamp(z, 0., z_layer_scale);\n  z = (z_layer_range - z) / z_layer_range;\n  return z;\n}\n#pragma tangram: globals\n\nvoid main() {\n  vec4 position = u_meter_view * u_tile_view * vec4(a_position, 1.);\n  #pragma tangram: vertex\n  v_color = a_color;\n  v_texcoord = a_texcoord;\n  position.z = a_x_calculateZ(position.z, a_layer, u_num_layers, 256.);\n  gl_Position = position;\n}\n",n.polygon_fragment="\n#define GLSLIFY 1\n\nuniform vec2 u_resolution;\nuniform vec2 u_aspect;\nuniform mat4 u_meter_view;\nuniform float u_meters_per_pixel;\nuniform float u_time;\nvarying vec3 v_color;\n#if !defined(LIGHTING_VERTEX)\n\nvarying vec4 v_position;\nvarying vec3 v_normal;\n#endif\n\nvarying vec4 v_position_world;\n#if defined(EFFECT_NOISE_TEXTURE)\n\nvec3 a_x_mod289(vec3 x) {\n  return x - floor(x * (1.0 / 289.0)) * 289.0;\n}\nvec4 a_x_mod289(vec4 x) {\n  return x - floor(x * (1.0 / 289.0)) * 289.0;\n}\nvec4 a_x_permute(vec4 x) {\n  return a_x_mod289(((x * 34.0) + 1.0) * x);\n}\nvec4 a_x_taylorInvSqrt(vec4 r) {\n  return 1.79284291400159 - 0.85373472095314 * r;\n}\nvec3 a_x_fade(vec3 t) {\n  return t * t * t * (t * (t * 6.0 - 15.0) + 10.0);\n}\nfloat a_x_cnoise(vec3 P) {\n  vec3 Pi0 = floor(P);\n  vec3 Pi1 = Pi0 + vec3(1.0);\n  Pi0 = a_x_mod289(Pi0);\n  Pi1 = a_x_mod289(Pi1);\n  vec3 Pf0 = fract(P);\n  vec3 Pf1 = Pf0 - vec3(1.0);\n  vec4 ix = vec4(Pi0.x, Pi1.x, Pi0.x, Pi1.x);\n  vec4 iy = vec4(Pi0.yy, Pi1.yy);\n  vec4 iz0 = Pi0.zzzz;\n  vec4 iz1 = Pi1.zzzz;\n  vec4 ixy = a_x_permute(a_x_permute(ix) + iy);\n  vec4 ixy0 = a_x_permute(ixy + iz0);\n  vec4 ixy1 = a_x_permute(ixy + iz1);\n  vec4 gx0 = ixy0 * (1.0 / 7.0);\n  vec4 gy0 = fract(floor(gx0) * (1.0 / 7.0)) - 0.5;\n  gx0 = fract(gx0);\n  vec4 gz0 = vec4(0.5) - abs(gx0) - abs(gy0);\n  vec4 sz0 = step(gz0, vec4(0.0));\n  gx0 -= sz0 * (step(0.0, gx0) - 0.5);\n  gy0 -= sz0 * (step(0.0, gy0) - 0.5);\n  vec4 gx1 = ixy1 * (1.0 / 7.0);\n  vec4 gy1 = fract(floor(gx1) * (1.0 / 7.0)) - 0.5;\n  gx1 = fract(gx1);\n  vec4 gz1 = vec4(0.5) - abs(gx1) - abs(gy1);\n  vec4 sz1 = step(gz1, vec4(0.0));\n  gx1 -= sz1 * (step(0.0, gx1) - 0.5);\n  gy1 -= sz1 * (step(0.0, gy1) - 0.5);\n  vec3 g000 = vec3(gx0.x, gy0.x, gz0.x);\n  vec3 g100 = vec3(gx0.y, gy0.y, gz0.y);\n  vec3 g010 = vec3(gx0.z, gy0.z, gz0.z);\n  vec3 g110 = vec3(gx0.w, gy0.w, gz0.w);\n  vec3 g001 = vec3(gx1.x, gy1.x, gz1.x);\n  vec3 g101 = vec3(gx1.y, gy1.y, gz1.y);\n  vec3 g011 = vec3(gx1.z, gy1.z, gz1.z);\n  vec3 g111 = vec3(gx1.w, gy1.w, gz1.w);\n  vec4 norm0 = a_x_taylorInvSqrt(vec4(dot(g000, g000), dot(g010, g010), dot(g100, g100), dot(g110, g110)));\n  g000 *= norm0.x;\n  g010 *= norm0.y;\n  g100 *= norm0.z;\n  g110 *= norm0.w;\n  vec4 norm1 = a_x_taylorInvSqrt(vec4(dot(g001, g001), dot(g011, g011), dot(g101, g101), dot(g111, g111)));\n  g001 *= norm1.x;\n  g011 *= norm1.y;\n  g101 *= norm1.z;\n  g111 *= norm1.w;\n  float n000 = dot(g000, Pf0);\n  float n100 = dot(g100, vec3(Pf1.x, Pf0.yz));\n  float n010 = dot(g010, vec3(Pf0.x, Pf1.y, Pf0.z));\n  float n110 = dot(g110, vec3(Pf1.xy, Pf0.z));\n  float n001 = dot(g001, vec3(Pf0.xy, Pf1.z));\n  float n101 = dot(g101, vec3(Pf1.x, Pf0.y, Pf1.z));\n  float n011 = dot(g011, vec3(Pf0.x, Pf1.yz));\n  float n111 = dot(g111, Pf1);\n  vec3 fade_xyz = a_x_fade(Pf0);\n  vec4 n_z = mix(vec4(n000, n100, n010, n110), vec4(n001, n101, n011, n111), fade_xyz.z);\n  vec2 n_yz = mix(n_z.xy, n_z.zw, fade_xyz.y);\n  float n_xyz = mix(n_yz.x, n_yz.y, fade_xyz.x);\n  return 2.2 * n_xyz;\n}\n#endif\n\nconst float light_ambient = 0.5;\nvec3 c_x_pointLight(vec4 position, vec3 normal, vec3 color, vec4 light_pos, float light_ambient, const bool backlight) {\n  vec3 light_dir = normalize(position.xyz - light_pos.xyz);\n  color *= abs(max(float(backlight) * -1., dot(normal, light_dir * -1.0))) + light_ambient;\n  return color;\n}\nvec3 d_x_directionalLight(vec3 normal, vec3 color, vec3 light_dir, float light_ambient) {\n  light_dir = normalize(light_dir);\n  color *= dot(normal, light_dir * -1.0) + light_ambient;\n  return color;\n}\nvec3 b_x_lighting(vec4 position, vec3 normal, vec3 color, vec4 light_pos, vec4 night_light_pos, vec3 light_dir, float light_ambient) {\n  \n  #if defined(LIGHTING_POINT)\n  color = c_x_pointLight(position, normal, color, light_pos, light_ambient, true);\n  #elif defined(LIGHTING_NIGHT)\n  color = c_x_pointLight(position, normal, color, night_light_pos, 0., false);\n  #elif defined(LIGHTING_DIRECTION)\n  color = d_x_directionalLight(normal, color, light_dir, light_ambient);\n  #else\n  color = color;\n  #endif\n  return color;\n}\n#pragma tangram: globals\n\nvoid main(void) {\n  vec3 color = v_color;\n  #if !defined(LIGHTING_VERTEX) // default to per-pixel lighting\n  color = b_x_lighting(v_position, v_normal, color, vec4(0., 0., 150. * u_meters_per_pixel, 1.), vec4(0., 0., 50. * u_meters_per_pixel, 1.), vec3(0.2, 0.7, -0.5), light_ambient);\n  #endif\n  \n  #pragma tangram: fragment\n  \n  #if defined(EFFECT_SPOTLIGHT)\n  vec2 position = gl_FragCoord.xy / u_resolution.xy;\n  position = position * 2.0 - 1.0;\n  position *= u_aspect;\n  color *= max(1.0 - distance(position, vec2(0.0, 0.0)), 0.2);\n  #endif\n  gl_FragColor = vec4(color, 1.0);\n}\n",n.polygon_vertex="\n#define GLSLIFY 1\n\nuniform vec2 u_resolution;\nuniform vec2 u_aspect;\nuniform float u_time;\nuniform mat4 u_tile_world;\nuniform mat4 u_tile_view;\nuniform mat4 u_meter_view;\nuniform float u_meters_per_pixel;\nuniform float u_num_layers;\nattribute vec3 a_position;\nattribute vec3 a_normal;\nattribute vec3 a_color;\nattribute float a_layer;\nvarying vec3 v_color;\n#if !defined(LIGHTING_VERTEX)\n\nvarying vec4 v_position;\nvarying vec3 v_normal;\n#endif\n\nvarying vec4 v_position_world;\nconst float light_ambient = 0.5;\nvec4 a_x_perspective(vec4 position, const vec2 perspective_offset, const vec2 perspective_factor) {\n  position.xy += position.z * perspective_factor * (position.xy - perspective_offset);\n  return position;\n}\nvec4 b_x_isometric(vec4 position, const vec2 axis, const float multiplier) {\n  position.xy += position.z * axis * multiplier / u_aspect;\n  return position;\n}\nvec4 c_x_popup(vec4 position, const vec2 center, const float radius) {\n  if(position.z > 0.) {\n    float cd = distance(position.xy, center);\n    float popup_fade_inner = radius * 2. / 3.;\n    float popup_fade_outer = radius;\n    if(cd > popup_fade_inner) {\n      position.z *= 1.0 - smoothstep(popup_fade_inner, popup_fade_outer, cd);\n    }\n  }\n  return position;\n}\nfloat d_x_calculateZ(float z, float layer, const float num_layers, const float z_layer_scale) {\n  float z_layer_range = (num_layers + 1.) * z_layer_scale;\n  float z_layer = (layer + 1.) * z_layer_scale;\n  z = z_layer + clamp(z, 0., z_layer_scale);\n  z = (z_layer_range - z) / z_layer_range;\n  return z;\n}\nvec3 f_x_pointLight(vec4 position, vec3 normal, vec3 color, vec4 light_pos, float light_ambient, const bool backlight) {\n  vec3 light_dir = normalize(position.xyz - light_pos.xyz);\n  color *= abs(max(float(backlight) * -1., dot(normal, light_dir * -1.0))) + light_ambient;\n  return color;\n}\nvec3 g_x_directionalLight(vec3 normal, vec3 color, vec3 light_dir, float light_ambient) {\n  light_dir = normalize(light_dir);\n  color *= dot(normal, light_dir * -1.0) + light_ambient;\n  return color;\n}\nvec3 e_x_lighting(vec4 position, vec3 normal, vec3 color, vec4 light_pos, vec4 night_light_pos, vec3 light_dir, float light_ambient) {\n  \n  #if defined(LIGHTING_POINT)\n  color = f_x_pointLight(position, normal, color, light_pos, light_ambient, true);\n  #elif defined(LIGHTING_NIGHT)\n  color = f_x_pointLight(position, normal, color, night_light_pos, 0., false);\n  #elif defined(LIGHTING_DIRECTION)\n  color = g_x_directionalLight(normal, color, light_dir, light_ambient);\n  #else\n  color = color;\n  #endif\n  return color;\n}\n#pragma tangram: globals\n\nvoid main() {\n  vec4 position = u_tile_view * vec4(a_position, 1.);\n  vec4 position_world = u_tile_world * vec4(a_position, 1.);\n  #pragma tangram: vertex\n  v_position_world = position_world;\n  #if defined(LIGHTING_VERTEX)\n  v_color = e_x_lighting(position, a_normal, a_color, vec4(0., 0., 150. * u_meters_per_pixel, 1.), vec4(0., 0., 50. * u_meters_per_pixel, 1.), vec3(0.2, 0.7, -0.5), light_ambient);\n  #else\n  v_position = position;\n  v_normal = a_normal;\n  v_color = a_color;\n  #endif\n  position = u_meter_view * position;\n  #if defined(PROJECTION_PERSPECTIVE)\n  position = a_x_perspective(position, vec2(-0.25, -0.25), vec2(0.6, 0.6));\n  #elif defined(PROJECTION_ISOMETRIC) // || defined(PROJECTION_POPUP)\n  position = b_x_isometric(position, vec2(0., 1.), 1.);\n  #endif\n  position.z = d_x_calculateZ(position.z, a_layer, u_num_layers, 4096.);\n  gl_Position = position;\n}\n",n.simple_polygon_fragment="\n#define GLSLIFY 1\n\nuniform float u_meters_per_pixel;\nvarying vec3 v_color;\n#if !defined(LIGHTING_VERTEX)\n\nvarying vec4 v_position;\nvarying vec3 v_normal;\n#endif\n\nvec3 a_x_pointLight(vec4 position, vec3 normal, vec3 color, vec4 light_pos, float light_ambient, const bool backlight) {\n  vec3 light_dir = normalize(position.xyz - light_pos.xyz);\n  color *= abs(max(float(backlight) * -1., dot(normal, light_dir * -1.0))) + light_ambient;\n  return color;\n}\n#pragma tangram: globals\n\nvoid main(void) {\n  vec3 color;\n  #if !defined(LIGHTING_VERTEX) // default to per-pixel lighting\n  vec4 light_pos = vec4(0., 0., 150. * u_meters_per_pixel, 1.);\n  const float light_ambient = 0.5;\n  const bool backlit = true;\n  color = a_x_pointLight(v_position, v_normal, v_color, light_pos, light_ambient, backlit);\n  #else\n  color = v_color;\n  #endif\n  \n  #pragma tangram: fragment\n  gl_FragColor = vec4(color, 1.0);\n}\n",n.simple_polygon_vertex="\n#define GLSLIFY 1\n\nuniform vec2 u_aspect;\nuniform mat4 u_tile_view;\nuniform mat4 u_meter_view;\nuniform float u_meters_per_pixel;\nuniform float u_num_layers;\nattribute vec3 a_position;\nattribute vec3 a_normal;\nattribute vec3 a_color;\nattribute float a_layer;\nvarying vec3 v_color;\n#if !defined(LIGHTING_VERTEX)\n\nvarying vec4 v_position;\nvarying vec3 v_normal;\n#endif\n\nvec4 a_x_perspective(vec4 position, const vec2 perspective_offset, const vec2 perspective_factor) {\n  position.xy += position.z * perspective_factor * (position.xy - perspective_offset);\n  return position;\n}\nvec4 b_x_isometric(vec4 position, const vec2 axis, const float multiplier) {\n  position.xy += position.z * axis * multiplier / u_aspect;\n  return position;\n}\nfloat c_x_calculateZ(float z, float layer, const float num_layers, const float z_layer_scale) {\n  float z_layer_range = (num_layers + 1.) * z_layer_scale;\n  float z_layer = (layer + 1.) * z_layer_scale;\n  z = z_layer + clamp(z, 0., z_layer_scale);\n  z = (z_layer_range - z) / z_layer_range;\n  return z;\n}\nvec3 d_x_pointLight(vec4 position, vec3 normal, vec3 color, vec4 light_pos, float light_ambient, const bool backlight) {\n  vec3 light_dir = normalize(position.xyz - light_pos.xyz);\n  color *= abs(max(float(backlight) * -1., dot(normal, light_dir * -1.0))) + light_ambient;\n  return color;\n}\n#pragma tangram: globals\n\nvoid main() {\n  vec4 position = u_tile_view * vec4(a_position, 1.);\n  #pragma tangram: vertex\n  \n  #if defined(LIGHTING_VERTEX)\n  vec4 light_pos = vec4(0., 0., 150. * u_meters_per_pixel, 1.);\n  const float light_ambient = 0.5;\n  const bool backlit = true;\n  v_color = d_x_pointLight(position, a_normal, a_color, light_pos, light_ambient, backlit);\n  #else\n  v_position = position;\n  v_normal = a_normal;\n  v_color = a_color;\n  #endif\n  position = u_meter_view * position;\n  #if defined(PROJECTION_PERSPECTIVE)\n  position = a_x_perspective(position, vec2(-0.25, -0.25), vec2(0.6, 0.6));\n  #elif defined(PROJECTION_ISOMETRIC)\n  position = b_x_isometric(position, vec2(0., 1.), 1.);\n  #endif\n  position.z = c_x_calculateZ(position.z, a_layer, u_num_layers, 4096.);\n  gl_Position = position;\n}\n",void 0!==t.exports&&(t.exports=n)},{}],42:[function(e,t){var n=e("./vector_renderer.js"),r=L.GridLayer.extend({initialize:function(e){L.setOptions(this,e),this.options.vectorRenderer=this.options.vectorRenderer||"GLRenderer",this.renderer=n.create(this.options.vectorRenderer,this.options.vectorTileSource,this.options.vectorLayers,this.options.vectorStyles,{num_workers:this.options.numWorkers}),this.renderer.debug=this.options.debug,this.renderer.continuous_animation=!1},onAdd:function(){var e=this;e.on("tileunload",function(t){var n=t.tile,r=n.getAttribute("data-tile-key");e.renderer.removeTile(r)}),e._map.on("resize",function(){var t=e._map.getSize();e.renderer.resizeMap(t.x,t.y),e.updateBounds()}),e._map.on("move",function(){var t=e._map.getCenter();e.renderer.setCenter(t.lng,t.lat),e.updateBounds()}),e._map.on("zoomstart",function(){console.log("map.zoomstart "+e._map.getZoom()),e.renderer.startZoom()}),e._map.on("zoomend",function(){console.log("map.zoomend "+e._map.getZoom()),e.renderer.setZoom(e._map.getZoom()),e.updateBounds()}),e.renderer.container=e._map.getContainer();var t=e._map.getCenter();e.renderer.setCenter(t.lng,t.lat),console.log("zoom: "+e._map.getZoom()),e.renderer.setZoom(e._map.getZoom()),e.updateBounds(),L.GridLayer.prototype.onAdd.apply(this,arguments),e.renderer.init()},onRemove:function(){L.GridLayer.prototype.onRemove.apply(this,arguments)},createTile:function(e,t){var n=document.createElement("div");return this.renderer.loadTile(e,n,t),n},updateBounds:function(){var e=this,t=e._map.getBounds();e.renderer.setBounds(t.getSouthWest(),t.getNorthEast())},render:function(){this.renderer.render()}}),i=function(e){return new r(e)};void 0!==t&&(t.exports={LeafletLayer:r,leafletLayer:i})},{"./vector_renderer.js":48}],43:[function(e,t){var n=e("./leaflet_layer.js");e("./gl/gl_renderer.js"),e("./canvas/canvas_renderer.js");var r=e("./gl/gl.js");void 0!==t&&(t.exports={LeafletLayer:n.LeafletLayer,leafletLayer:n.leafletLayer,GL:r})},{"./canvas/canvas_renderer.js":34,"./gl/gl.js":36,"./gl/gl_renderer.js":40,"./leaflet_layer.js":42}],44:[function(e,t){function n(e,t){return{x:e,y:t}}n.copy=function(e){return null==e?null:{x:e.x,y:e.y}},void 0!==t&&(t.exports=n)},{}],45:[function(_dereq_,module,exports){var Geo=_dereq_("./geo.js"),Style={};Style.color={pseudoRandomGrayscale:function(e){var t=Math.max(parseInt(e.id,16)%100/100,.4);return[.7*t,.7*t,.7*t]},pseudoRandomColor:function(e){return[.7*(parseInt(e.id,16)/100%1),.7*(parseInt(e.id,16)/1e4%1),.7*(parseInt(e.id,16)/1e6%1)]},randomColor:function(){return[.7*Math.random(),.7*Math.random(),.7*Math.random()]}},Style.pixels=function(p,z){var f;return eval("f = function(f, t, h) { return "+("function"==typeof p?"("+(p.toString()+"(f, t, h))"):p)+" * h.Geo.meters_per_pixel[h.zoom]; }"),f},Style.defaults={color:[1,0,0],width:1,size:1,extrude:!1,height:20,min_height:0,outline:{},mode:{name:"polygons"}},Style.parseStyleForFeature=function(e,t,n){var t=t||{},r={},i={Style:Style,Geo:Geo,zoom:n.coords.z};if("function"==typeof t.filter&&0==t.filter(e,n,i))return null;if(r.color=t.color&&(t.color[e.properties.kind]||t.color.default)||Style.defaults.color,"function"==typeof r.color&&(r.color=r.color(e,n,i)),r.width=t.width&&(t.width[e.properties.kind]||t.width.default)||Style.defaults.width,"function"==typeof r.width&&(r.width=r.width(e,n,i)),r.width*=Geo.units_per_meter[n.coords.z],r.size=t.size&&(t.size[e.properties.kind]||t.size.default)||Style.defaults.size,"function"==typeof r.size&&(r.size=r.size(e,n,i)),r.size*=Geo.units_per_meter[n.coords.z],r.extrude=t.extrude&&(t.extrude[e.properties.kind]||t.extrude.default)||Style.defaults.extrude,"function"==typeof r.extrude&&(r.extrude=r.extrude(e,n,i)),r.height=e.properties&&e.properties.height||Style.defaults.height,r.min_height=e.properties&&e.properties.min_height||Style.defaults.min_height,r.extrude&&("number"==typeof r.extrude?r.height=r.extrude:"object"==typeof r.extrude&&r.extrude.length>=2&&(r.min_height=r.extrude[0],r.height=r.extrude[1])),r.z=t.z&&(t.z[e.properties.kind]||t.z.default)||Style.defaults.z||0,"function"==typeof r.z&&(r.z=r.z(e,n,i)),r.outline={},t.outline=t.outline||{},r.outline.color=t.outline.color&&(t.outline.color[e.properties.kind]||t.outline.color.default)||Style.defaults.outline.color,"function"==typeof r.outline.color&&(r.outline.color=r.outline.color(e,n,i)),r.outline.width=t.outline.width&&(t.outline.width[e.properties.kind]||t.outline.width.default)||Style.defaults.outline.width,"function"==typeof r.outline.width&&(r.outline.width=r.outline.width(e,n,i)),r.outline.width*=Geo.units_per_meter[n.coords.z],r.outline.dash=t.outline.dash&&(t.outline.dash[e.properties.kind]||t.outline.dash.default)||Style.defaults.outline.dash,"function"==typeof r.outline.dash&&(r.outline.dash=r.outline.dash(e,n,i)),null!=t.mode&&null!=t.mode.name){r.mode={};for(var o in t.mode)r.mode[o]=t.mode[o]}else r.mode=Style.defaults.mode;return r},void 0!==module&&(module.exports=Style)},{"./geo.js":35}],46:[function(_dereq_,module,exports){function urlForPath(e){if(null==e||""==e)return null;if("object"==typeof e&&e.length>0)for(var t in e){var n=e[t].toLowerCase().substr(0,4);"http"!=n&&"file"!=n&&(e[t]=window.location.origin+window.location.pathname+e[t])}else{var n=e.toLowerCase().substr(0,4);"http"!=n&&"file"!=n&&(e=window.location.origin+window.location.pathname+e)}return e}function serializeWithFunctions(e){var t=JSON.stringify(e,function(e,t){return"function"==typeof t?t.toString():t});return t}function deserializeWithFunctions(e){var t=JSON.parse(e);return t=stringsToFunctions(t)}function stringsToFunctions(obj){for(var p in obj){var val=obj[p];if("object"==typeof val)obj[p]=stringsToFunctions(val);else if("string"==typeof val&&null!=val.match(/^function.*\(.*\)/)){var f;try{eval("f = "+val),obj[p]=f}catch(e){obj[p]=val}}}return obj}void 0!==module&&(module.exports={urlForPath:urlForPath,serializeWithFunctions:serializeWithFunctions,deserializeWithFunctions:deserializeWithFunctions,stringsToFunctions:stringsToFunctions})},{}],47:[function(e,t){var n={};n.lengthSq=function(e){return 2==e.length?e[0]*e[0]+e[1]*e[1]:e[0]*e[0]+e[1]*e[1]+e[2]*e[2]},n.length=function(e){return Math.sqrt(n.lengthSq(e))},n.normalize=function(e){var t;if(2==e.length)return t=e[0]*e[0]+e[1]*e[1],t=Math.sqrt(t),0!=t?[e[0]/t,e[1]/t]:[0,0];var t=e[0]*e[0]+e[1]*e[1]+e[2]*e[2];return t=Math.sqrt(t),0!=t?[e[0]/t,e[1]/t,e[2]/t]:[0,0,0]},n.cross=function(e,t){return[e[1]*t[2]-e[2]*t[1],e[2]*t[0]-e[0]*t[2],e[0]*t[1]-e[1]*t[0]]},n.lineIntersection=function(e,t,n,r,i){var i=i||.01,o=e[1]-t[1],a=e[0]-t[0],s=n[1]-r[1],l=n[0]-r[0],u=e[0]*t[1]-e[1]*t[0],c=n[0]*r[1]-n[1]*r[0],p=a*s-o*l;return Math.abs(p)>i?[(u*l-a*c)/p,(u*s-o*c)/p]:null},void 0!==t&&(t.exports=n)},{}],48:[function(_dereq_,module,exports){function VectorRenderer(e,t,n,r,i){var i=i||{};this.type=e,this.tile_source=t,this.tiles={},this.num_workers=i.num_workers||1,"string"==typeof n?(this.layer_source=Utils.urlForPath(n),this.layers=VectorRenderer.loadLayers(this.layer_source)):this.layers=n,this.layers_serialized=Utils.serializeWithFunctions(this.layers),"string"==typeof r?(this.style_source=Utils.urlForPath(r),this.styles=VectorRenderer.loadStyles(this.style_source)):this.styles=r,this.styles_serialized=Utils.serializeWithFunctions(this.styles),this.dirty=!0,this.animated=!1,this.initialized=!1,this.modes=VectorRenderer.createModes({},this.styles),this.updateActiveModes(),this.createWorkers(),this.zoom=null,this.center=null,this.device_pixel_ratio=window.devicePixelRatio||1}function findBaseLibraryURL(){try{VectorRenderer.library_base_url="";for(var e=document.getElementsByTagName("script"),t=0;t<e.length;t++){var n=e[t].src.indexOf("vector-map.debug.js");if(-1==n&&(n=e[t].src.indexOf("vector-map.min.js")),n>=0){VectorRenderer.library_base_url=e[t].src.substr(0,n);break}}}catch(r){}}var Point=_dereq_("./point.js"),Geo=_dereq_("./geo.js"),Style=_dereq_("./style.js"),ModeManager=_dereq_("./gl/gl_modes").ModeManager,Utils=_dereq_("./utils.js"),yaml=_dereq_("js-yaml");findBaseLibraryURL(),VectorRenderer.tile_scale=4096,Geo.setTileScale(VectorRenderer.tile_scale),VectorRenderer.create=function(e,t,n,r,i){return new VectorRenderer[e](t,n,r,i)},VectorRenderer.prototype.init=function(){"function"==typeof this._init&&this._init.apply(this,arguments);var e=this;this.workers.forEach(function(t){t.addEventListener("message",e.workerBuildTileCompleted.bind(e))}),this.initialized=!0},VectorRenderer.prototype.createWorkers=function(){var e=this,t=VectorRenderer.library_base_url+"vector-map-worker.min.js?"+ +new Date,n=new XMLHttpRequest;n.onload=function(){var t=window.URL.createObjectURL(new Blob([n.response],{type:"application/javascript"}));e.workers=[];for(var r=0;r<e.num_workers;r++)e.workers.push(new Worker(t))},n.open("GET",t,!1),n.send(),this.next_worker=0},VectorRenderer.prototype.workerPostMessageForTile=function(e,t){null==e.worker&&(e.worker=this.next_worker,this.next_worker=(e.worker+1)%this.workers.length),this.workers[e.worker].postMessage(t)},VectorRenderer.prototype.setCenter=function(e,t){this.center={lng:e,lat:t},this.dirty=!0},VectorRenderer.prototype.setZoom=function(e){this.map_last_zoom=this.zoom,this.zoom=e,this.capped_zoom=Math.min(~~this.zoom,this.tile_source.max_zoom||~~this.zoom),this.map_zooming=!1,this.dirty=!0},VectorRenderer.prototype.startZoom=function(){this.map_last_zoom=this.zoom,this.map_zooming=!0},VectorRenderer.prototype.setBounds=function(e,t){this.bounds={sw:{lng:e.lng,lat:e.lat},ne:{lng:t.lng,lat:t.lat}};var n=200*Geo.meters_per_pixel[~~this.zoom];this.buffered_meter_bounds={sw:Geo.latLngToMeters(Point(this.bounds.sw.lng,this.bounds.sw.lat)),ne:Geo.latLngToMeters(Point(this.bounds.ne.lng,this.bounds.ne.lat))},this.buffered_meter_bounds.sw.x-=n,this.buffered_meter_bounds.sw.y-=n,this.buffered_meter_bounds.ne.x+=n,this.buffered_meter_bounds.ne.y+=n,this.center_meters=Point((this.buffered_meter_bounds.sw.x+this.buffered_meter_bounds.ne.x)/2,(this.buffered_meter_bounds.sw.y+this.buffered_meter_bounds.ne.y)/2);for(var r in this.tiles)this.updateVisibilityForTile(this.tiles[r]);this.dirty=!0},VectorRenderer.prototype.isTileInZoom=function(e){return Math.min(e.coords.z,this.tile_source.max_zoom||e.coords.z)==this.capped_zoom},VectorRenderer.prototype.updateVisibilityForTile=function(e){var t=e.visible;return e.visible=this.isTileInZoom(e)&&Geo.boxIntersect(e.bounds,this.buffered_meter_bounds),e.center_dist=Math.abs(this.center_meters.x-e.min.x)+Math.abs(this.center_meters.y-e.min.y),t!=e.visible},VectorRenderer.prototype.resizeMap=function(){this.dirty=!0},VectorRenderer.prototype.requestRedraw=function(){this.dirty=!0},VectorRenderer.prototype.render=function(){return 0==this.dirty||0==this.initialized?!1:(this.dirty=!1,"function"==typeof this._render&&this._render.apply(this,arguments),1==this.animated&&(this.dirty=!0),!0)},VectorRenderer.prototype.loadTile=function(e,t,n){if(e.z>this.tile_source.max_zoom){var r=e.z-this.tile_source.max_zoom;e.x=~~(e.x/Math.pow(2,r)),e.y=~~(e.y/Math.pow(2,r)),e.display_z=e.z,e.z-=r}this.trackTileSetLoadStart();var i=[e.x,e.y,e.z].join("/");if(this.tiles[i])return void(n&&n(null,t));var o=this.tiles[i]={};o.key=i,o.coords=e,o.min=Geo.metersForTile(o.coords),o.max=Geo.metersForTile({x:o.coords.x+1,y:o.coords.y+1,z:o.coords.z}),o.bounds={sw:{x:o.min.x,y:o.max.y},ne:{x:o.max.x,y:o.min.y}},o.debug={},o.loading=!0,o.loaded=!1,this.buildTile(o.key),this.updateTileElement(o,t),this.updateVisibilityForTile(o),n&&n(null,t)},VectorRenderer.prototype.rebuildTiles=function(){this.layers_serialized=Utils.serializeWithFunctions(this.layers),this.styles_serialized=Utils.serializeWithFunctions(this.styles),this.workers.forEach(function(e){e.postMessage({type:"prepareForRebuild",layers:this.layers_serialized,styles:this.styles_serialized})}.bind(this));var e=[],t=[];for(var n in this.tiles)1==this.tiles[n].visible?e.push(n):t.push(n);e.sort(function(e,t){var n=this.tiles[e].center_dist,r=this.tiles[t].center_dist;return r>n?-1:r==n?0:1}.bind(this));for(var n in e)this.buildTile(e[n]);for(var n in t)1==this.isTileInZoom(this.tiles[t[n]])?this.buildTile(t[n]):this.removeTile(t[n]);this.updateActiveModes()},VectorRenderer.prototype.buildTile=function(e){var t=this.tiles[e];this.workerPostMessageForTile(t,{type:"buildTile",tile:{key:t.key,coords:t.coords,min:t.min,max:t.max,debug:t.debug},renderer_type:this.type,tile_source:this.tile_source,layers:this.layers_serialized,styles:this.styles_serialized})},VectorRenderer.prototype.workerBuildTileCompleted=function(e){if("buildTileCompleted"==e.data.type){var t=e.data.tile;if(null==this.tiles[t.key])return void console.log("discarded tile "+t.key+" in VectorRenderer.tileWorkerCompleted because previously removed");t=this.mergeTile(t.key,t),"function"==typeof this._tileWorkerCompleted&&this._tileWorkerCompleted(t),this.dirty=!0,this.trackTileSetLoadEnd(),this.printDebugForTile(t)}},VectorRenderer.prototype.removeTile=function(e){console.log("tile unload for "+e);var t=this.tiles[e];null!=t&&this.workerPostMessageForTile(t,{type:"removeTile",key:t.key}),delete this.tiles[e],this.dirty=!0},VectorRenderer.prototype.updateTileElement=function(e,t){if(t.setAttribute("data-tile-key",e.key),t.style.width="256px",t.style.height="256px",this.debug){var n=document.createElement("div");n.textContent=e.key,n.style.position="absolute",n.style.left=0,n.style.top=0,n.style.color="white",n.style.fontSize="16px",t.appendChild(n),t.style.borderStyle="solid",t.style.borderColor="white",t.style.borderWidth="1px"}},VectorRenderer.prototype.mergeTile=function(e,t){var n=this.tiles[e];if(null==n)return this.tiles[e]=t,this.tiles[e];for(var r in t)n[r]=t[r];return n},VectorRenderer.prototype.reloadConfig=function(){null!=this.layer_source&&(this.layers=VectorRenderer.loadLayers(this.layer_source),this.layers_serialized=Utils.serializeWithFunctions(this.layers)),null!=this.style_source&&(this.styles=VectorRenderer.loadStyles(this.style_source),this.styles_serialized=Utils.serializeWithFunctions(this.styles)),(null!=this.layer_source||null!=this.style_source)&&this.rebuildTiles()},VectorRenderer.prototype.updateActiveModes=function(){this.active_modes={};var e=!1;for(var t in this.styles.layers){var n=this.styles.layers[t].mode&&this.styles.layers[t].mode.name||Style.defaults.mode.name;this.styles.layers[t].visible!==!1&&(this.active_modes[n]=!0,0==e&&1==this.modes[n].animated&&(e=!0))}this.animated=e},VectorRenderer.prototype.trackTileSetLoadStart=function(){null==this.tile_set_loading&&(this.tile_set_loading=+new Date,console.log("tile set load START"))},VectorRenderer.prototype.trackTileSetLoadEnd=function(){if(null!=this.tile_set_loading){var e=!0;for(var t in this.tiles)if(1==this.tiles[t].loading){e=!1;break}1==e&&(this.last_tile_set_load=+new Date-this.tile_set_loading,this.tile_set_loading=null,console.log("tile set load FINISHED in: "+this.last_tile_set_load))}},VectorRenderer.prototype.printDebugForTile=function(e){console.log("debug for "+e.key+": [ "+Object.keys(e.debug).map(function(t){return t+": "+e.debug[t]}).join(", ")+" ]")},VectorRenderer.loadLayers=function(url){var layers,req=new XMLHttpRequest;return req.onload=function(){eval("layers = "+req.response)},req.open("GET",url+"?"+ +new Date,!1),req.send(),layers},VectorRenderer.loadStyles=function(e){var t,n=new XMLHttpRequest;return n.onload=function(){t=yaml.load(n.response)},n.open("GET",e+"?"+ +new Date,!1),n.send(),t=Utils.stringsToFunctions(t)},VectorRenderer.processLayersForTile=function(e,t){for(var n={},r=0;r<e.length;r++)e[r].number=r,null!=e[r]&&(null==e[r].data?n[e[r].name]=t.layers[e[r].name]:"string"==typeof e[r].data?n[e[r].name]=t.layers[e[r].data]:"function"==typeof e[r].data&&(n[e[r].name]=e[r].data(t.layers))),n[e[r].name]=n[e[r].name]||{type:"FeatureCollection",features:[]};return t.layers=n,n},VectorRenderer.createModes=function(e,t){var n=_dereq_("./gl/gl_modes").Modes;for(var r in n)e[r]=n[r];for(var r in t.modes)e[r]=ModeManager.configureMode(r,t.modes[r]);return e},void 0!==module&&(module.exports=VectorRenderer)},{"./geo.js":35,"./gl/gl_modes":39,"./point.js":44,"./style.js":45,"./utils.js":46,"js-yaml":3}]},{},[43])(43)});